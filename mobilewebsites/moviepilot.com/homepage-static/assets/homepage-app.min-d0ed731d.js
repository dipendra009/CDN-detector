require=function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){var n,r;n=t(24),r=t(3),n.loadModules=function(){return t(34),t(35),t(36)},n.start(r)},{24:24,3:3,34:34,35:35,36:36}],2:[function(t,e,i){var n,r,o,s,a,l,u,c=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(14),o=t(5),a=t(41),u=t(42),l=t(43),s=t(32),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.logPrefix="[app.controllers.home_controller]:",e.prototype.index=function(){return this.view=new o,s.globalContext="homepage",this.log("home#index")},e.prototype.settings=function(){var t;return a.available()?(this.index.apply(this,arguments),t=l.isMobile()?"sidebar":"header",u.trigger(t+":openSettings"),this.log("home#settings")):a.loginRedirect({action:"settings"})},e.prototype.notifications=function(){return this.index.apply(this,arguments),u.trigger("header:openNotifications"),this.log("home#notifications")},e.prototype.dispose=function(){return this.disposed?void 0:(s.globalContext=null,e.__super__.dispose.apply(this,arguments))},e}(n)},{14:14,32:32,41:41,42:42,43:43,5:5}],3:[function(t,e,i){var n,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(19),r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.logPrefix="[app.modules.router]:",i.prototype.controllers={home:t(2),error:t(22)},i.prototype.addRoutes=function(){return this.addRoute(/.+/,"error#index"),this.addRoute("","home#index"),this.addRoute(/settings/,"home#settings"),this.addRoute(/notifications/,"home#notifications")},i}(n),e.exports=new r},{19:19,2:2,22:22}],4:[function(t,e,i){var n,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t(15),e.exports=n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.logPrefix="[app.views.home_stream_view]:",i.prototype.itemTemplate=t(74),i.prototype.autoRender=!0,i.prototype.context="home-stream",i.prototype.prerenderSignature="homepage",i.prototype.elements={".b-h-s-list":"$list"},i.prototype.events={"click .p-h-s-load_more":"showMore","click .b-stream_item":"_proxyClick"},i.prototype.initialize=function(t){return t.endless&&(this.endless=t.endless),i.__super__.initialize.apply(this,arguments)},i.prototype.getItemTemplateData=function(){return{item:i.__super__.getItemTemplateData.apply(this,arguments)}},i.prototype._proxyClick=function(t){var e;if("A"!==t.target.tagName)return e=$(t.currentTarget),e.find(".b-si-title > a").trigger("click")},i}(r)},{15:15,74:74}],5:[function(t,e,i){var n,r,o,s,a,l,u,c,h,p,d,f,g,m,v,y=function(t,e){return function(){return t.apply(e,arguments)}},_=function(t,e){function i(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},b={}.hasOwnProperty;c=t(21),a=t(48),l=t(29),u=t(30),o=t(4),g=t(41),v=t(42),m=t(43),v=t(42),h=t(78),f=t(50),r=t(44),n=t(27),d=t(6),p=t(25),e.exports=s=function(e){function i(){return this.updateCommunityTickerPosition=y(this.updateCommunityTickerPosition,this),this.renderCommunityTicker=y(this.renderCommunityTicker,this),this.initializeTether=y(this.initializeTether,this),this.renderSidebar=y(this.renderSidebar,this),i.__super__.constructor.apply(this,arguments)}return _(i,e),i.prototype.logPrefix="[app.views.home_view]:",i.prototype.template=t(75),i.prototype.className="p-home",i.prototype.container="#main",i.prototype.autoRender=!0,i.prototype.prerenderSignature="home",h.extend(i.prototype,p),i.prototype.elements={".b-promoted_banner":"$promotedBanner",".p-h-s-community_wrapper":"$communityWrapper",".m-gad.m-gad-sidebar":"$sidebarAd",".p-h-stream":"$homeStream",".p-h-s-button.is-join-button":"$joinButton",".b-h-s-list":"$streamList",".tether-target-ancor":"$tetherTargetAncor",".b-promoted_banner_wrapper":"$promotedBannerWrapper"},i.prototype.events={"click .p-h-ib-icon":"clickAuthorIcon"},i.prototype.clickAuthorIcon=function(t){var e,i,n,r;return t.preventDefault(),n=$(t.currentTarget).data(),e=n.href,r=n.type,i=e,i+="longform"===r?"&referral_code=mp:homepage":"?referral_code=mp:homepage",g.available()?v.trigger("track:navigate",{to:"author-app",via:r+"-icon",redirect:i}):g.loginRedirect({action:r+"-icon",redirect:i})},i.prototype.attach=function(){var t,e;return i.__super__.attach.apply(this,arguments),$(".l-footer").remove(),d.promote_magazine||(this.subview("promotedBanner",new a({el:this.$promotedBanner})),this.listenTo(this.subview("promotedBanner"),"changeState",function(t){return function(){var e;return null!=(e=t.tether)?e.position():void 0}}(this))),e=function(t){return function(){var e;return t.streamCollection=new l,t.streamCollection.signature="homepage",e=new o({el:t.$homeStream,collection:t.streamCollection}),t.subview("homeStream",e),e.$list.children().length?void 0:e.pollData()}}(this),g.available()?(this.streamCollection=new u,this.streamCollection.userId=g.id,t=this.streamCollection.fetch(),t.done(function(t){return function(){var e;return t.subview("homeStream",new o({el:t.$homeStream,collection:t.streamCollection,endless:!0})),e=t.subview("homeStream"),e.pollData()}}(this)),t.error(function(t){return function(){return t.streamCollection.dispose(),e()}}(this))):e(),v.on("adVisibleInDOM",function(t){return function(){return t.updateCommunityTickerPosition()}}(this)),h.delay(function(t){return function(){return t.updateCommunityTickerPosition()}}(this),3e3),m.isMobile()||(this.renderSidebar(),d.promote_magazine)?void 0:(this.initializeAd($(".l-ad_wrap .m-gad.has-masthead"),"Masthead_970x250"),this.initializeAd($(".l-ad_wrap .m-gad.has-leaderboard"),"Leaderboard_728x90"))},i.prototype.renderSidebar=function(){var t;return t=f.isTakeoverActive(),this.$communityWrapper.toggleClass("has-takeover_ad",t),this.initializeTether(),this.initializeAd(this.$sidebarAd,"StickyAd_300x250")},i.prototype.initializeTether=function(){var e;return e=t(77),this.tether=new e({enabled:!0,element:this.$communityWrapper,target:this.$tetherTargetAncor,attachment:"top left",targetAttachment:"bottom left",constraints:[{to:"window",pin:["top"]},{to:this.$streamList,pin:["bottom"]}]})},i.prototype.renderCommunityTicker=function(){return this.communityCollection=new n,this.communityCollection.filter="new_post",this.subview("community",new r({container:this.$communityWrapper,community:this.communityCollection}))},i.prototype.updateCommunityTickerPosition=function(){var t;return null!=(t=this.tether)?t.position():void 0},i.prototype.getAdsTargeting=function(){return{homepage:"moviepilot",page:"homepage"}},i.prototype.dispose=function(){var t,e,n;if(!this.disposed)return null!=(t=this.trendingTagsCollection)&&t.dispose(),null!=(e=this.communityCollection)&&e.dispose(),null!=(n=this.streamCollection)&&n.dispose(),i.__super__.dispose.apply(this,arguments)},i}(c)},{21:21,25:25,27:27,29:29,30:30,4:4,41:41,42:42,43:43,44:44,48:48,50:50,6:6,75:75,77:77,78:78}],6:[function(t,e,i){(function(t){var i;e.exports=null!=(i=t.app)?i.config:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,i){!function(n,r){"object"==typeof i&&"function"==typeof t?e.exports=r(t("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(t){return r(t||n.Backbone)}):r(Backbone)}(this,function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function n(t){return t===Object(t)}function r(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1}function o(t,e){for(var i in e)t[i]=e[i];return t}function s(t,e){if(null==t)return void 0;var i=t[e];return"function"==typeof i?t[e]():i}return t.LocalStorage=window.Store=function(t,e){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t,this.serializer=e||{serialize:function(t){return n(t)?JSON.stringify(t):t},deserialize:function(t){return t&&JSON.parse(t)}};var i=this.localStorage().getItem(this.name);this.records=i&&i.split(",")||[]},o(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||0===t.id||(t.id=i(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t));var e=t.id.toString();return r(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(t.id)))},findAll:function(){for(var t,e,i=[],n=0;n<this.records.length;n++)t=this.records[n],e=this.serializer.deserialize(this.localStorage().getItem(this._itemName(t))),null!=e&&i.push(e);return i},destroy:function(t){this.localStorage().removeItem(this._itemName(t.id));for(var e=t.id.toString(),i=0;i<this.records.length;i++)this.records[i]===e&&this.records.splice(i,1);return this.save(),t},localStorage:function(){return localStorage},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var i in t)e.test(i)&&t.removeItem(i);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(t){return this.name+"-"+t}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,i,n){var r,o,a=s(i,"localStorage")||s(i.collection,"localStorage"),l=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":r=void 0!=i.id?a.find(i):a.findAll();break;case"create":r=a.create(i);break;case"update":r=a.update(i);break;case"delete":r=a.destroy(i)}}catch(u){o=22===u.code&&0===a._storageSize()?"Private browsing is unsupported":u.message}return r?(n&&n.success&&("0.9.10"===t.VERSION?n.success(i,r,n):n.success(r)),l&&l.resolve(r)):(o=o?o:"Record Not Found",n&&n.error&&("0.9.10"===t.VERSION?n.error(i,o,n):n.error(o)),l&&l.reject(o)),n&&n.complete&&n.complete(r),l&&l.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e,i){var n=i&&i.ajaxSync;return n||!s(e,"localStorage")&&!s(e.collection,"localStorage")?t.ajaxSync:t.localSync},t.sync=function(e,i,n){return t.getSyncMethod(i,n).apply(this,[e,i,n])},t.LocalStorage})},{backbone:"backbone"}],8:[function(t,e,i){},{}],9:[function(t,e,i){function n(){c=!1,a.length?u=a.concat(u):h=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(a=u,u=[];++h<e;)a&&a[h].run();h=-1,e=u.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,l=e.exports={},u=[],c=!1,h=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new o(t,e)),1!==u.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],10:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var c=0;u>c;++c){var h,p,d,f,g=t[c].replace(a,"%20"),m=g.indexOf(i);m>=0?(h=g.substr(0,m),p=g.substr(m+1)):(h=g,p=""),d=decodeURIComponent(h),f=decodeURIComponent(p),n(s,d)?r(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],11:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],12:[function(t,e,i){"use strict";i.decode=i.parse=t(10),i.encode=i.stringify=t(11)},{10:10,11:11}],13:[function(t,e,i){(function(i){var n,r,o,s,a,l,u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("backbone"),s=t(78),o=t(16),a=t(50),i.browser&&(l=t(42)),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t,i){return this.options=null!=i?i:{},this.prefetched=null,e.__super__.initialize.apply(this,arguments)},e.prototype.api=a.api,e.prototype.reset=function(){return this.prefetched=null,e.__super__.reset.apply(this,arguments)},e.prototype.addPrefetched=function(t,e){return(null!=t?t.length:void 0)?this.add(t,e):void 0},e.prototype.getPrefetched=function(t){var e,i;return i={type:"collection",name:t||s.result(this,"prefetch"),signature:this.signature},(this.prefetched=a.getPrefetched(i))&&(e=this.prefetched.resource.collection||this.prefetched.resource,this.addPrefetched(e,{parse:!0}),this.prefetched.pagination)?this.pagination=this.prefetched.pagination:void 0},e.prototype.setPrefetched=function(t,e){var i,n;return i={type:"collection",name:e||s.result(this,"prefetch"),signature:this.signature,resource:this._resource},this.pagination&&(i.pagination=this.pagination),this._headers&&(n=this._headers["surrogate-key"])&&this.addFastlyKey(t,n),a.setPrefetched(t,i)},e.prototype.dispose=function(){return this.disposed?void 0:(this.stopListening(),this.off(),this.disposed=!0)},e}(n.Collection),s.defaults(r.prototype,s.pick(o.prototype,"addHeaders","addFastlyKey")),e.exports=r}).call(this,t(9))},{16:16,42:42,50:50,78:78,9:9,backbone:"backbone"}],14:[function(t,e,i){var n,r,o;n=t("backbone"),o=t(6),e.exports=r=function(){function t(){}return t.prototype.trace=o.debug,t.prototype.log=n.Log.log,t.prototype.logPrefix="[app.controllers.base.controller]:",t.prototype.initialize=function(){return this.log("initialized")},t.prototype.adjustTitle=function(t,e){return null==e&&(e=!0),e&&(t+=" | moviepilot.com"),document.title=t},t.prototype.dispose=function(){var t,e;if(!this.disposed){for(t in this)e=this[t],null!=e&&"function"==typeof e.dispose&&e.dispose();return"undefined"!=typeof LT&&null!==LT&&LT.resetTarget(),this.disposed=!0,this.log("disposed")}},t}()},{6:6,backbone:"backbone"}],15:[function(t,e,i){(function(i){var n,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};s=t(73),r=t(21),o=t(78),a=t(42),e.exports=n=function(t){function e(){return this.pollingFailed=l(this.pollingFailed,this),this.dataLoaded=l(this.dataLoaded,this),this.getScrollableHeight=l(this.getScrollableHeight,this),this.checkListPosition=l(this.checkListPosition,this),this.initializeFeed=l(this.initializeFeed,this),this.initializeView=l(this.initializeView,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype._scrollDebounce=100,e.prototype._resizeDebounce=100,e.prototype.endless=!1,e.prototype.renderAccumulatedItems=!0,e.prototype.perPage=12,e.prototype.renderTrigger=2,e.prototype.preloadFactor=50,e.prototype.errorsLimit=0,e.prototype.autoRenderItems=!0,e.prototype.autoPollItems=!0,e.prototype.reversed=!1,e.prototype.checkCollectionLength=!0,e.prototype.initialize=function(t){return this.options=t,this.options&&o.defaults(this,o.pick(this.options,["skip","endless"])),e.__super__.initialize.apply(this,arguments),setTimeout(this.initializeView,0)},e.prototype.initializeView=function(){return this.isFullyFetched=!1,this.isFullyRendered=!1,this.errors=0,this.rendered=0,this.length=this.collection.length,null!=this.$list&&this.$list.length||(this.$list=this.$el),this.endless&&(null==this.$parent&&(this.$parent=this.container?$(this.container):this.$el),this.getParentHeight(),this.scrolled=0,null==this.$scrollable&&(this.$scrollable=$(i.window)),this.getScrollableHeight(),this.addScrollHandlers()),this.isPrerendered?(this.rendered=this.$list.children().length,this.collection.pagination.last&&(this.isFullyFetched=!0),this.$el.addClass("fetched loaded"),this.collection.prefetched&&!this.length&&this.$el.addClass("empty"),this.collection.pagination.last&&this.checkRenderState(),this.log("using "+this.rendered+" prerendered items")):this.initializeFeed()},e.prototype.addScrollHandlers=function(){return this.$scrollable&&(this._cv_scrolled||this.$scrollable.on("scroll",this._cv_scrolled=o.throttle(this.checkListPosition,this._scrollDebounce)),!this._cv_resized)?this.$scrollable.on("resize",this._cv_resized=o.throttle(this.getScrollableHeight,this._resizeDebounce)):void 0},e.prototype.removeScrollHandlers=function(){return this.$scrollable?(this._cv_scrolled&&this.$scrollable.off("scroll",this._cv_scrolled),this._cv_resized&&this.$scrollable.off("resize",this._cv_resized),delete this._cv_scrolled,delete this._cv_resized):void 0},e.prototype.skipItem=function(t){return this.skip?this.skip.push(t):this.skip=[t]},e.prototype.initializeFeed=function(){if(this.length){if(this.autoRenderItems)return this.renderItems()}else if(this.autoPollItems)return this.collection.pagination.last?this.$el.addClass("empty"):this.pollData()},e.prototype.reset=function(){return this.$el.removeClass("fetched empty loaded error rendered"),this.isFullyFetched=!1,this.isFullyRendered=!1,this.errors=0,this.rendered=0,this.length=this.collection.length,this.$list.html(""),this.endless?(this.getParentHeight(),this.scrolled=0,this.addScrollHandlers()):void 0},e.prototype.checkListPosition=function(){return this.disposed||(this.scrolled=this.$scrollable.scrollTop())<=0?void 0:this.scrolled>this.height-this.scrollableHeight*this.renderTrigger?this.showMore():void 0},e.prototype.getScrollableHeight=function(){return this.scrollableHeight=this.$scrollable.height()},e.prototype.getParentHeight=function(){return this.height=this.$parent.height()},e.prototype.pollData=function(){var t;if(!this.disposed)return!this.xhrs.collection||this.xhrs.collection&&(0===(t=this.xhrs.collection.readyState)||4===t)?this.collection.pagination.last?(this.length||this.$el.addClass("empty"),!1):(this.log("requesting more items from the server"),this.trigger("polling"),this.xhrs.collection=this.collection.fetch({success:this.dataLoaded,error:this.pollingFailed})):!1},e.prototype.dataLoaded=function(t,e){var i,n;if(!this.disposed)return this.length=this.collection.length,this.collection.pagination.last||this.checkCollectionLength&&this.length<o.result(this,"perPage")?(this.isFullyFetched=!0,this.length?(this.$el.addClass("loaded"),this.checkRenderState()):this.$el.addClass("empty"),this.log("loaded "+((null!=e?e.length:void 0)||(null!=e&&null!=(i=e.collection)?i.length:void 0)||0)+" items, total items: "+this.length+", last request")):this.log("loaded "+((null!=e?e.length:void 0)||(null!=e&&null!=(n=e.collection)?n.length:void 0)||0)+" items, total items: "+this.length),this.trigger("fetched"),this.autoRenderItems?this.renderItems():void 0},e.prototype.pollingFailed=function(t,e){return this.disposed?void 0:this.rendered?(a.trigger("track:error",{action:"load_collection",label:this.context||this.options.context||i.location.href}),this.errors>=this.errorsLimit||i.window.alert(s.get("lang").request_failed),this.errors++):this.$el.addClass("error")},e.prototype.showMore=function(t){return t instanceof $.Event&&(t.preventDefault(),t.stopPropagation()),this.$el.addClass("is-loading"),this.length-this.rendered<=this.preloadFactor&&this.pollData(),this.renderAccumulatedItems&&this.renderItems(),this.trackShowMore()},e.prototype.trackShowMore=o.debounce(function(){var t,e;return a.trigger("track:engagement",{action:"show_more",label:this.context||this.options.context}),this.endless?void 0:(e=o.isFunction(this.perPage)?this.perPage():this.perPage,t=window.location.href.split("?")[0]+("?page="+(Math.ceil(this.rendered/e)+1)),a.trigger("track:pageview",t))},100),e.prototype.getItemTemplateFunction=function(){return this.itemTemplate},e.prototype.getItemTemplateData=function(t){return(null!=t?t.toJSON():void 0)||{}},e.prototype.checkRenderState=function(){return this.isFullyRendered||this.length!==this.rendered?void 0:(this.$el.addClass("rendered"),this.endless&&this.removeScrollHandlers(),this.isFullyRendered=!0,this.log("rendered all items"))},e.prototype.addItem=function(t){return this.length=this.collection.length,this.attachItems(this.renderItem(t)),this.rendered||this.$el.addClass("fetched loaded"),this.rendered++,this.afterRenderItems(),this.log("added item "+t.id)},e.prototype.removeItem=function(t){var e;return this.length=this.collection.length,e=this.$list.children('[data-id="'+t.id+'"]'),e.length?(e.remove(),this.rendered--,this.endless&&this.getParentHeight(),this.log("removed item "+t.id)):void 0},e.prototype.attachItems=function(t){return this.reversed?this.$list.prepend(t):this.$list.append(t)},e.prototype.renderItems=function(){var t,e,i;if(!this.disposed)return this.rendered<this.length?(t=Math.min(this.rendered+o.result(this,"perPage"),this.length),this.log("rendering items: "+this.rendered+"-"+t),e=function(){var e,n,r,o;for(o=[],i=e=n=this.rendered,r=t;r>=n?r>e:e>r;i=r>=n?++e:--e)o.push(this.renderItem(this.collection.at(i)));return o}.call(this),this.reversed&&e.reverse(),this.attachItems(e.join("")),this.rendered||this.$el.addClass("fetched loaded"),this.rendered=t,this.afterRenderItems(),this.$el.removeClass("is-loading")):void 0},e.prototype.afterRenderItems=function(){return this.endless&&this.getParentHeight(),this.isFullyFetched=this.length===this.rendered&&this.collection.pagination.last,this.isFullyFetched?this.checkRenderState():void 0},e.prototype.renderItem=function(t){var e,i;return this.skip&&(e=t.get("id"),h.call(this.skip,e)>=0)?"":(i=this.getItemTemplateFunction(),"function"==typeof i?i(this.getItemTemplateData(t)):void 0)},e.prototype.dispose=function(){return this.disposed?void 0:(this.endless&&this.removeScrollHandlers(),delete this.skip,e.__super__.dispose.apply(this,arguments))},e}(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{21:21,42:42,73:73,78:78}],16:[function(t,e,i){(function(i){var n,r,o,s,a,l=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("backbone"),o=t(78),s=t(50),i.browser&&(a=t(42)),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t,i){return this.options=null!=i?i:{},this.prefetched=null,e.__super__.initialize.apply(this,arguments)},e.prototype.api=s.api,e.prototype.clear=function(){return this.prefetched=null,e.__super__.clear.apply(this,arguments)},e.prototype.addPrefetched=function(t,e){return this.set(this.parse(t,e),e)},e.prototype.addFastlyKey=function(t,e){var i,n,r,s,a,l;for(r=(null!=(a=t.get("Surrogate-Key"))?a.split(" "):void 0)||[],l=e.split(" "),i=0,s=l.length;s>i;i++)n=l[i],r.push(n);return t.set("Surrogate-Key",o.uniq(r).join(" "))},e.prototype.getPrefetched=function(t){var e;return e={type:"model",name:t||o.result(this,"prefetch"),signature:this.signature||this.id},(this.prefetched=s.getPrefetched(e))?this.addPrefetched(this.prefetched.resource):void 0},e.prototype.setPrefetched=function(t,e){var i,n;return i={type:"model",name:e||o.result(this,"prefetch"),signature:this.signature||this.id,resource:this._resource},(n=this._headers["surrogate-key"])&&this.addFastlyKey(t,n),s.setPrefetched(t,i)},e.prototype.addHeaders=function(t,e){var i,n;return null==e&&(e={}),i={},(n=t.get("Fastly-Client-IP"))&&(i["Fastly-Client-IP"]=n),this.requestHeaders=o.deepExtend(i,e)},e.prototype.hasAdvertising=function(){return!this.get("advertising_disabled")},e.prototype.dispose=function(){return this.disposed?void 0:(this.stopListening(),this.off(),this.disposed=!0)},e}(n.Model)}).call(this,t(9))},{42:42,50:50,78:78,9:9,backbone:"backbone"}],17:[function(t,e,i){(function(i){var n,r,o,s,a,l,u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty,h=[].slice;o=t(78),l=t(12),n=t(13),s=t(73),a=t(50),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.paginationConfig={useLastId:!1,per_page:a.getPaginationConfig(s.get("device")).per_page},e.prototype.initialize=function(){return i.browser||this.restorePaginationDefaults(),this.updatePaginationConfig(),this.paginationReset(),e.__super__.initialize.apply(this,arguments)},e.prototype.url=function(){var t,e,i,n;return n="",null!=(t=o.result(this,"baseUrl"))&&(n+=t),n+=~n.indexOf("?")?"&":"?",i={per_page:this.pagination.per_page},this.paginationConfig.useLastId?(e=this.last())&&(i.last=e.id):i.page=this.pagination.page,n+l.stringify(i)},e.prototype.fetch=function(t){return null==t&&(t={}),null==t.remove&&(t.remove=!1),e.__super__.fetch.call(this,t)},e.prototype.parse=function(t){var e,i;return e=t.collection||t,i=Math.ceil((null!=e?e.length:void 0)/this.paginationConfig.per_page)||1,t&&null!=t.total&&(this.pagination.total=t.total),e&&e.length&&"all"!==this.paginationConfig.per_page&&this.length+e.length!==this.pagination.total||(this.pagination.last=!0),this.pagination.page+=i,e},e.prototype.reset=function(){return e.__super__.reset.apply(this,arguments),this.paginationReset()},e.prototype.restorePaginationDefaults=function(){return this.constructor.paginationConfig.per_page=a.getPaginationConfig(this.env.device).per_page},e.prototype.updatePaginationConfig=function(){var t;return t=a.getAllPropertyVersions(this,"paginationConfig"),this.paginationConfig=o.extend.apply(o,[{},this.constructor.paginationConfig].concat(h.call(t)))},e.prototype.paginationReset=function(){return this.pagination={page:1,per_page:this.paginationConfig.per_page,last:!1}},e.prototype.setPagination=function(t){var e,i,n,r,s;for(null==t&&(t={}),e={},s=["page","per_page"],i=0,r=s.length;r>i;i++)n=s[i],t[n]&&(e[n]=parseInt(t[n],10));return o.extend(this.paginationConfig,e),o.extend(this.pagination,e),this.pagination},e}(n)}).call(this,t(9))},{12:12,13:13,50:50,73:73,78:78,9:9}],18:[function(t,e,i){var n,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}};o=t(78),n=t("backbone"),s=t(6),r=function(){function t(){this.whenLoaded=a(this.whenLoaded,this),this.whenReady=a(this.whenReady,this),this.whenAvailable=a(this.whenAvailable,this),this.dequeue=a(this.dequeue,this),o.extend(this,n.Events),this.queue=[],this.log("initialized")}return t.prototype.trace=s.debug,t.prototype.log=n.Log.log,t.prototype.dequeue=function(){var t,e,i,n;if(this.queue.length){for(this.log("dequeueing"),n=this.queue,e=0,i=n.length;i>e;e++)(t=n[e])();return this.queue.length=0}},t.prototype.whenCondition=function(t,e){var i;return i="function"==typeof t?t():t,i?e():this.queue.push(e)},t.prototype.whenAvailable=function(t){return this.whenCondition(this.available,t)},t.prototype.whenReady=function(t){return this.whenCondition(this.ready,t)},t.prototype.whenLoaded=function(t){return this.whenCondition(this.loaded,t)},t}(),e.exports=r},{6:6,78:78,backbone:"backbone"}],19:[function(t,e,i){(function(i){var n,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].slice,h=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("backbone"),o=t(6),s=t(42),e.exports=r=function(t){function e(){return this.handleLocalRoute=a(this.handleLocalRoute,this),e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.logPrefix="[app.base.router]:",e.prototype._historyLimit=10,e.prototype.currentRoute=null,e.prototype.history=[],e.prototype.initialize=function(){return this.ctors=this.controllers||{},this.controllers={},this.$win=$(i.window),this.$doc=$(i.document),s.on("navigate",this.routeTo,this),this.$doc.on("click",".app-route",this.handleLocalRoute),this.$doc.on("click","a[data-route]",this.handleLocalRoute),"function"==typeof this.addRoutes&&this.addRoutes(),e.__super__.initialize.apply(this,arguments),this.log("initialized")},e.prototype.before=function(t,e){return this.currentRoute=n.history.fragment.split("?")[0],this.history[0]===this.currentRoute?!1:(this._manageHistory(),this._cleanup(this.controllers),this.$win.scrollTop(0),s.trigger("route:before",this.currentRoute,t,e,this.history))},e.prototype.after=function(t,e){return s.trigger("route:after",this.currentRoute,t,e,this.history)},e.prototype.addRoute=function(){var t,e,i,n,r,o;return o=arguments[0],e=arguments[1],t=3<=arguments.length?c.call(arguments,2):[],"string"==typeof e&&~e.indexOf("#")?(r=e.split("#"),n=r[0],i=r[1],this.route(o,e,function(t){return function(){var e,r;if(e=1<=arguments.length?c.call(arguments,0):[],!t.ctors[n])throw"Please load "+n+" controller";return t.controllers[n]=new t.ctors[n],"function"==typeof(r=t.controllers[n])[i]?r[i].apply(r,e):void 0}}(this))):void 0},e.prototype.routeTo=function(t,e){return null==e&&(e={}),null==e.trigger&&(e.trigger=!0),t=t.replace(o.base_url,""),this.log("routing to "+t,e),this.navigate(t,e)},e.prototype.handleLocalRoute=function(t){var e,i,n;return i="a"===t.currentTarget.tagName.toLowerCase(),i&&(t.ctrlKey||t.metaKey)?void 0:(e=$(t.currentTarget),i?(t.preventDefault(),n=e.attr("href")):n=e.attr("data-route"),n?this.routeTo(n.replace(o.base_url,"")):void 0)},e.prototype.dispose=function(){return this.disposed?void 0:(this._cleanup(this.controllers),this.$doc.off("click",".app-route",this.handleLocalRoute),delete this.$doc,this.disposed=!0,this.log("disposed"))},e.prototype._cleanup=function(t,e){var i,n,r;null==t&&(t={}),null==e&&(e=[]),r=[];for(n in t)h.call(e,n)>=0?r.push(void 0):("function"==typeof(i=t[n]).dispose&&i.dispose(),r.push(delete t[n]));

return r},e.prototype._manageHistory=function(){return this.history.unshift(this.currentRoute),this.history.length>this._historyLimit?this.history.length=this._historyLimit:void 0},e}(n.Router)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{42:42,6:6,backbone:"backbone"}],20:[function(t,e,i){var n,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(17),o=t(78),s=null,e.exports=r=function(e){function i(){return this.addItem=a(this.addItem,this),i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.paginationConfig={useLastId:!0},i.prototype.socketChannel=null,i.prototype.streamEvent=null,i.prototype.initialize=function(){return s=t(40),this.channel=null,i.__super__.initialize.apply(this,arguments)},i.prototype.socketStart=function(){return s.subscribe(o.result(this,"socketChannel"),o.result(this,"streamEvent"),this.addItem)},i.prototype.socketStop=function(){return s.unsubscribe(o.result(this,"socketChannel"),o.result(this,"streamEvent"),this.addItem)},i.prototype.addItem=function(t,e){var i;return null==e&&(e={}),this.get(t.id)?null:(this.pagination.total++,i=this.add(t,{at:0}),e.silent||this.trigger(e.event||"streamed",i),i)},i.prototype.dispose=function(){return this.disposed?void 0:(this.socketStop(),i.__super__.dispose.apply(this,arguments))},i}(n)},{17:17,40:40,78:78}],21:[function(t,e,i){var n,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("backbone"),o=t(78),s=t(50),a=t(42),e.exports=r=function(t){function e(){return this._proxyAnchorNavigate=l(this._proxyAnchorNavigate,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.logPrefix="[app.views.base.view]:",e.prototype.autoRender=!1,e.prototype.autoAttach=!0,e.prototype.container=null,e.prototype.containerMethod="append",e.prototype.initialize=function(t){var i;return this.options=t,this.options&&o.extend(this,o.pick(this.options,["autoAttach","autoRender","container","containerMethod"])),i=this.render,this.render=function(t){return function(){return t.disposed?!1:(i.apply(t,arguments),t.autoAttach&&t.attach.apply(t,arguments),t)}}(this),this.subviews=[],this.subviewsByName={},this.xhrs={},this.container&&(this.$container=$(this.container)),this.prerenderSignature&&this.checkPrerendered(),e.__super__.initialize.call(this,this.options),this.elements&&!this.autoRender&&this.refreshElements(),this.injectOptions(),this.autoRender&&this.render(),this.log("initialized")},e.prototype.injectOptions=function(){var t,e,i,n,r,a;if((e=s.getAllPropertyVersions(this,"inject")).length){for(r=o.union.apply(o,e),a=[],t=0,n=r.length;n>t;t++)i=r[t],a.push(this[i]=this.options[i]);return a}},e.prototype._proxyAnchorNavigate=function(t){var e,i,n;return t.preventDefault(),e=$(t.currentTarget),$(t.target).is("a")||t._proxy?void 0:(i=o.pick(t,["ctrlKey","altKey","metaKey"]),i._proxy=!0,n=$.Event("click",i),e.find("a:first").trigger(n))},e.prototype.checkPrerendered=function(){var t,e;return t=this.tagName?this.tagName:"div",this.id&&(t+="#"+this.id),this.className&&(t+="."+this.className.replace(" ",".")),t+='[data-prerendered="'+this.prerenderSignature+'"]',(e=$(t)).length?(this.setElement(e),this.isPrerendered=!0,this.log("using prerendered element",e)):void 0},e.prototype.refreshElements=function(){var t,e,i,n,r,o,a;if((e=s.getAllPropertyVersions(this,"elements")).length){for(o=[],i=0,r=e.length;r>i;i++)t=e[i],o.push(function(){var e;e=[];for(n in t)a=t[n],e.push(this[a]=this.$(n));return e}.call(this));return o}},e.prototype.subview=function(t,e){return t&&e?(this.removeSubview(t),this.subviews.push(e),this.subviewsByName[t]=e,e):t?this.subviewsByName[t]:void 0},e.prototype.removeSubview=function(t){var e,i,n,r,s,a;if(t){if("string"==typeof t)i=t,a=this.subviewsByName[i];else{a=t,s=this.subviewsByName;for(n in s)if(r=s[n],r===a){i=n;break}}if(i&&a&&a.dispose)return a.dispose(),e=o.indexOf(this.subviews,a),-1!==e&&this.subviews.splice(e,1),delete this.subviewsByName[i]}},e.prototype.getTemplateData=function(){return this.model?this.model.toJSON():this.collection?{items:this.collection.toJSON()}:{}},e.prototype.render=function(){var t;return this.disposed?!1:("function"!=typeof this.template||this.isPrerendered||(t=this.template(this.getTemplateData()),this.$el.html(t)),this.elements&&this.refreshElements(),this)},e.prototype.attach=function(){return this.container&&!this.isPrerendered?($(this.container)[this.containerMethod](this.$el),this.autoAttach=!1):void 0},e.prototype.dispose=function(){var t,e,i,n,r,o,s,a,l,u,c;if(!this.disposed){for(this.disposed=!0,a=this.subviews,t=0,i=a.length;i>t;t++)u=a[t],"function"==typeof u.dispose&&u.dispose();this.off(),this.undelegateEvents(),this.keepElement?this.stopListening():this.remove(),l=this.xhrs;for(r in l)c=l[r],4!==c.readyState&&"function"==typeof c.abort&&c.abort();for(s=["el","$el","container","$container","options","model","collection","subviews","subviewsByName","xhrs"],e=0,n=s.length;n>e;e++)o=s[e],delete this[o];return this.log("disposed")}},e}(n.View)},{42:42,50:50,78:78,backbone:"backbone"}],22:[function(t,e,i){var n,r,o,s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(14),o=t(45),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.logPrefix="[app.controllers.error_controller]:",e.prototype.index=function(){return this.view=new o,this.log("initialized")},e}(n)},{14:14,45:45}],23:[function(t,e,i){(function(i){var n,r,o,s,a,l,u,c,h,p;for(h=t(76),i._=t(78),i.Backbone=t("backbone"),o=t(6),s=t(73),a=t(50),u=t(51),n=t(57),t(55),t(56),t(52),t(53),u.defaults=s.get("device"),h.config=o,h.env=s.toJSON(),h._=_,h.helpers=a,h.resize=u,r=["Collection","Model","View","Router"],l=0,p=r.length;p>l;l++)c=r[l],Backbone[c].prototype.trace=o.debug;e.exports={$:$,_:_,Backbone:Backbone,config:o,env:s,helpers:a,imageResizer:u,MBP:n,jade:h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{50:50,51:51,52:52,53:53,55:55,56:56,57:57,6:6,73:73,76:76,78:78,backbone:"backbone"}],24:[function(t,e,i){(function(i){var n,r,o,s,a,l,u,c,h,p,d,f,g,m=function(t,e){return function(){return t.apply(e,arguments)}};f=t(23),n=f.$,a=f._,r=f.Backbone,l=f.config,u=f.env,c=f.helpers,h=f.imageResizer,s=f.MBP,p=f.jade,d=t(37),g=t(42),n.os.ios&&s.preventZoom(),l.debug&&(i._testify=function(t){return console.warn(i.TEST=t)}),n.ajaxSetup({cache:!0,crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0}}),o=function(){function e(){this._domReady=m(this._domReady,this),this._proxySuccess=m(this._proxySuccess,this)}return e.prototype.initialize=function(){var e;return t(32),this.loadModules(),e=n("html"),e.removeClass("no-js").addClass("js"),"ontouchstart"in document.documentElement&&window.DocumentTouch&&document instanceof DocumentTouch&&e.addClass("touchevents"),r.history.start({pushState:!0,hashChange:!1}),n(document).ajaxError(function(t,e,i){var n,r,o,s;if(404!==e.status)return s=i.url,o=i.type,r=e.status+": "+o+" "+s,n=s.match(/\/v4\/conversations/)&&"GET"===o?"cant-load-comments":s.match(/\/v4\/\S+\/\d+\/conversations/)?"GET"===o?"cant-load-comments":"POST"===o?"cant-submit-comment":void 0:!s.match(/v3\/users\/\d+\/subscriptions/)||"PUT"!==o&&"DELETE"!==o?s.match(/\/v4\/tags\/[a-z\d\-]+\/trending/)&&"GET"===o?"cant-load-trending-stories":void 0:"cant-follow",n||(n="ajax-request-failed"),g.trigger("track:error",{action:n,label:r})})},e.prototype._proxySuccess=function(){return n.ajaxSetup({xhr:d.xhr}),this.initialize()},e.prototype._domReady=function(){return n.support.cors=!0,d.start({success:this._proxySuccess})},e.prototype.start=function(t){return this.router=t,n.support.cors?this.initialize():n(this._domReady)},e.prototype.loadModules=function(){},e}(),e.exports=new o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{23:23,32:32,37:37,42:42}],25:[function(t,e,i){var n,r,o,s,a;o=t(6),s=t(73),a=t(42),r=t(78),n={initializeAd:function(e,i,n){var r,a,l,u,c;return null==n&&(n=!1),a=n===!1?i:i+"-"+n,u=this._adsMixinHelpers,o.libraries.dfp&&!s.get("device").robot&&(r=u.getAdConfig(i),r.enabled!==!1)?u.isWeirdContent.bind(this)()?u.initializeSexyAd.bind(this)(e,i):(l=t(31),c=t(69),l.whenAvailable(function(t){return function(){if(l.addSlot(i,r,a),r.name=i,r.id=a,e.html(c(r)),!t.getAdsTargeting)throw new Error("getAdsTargeting method is not defined");return l.setTargeting(t.getAdsTargeting()),t.disposed?void 0:l.show(a)}}(this))):void 0},_adsMixinHelpers:{isWeirdContent:function(){var t,e,i,n;return"story"===(null!=(t=this.model)?t.get("legacy_type"):void 0)?!0:(i=this.getAdsTargeting(),n=(null!=(e=i.tags)?e.join(" "):void 0)||"",!!n.match(/sex/))},getAdConfig:function(t){var e;return e=s.get("device").type.match("mobile")?o.gads.mobile:o.gads.desktop,e[t]?r.clone(e[t]):{}},initializeSexyAd:function(e,i){var n;return n=function(){switch(i){case"MediumRectangle_300x250":return t(58);case"MediumRectangle_300x250_BTF_Mobile":return t(59);case"StickyAd_300x250":return t(60);case"HalfPageAd_300x600":return t(61);case"Leaderboard_728x90":return t(62)}}(),this.log("SexyAd "+i+" is loaded"),e.html(n),e.removeClass("is-hidden")}}},e.exports=n},{31:31,42:42,58:58,59:59,6:6,60:60,61:61,62:62,69:69,73:73,78:78}],26:[function(t,e,i){var n,r,o,s;o=t(69),s=t(41),r=t(73),n={__statesClasses:["user-is-logged-in","can-access-user-tool","can-access-post-form","can-access-tower","can-access-q","can-autopromote","can-manage-tags"],__refreshState:function(){var t;return this.$el.removeClass(this.__statesClasses.join(" ")),t=[],s.available()&&t.push("user-is-logged-in"),_(s.get("flags")).each(function(e){return t.push("can-"+e)}),this.$el.addClass(t.join(" ")),"function"==typeof this.appStateChanged?this.appStateChanged(s):void 0},initializeAppState:function(){return s.on("change",_.bind(this.__refreshState,this)),this.__refreshState()}},e.exports=n},{41:41,69:69,73:73}],27:[function(t,e,i){var n,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t(20),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.paginationConfig={per_page:10},e.prototype.baseUrl=function(){return this.api("stream_public")+(this.filter?"?type="+this.filter:"")},e.prototype.socketChannel="community_ticker",e.prototype.streamEvent="tick",e.prototype.parse=function(t){return t&&t.length||(this.pagination.last=!0),this.pagination.page+=Math.ceil((null!=t?t.length:void 0)/this.paginationConfig.per_page)||1,_.uniq(t,!1,function(t){return t.agent.id})},e}(r)},{20:20}],28:[function(t,e,i){var n,r,o,s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=t(20),o=t(39),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.paginationConfig={per_page:20},e.prototype.baseUrl=function(){return this.api("stream_personal",o.get("user_id"))},e.prototype.socketChannel=function(){return""+o.get("user_id")},e.prototype.streamEvent="tick",e.prototype.parse=function(t){return t&&t.length||(this.pagination.last=!0),this.pagination.page+=Math.ceil((null!=t?t.length:void 0)/this.paginationConfig.per_page)||1,_.map(t,function(t){return function(e){return e.subject.body&&(e.subject.plaintext_body=t.bodySanitizer(e.subject.body)),e}}(this)),t},e.prototype.bodySanitizer=function(t){var e,i,n;return e=/@\[([a-zA-Z\ -\.]+)\]\(id:(\d+)\)/g,n=/\[+yt:(.*)\]+/gi,i=/\[\[vimeo:(\d*)\]\]/i,t=t.replace(e,function(t,e,i){return e}),t=t.replace(n,"[YouTube]"),t=t.replace(i,"[Vimeo]")},e}(r)},{20:20,39:39}],29:[function(t,e,i){var n,r,o,s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(17),o=t(78),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.baseUrl=function(){return this.api("list",{list_id:this.signature})},e.prototype.perPage=4,e.prototype.restorePaginationDefaults=function(){return this.constructor.paginationConfig.per_page=this.perPage},e}(n)},{17:17,78:78}],30:[function(t,e,i){var n,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(17),e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.paginationConfig={per_page:8},e.prototype.baseUrl=function(){return this.api("user_feed_collection",{userId:this.userId})},e}(n)},{17:17}],31:[function(t,e,i){var n,r,o,s,a,l,u,c=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function i(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=t(78),r=t(18),l=t(39),s=t(6),u=t(42),a=t(73),n=function(t){function e(){this._checkIfLoaded=c(this._checkIfLoaded,this),s.libraries.dfp&&(this.gads=a.get("device").type.match("mobile")?s.gads.mobile:s.gads.desktop,e.__super__.constructor.apply(this,arguments),this.initGAds())}return h(e,t),e.prototype.logPrefix="[app.modules.ads_module]:",e.prototype.slots={},e.prototype._loadCheckInterval=10,e.prototype.initGAds=function(){var t;return null==window.googletag&&(window.googletag={}),null==(t=window.googletag).cmd&&(t.cmd=[]),this._checkIfLoaded(),googletag.cmd.push(function(t){return function(){var e,i,n,r;n=t.gads;for(i in n)e=n[i],e.enabled&&t.addSlot(i,e);return googletag.pubads().addEventListener("slotRenderEnded",function(t){var e;return e=t.slot.getSlotElementId(),$("#"+e).parent().addClass("show")}),googletag.pubads().addEventListener("impressionViewable",function(t){return u.trigger("adVisibleInDOM")}),googletag.pubads().disableInitialLoad(),googletag.pubads().collapseEmptyDivs(!0),r="production"===s.env&&window.location.href.match(/http:\/\/pre/)?"pre":s.env,googletag.pubads().setTargeting("stage",r),googletag.enableServices()}}(this))},e.prototype.addSlot=function(t,e,i){return null==i&&(i=t),null==this.slots[i]?null==i?this.log("Ad name / adId is not valid:",i):(this.slots[i]=googletag.defineSlot("/104938865/"+t,[e.width,e.height],"div-gpt-ad-"+i),this.slots[i].addService(googletag.pubads())):this.log("Ad was already added:",i)},e.prototype._checkIfLoaded=function(){return this.available()?this.dequeue():setTimeout(this._checkIfLoaded,this._loadCheckInterval)},e.prototype.setTargeting=function(t){return this.log("Ad targeting:",t),googletag.cmd.push(function(){var e,i,n,r;for(e in t)r=t[e],googletag.pubads().setTargeting(e,r);return(n=null!=(i=l.get("tracking"))?i.utm_source:void 0)?googletag.pubads().setTargeting("utm_source",n):void 0})},e.prototype.available=function(){return googletag.pubadsReady},e.prototype.get=function(t){return this.gads[t]?o.clone(this.gads[t]):{}},e.prototype.show=function(t){return googletag.cmd.push(function(e){return function(){return googletag.display("div-gpt-ad-"+t),googletag.pubads().refresh([e.slots[t]])}}(this)),this.log("showing ad named: "+t)},e}(r),e.exports=new n},{18:18,39:39,42:42,6:6,73:73,78:78}],32:[function(t,e,i){(function(i){var n,r,o,s,a,l,u,c,h=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function i(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(78),r=t(21),l=t(39),c=t(42),u=t(41),s=t(6),a=t(50),n=function(t){function e(){return this.dequeue=h(this.dequeue,this),this.trackedRedirect=h(this.trackedRedirect,this),e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.logPrefix="[app.modules.analytics_module]:",e.prototype.el=document.body,e.prototype.values=s.ganalytics.values,e.prototype.pageviewBlockExpire=5e3,e.prototype.initialize=function(){var t;return e.__super__.initialize.apply(this,arguments),u.available()?(ga("set","&uid",u.id),ga("set","dimension1","loggedin")):ga("set","dimension1","loggedout"),i.window.devicePixelRatio&&ga("set","dimension2",""+i.window.devicePixelRatio),this.callbacksQueue=[],c.on("track:account",this.trackAccount,this),c.on("track:engagement",this.trackEngagement,this),c.on("track:navigate",this.trackNavigate,this),c.on("track:pageview",this.trackPageview,this),c.on("track:expansion",this.trackPageExpansion,this),c.on("track:social",this.trackSocial,this),c.on("track:like",this.trackLike,this),c.on("track:click",this.trackClick,this),c.on("track:error",this.trackError,this),c.on("track:experiment",this.trackExperiment,this),c.on("route:after",this.trackDispatch,this),"story"===(t=s.codename)&&c.on("route:after",this.adjustLTParams,this),c.on("subscriptions:create",this.subscriptionsCreate,this),c.on("subscriptions:destroy",this.subscriptionsDestroy,this)},e.prototype.events={"click a":"trackClick"},e.prototype._getTrackingUrl=function(){var t,e,n,r;return r=i.window.location.href.split("#")[0],n=r.split("?"),t=n[0],e=n[1],e?t+"?"+e.replace(/&?lt_source=[^&]+/,""):t},e.prototype.gaDebugLog=function(t){return("undefined"!=typeof localStorage&&null!==localStorage?localStorage.getItem("ga_debug"):void 0)?console.log("%c [GATracking]: "+t,"background: #FFCFCF; color: #E82E2F; font-weight:bold;"):void 0},e.prototype.subscriptionsCreate=function(){return"undefined"!=typeof LT&&null!==LT?LT.trackEvent("subscribe"):void 0},e.prototype.subscriptionsDestroy=function(){return"undefined"!=typeof LT&&null!==LT?LT.trackEvent("unsubscribe"):void 0},e.prototype.trackAccount=function(t){var e,i,n;if(e=t.action,n=t.label,i=t.callback,"login"!==e&&"create"!==e)throw new Error('Account action "'+e+'" is not accepted.');return this.trackEvent("account",e,n,i)},e.prototype.trackEngagement=function(t){var e,i,n,r;if(e=t.action,n=t.label,i=t.callback,r=t.redirect,!e)throw new Error("Provide event action");return i=function(){return r?window.location=r:void 0},this.trackEvent("engagement",e,n,i)},e.prototype.trackNavigate=function(t){var e,i,n,r;return n=t.to,r=t.via,e=t.callback,i=t.redirect,e=function(){return i?window.location=i:void 0},this.trackEvent("navigate",n,r,e)},e.prototype.trackPageview=function(t){return ga("send","pageview",t),this.gaDebugLog("Pageview "+t)},e.prototype.trackPageExpansion=function(t){var e;return e="continuous-reading",this.trackEvent("engagement",t.eventAction,e),this.gaDebugLog("Article expansion: action: "+t.eventAction+", label: "+e)},e.prototype.trackSocial=function(t,e,i){return null==e&&(e="share"),this.trackEvent("social",e,t),ga("send","social",t,e,i),this.gaDebugLog("Social network: "+t+", action: "+e+", target: "+i)},e.prototype.trackLike=function(t,e){return null==t&&(t="like"),this.trackEvent("engagement",t,e),this.gaDebugLog("Liked article: action: "+t+", label: "+e)},e.prototype.trackError=function(t){var e,i;return e=t.action,i=t.label,this.trackEvent("error",e,i)},e.prototype.trackDispatch=function(t,e,i,n){return this.history=n,a.isTypeOf(["posts","quizzes","reviews"],t)?void 0:this.trackPageview(this.buildUrl("/"+t))},e.prototype.adjustLTParams=function(){return s.libraries.liveTracking?c.trigger("navigate",LT.adjustLTParams(),{replace:!0,trigger:!1}):void 0},e.prototype.trackedRedirect=function(t){var e;return e=o.once(function(e){return function(){return window.location=t}}(this)),this.callbacksQueue.push(e),setTimeout(e,1e3)},e.prototype.dequeue=function(){return setTimeout(function(t){return function(){return o.each(t.callbacksQueue,function(e){return o.isFunction(e)&&e(),t.callbacksQueue.pop()})}}(this),100)},e.prototype.trackClick=function(t,e){var i,n,r,o,s,a,l,u,h,p,d;if(null==e&&(e={}),t.preventDefault(),a=t.metaKey||t.ctrlKey,o=e.anchorTag,r=o||t.currentTarget,i=$(r),d=i.attr("href")||i.attr("data-href"),(h=i.attr("data-track"))&&(u=h.split(":"),s=u[0],n=u[1],l=u[2]),d&&(a||"_blank"===i.attr("target")?window.open(d):i.hasClass("app-route")||i.attr("data-route")||this.trackedRedirect(d)),h){if(this.trackEvent(s,n,l),o)return c.trigger("navigate",o.attr("href"))}else if(d)return p=d.match("moviepilot.com")?"internal_link":"external_link",this.trackEvent("navigate",p,d)},e.prototype.trackExperiment=function(t){var e,i,n;return e=t.action,n=t.label,i=t.callback,this.trackEvent("experiment",e,n,i)},e.prototype.trackEvent=function(t,e,i,n){var r;if(i=(i||"").replace(/undefined/,""),("navigate"===t||"engagement"===t)&&(i=this.globalContext?this.globalContext+":"+i:i),!t||!e)throw new Error("Parameters missing");if("development"===s.env&&!i)throw new Error("Event label is missing for event: "+e+"#"+t);return n&&this.callbacksQueue.push(n),ga("send","event",t,e,i,null!=(r=this.values[t])?r[e]:void 0,{hitCallback:this.dequeue}),this.gaDebugLog("Event: category:"+t+", action:"+e+", label:"+i)},e.prototype.buildUrl=function(t){return-1===t.indexOf(location.search)&&(t+=location.search),t},e.prototype.dispose=function(){var t,e,i;if(!this.disposed){c.off("track:account",this.trackAccount,this),c.off("track:engagement",this.trackEngagement,this),c.off("track:pageview",this.trackPageview,this),c.off("track:social",this.trackSocial,this),c.off("track:experiment",this.track),c.off("track:like",this.trackLike,this),c.off("track:click",this.trackClick,this),c.off("track:error",this.trackError,this),c.off("route:after",this.trackDispatch,this),c.off("route:after",this.adjustLTParams,this),c.off("subscriptions:create",this.subscriptionsCreate,this),c.off("subscriptions:destroy",this.subscriptionsDestroy,this),this.stopListening(),this.undelegateEvents(),e=this.xhrs;for(t in e)i=e[t],4!==i.readyState&&"function"==typeof i.abort&&i.abort();return delete this.xhrs}},e}(r),e.exports=new n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{21:21,39:39,41:41,42:42,50:50,6:6,78:78}],33:[function(t,e,i){(function(i){var n,r,o,s,a,l,u,c,h=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function i(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(78),r=t(18),u=t(43),l=t(39),c=t(42),s=t(6),a=t(73),n=function(e){function n(){this._handleGraphEdgeCreate=h(this._handleGraphEdgeCreate,this),this.initComplete=h(this.initComplete,this),this._checkIfLoaded=h(this._checkIfLoaded,this),this.isTokenActive=!1,Date.now()-l.get("facebook:updated")<36e5&&(this.permissions=l.get("facebook:permissions")),n.__super__.constructor.apply(this,arguments),s.libraries.facebook&&(this.available()?this.initializeAPI():u.getScript({url:"//connect.facebook.net/en_US/sdk.js",success:this._checkIfLoaded}),this.permissions||this.checkPermissions(),c.on("facebook:parse",this._parse,this))}return p(n,e),n.prototype.logPrefix="[app.modules.facebook_module]:",n.prototype._loadCheckTimeout=100,n.prototype._checkIfLoaded=function(){return this.available()?this.initializeAPI():setTimeout(this._checkIfLoaded,this._loadCheckTimeout)},n.prototype.initializeAPI=function(){return i.window.FB.init({appId:s.facebook.id,frictionlessRequests:!0,status:!0,xfbml:!1,cookie:!0,version:"v2.2"}),i.window.FB.Event.subscribe("edge.create",this._handleGraphEdgeCreate),i.window.FB.Event.subscribe("comment.create",this._trackComment),i.window.FB.getLoginStatus(this.initComplete),this.log("ready")},n.prototype.initComplete=function(e){var i;return this.dequeue(),e.authResponse?(this.ready=!0,this.isTokenActive=!0):(i=t(41),this.permissions=null,l.unset("facebook:permissions"),i.available()&&"facebook"===i.get("provider")?c.trigger("facebook:revoked"):void 0)},n.prototype.available=function(){return null!=i.window.FB},n.prototype.reset=function(){return this.whenAvailable(function(){var t;return null!=(t=i.window.FB)?t.getLoginStatus(null,!0):void 0})},n.prototype._parse=function(t){return this.whenAvailable(function(){return i.window.FB.XFBML.parse(t[0],function(){return c.trigger("facebook:didParse")})})},n.prototype._handleGraphEdgeCreate=function(t,e){return c.trigger("track:social","facebook","like",t)},n.prototype._trackComment=function(){return c.trigger("track:engagement",{action:"comment",label:"facebook"})},n.prototype.checkPermissions=function(t){var e;return this.permissions?"function"==typeof t?t(null,this.permissions):void 0:(e=function(e){return function(i){var n;return n=(null!=i?i.error:void 0)||"Couldn't fetch permissions",!i||i.error?"function"==typeof t?t(n,null):void 0:(l.set("facebook:permissions",e.permissions=i.data[0]),l.set("facebook:updated",Date.now()),"function"==typeof t?t(null,e.permissions):void 0)}}(this),this.whenAvailable(function(){return i.window.FB.api("/me/permissions",e)}),this.log("requesting permissions status"))},n.prototype.requestPermissions=function(t,e){var n;return n=function(t){var i;return i=(null!=t?t.error:void 0)||"Couldn't request permissions",!t||t.error?"function"==typeof e?e(i,null):void 0:(t.authResponse&&(this.permissions=null,l.unset("facebook:permissions")),e(null,t.authResponse||null))},this.whenAvailable(function(){return i.window.FB.login(n,{scope:t.join(","),auth_type:"rerequest"})}),this.log("requesting additional permissions",t)},n.prototype.ensurePublishPermissions=function(t){var e;return e=function(e){return function(e,i){return"function"==typeof t?t(e,{state:i&&!e}):void 0}}(this),this.checkPermissions(function(t){return function(i,n){return i||n.publish_actions?e(i,!0):t.requestPermissions(["publish_actions"],e)}}(this))},n.prototype._postToGraph=function(e,n,r){var o,s;return s=t(41),s.allowsFB()?(o=function(t){return function(){return t.log("posting to graph: "+e),i.window.FB.api(e,"post",n,function(i){return"function"==typeof r&&r(i),t.log("posted to "+e+" successfully",n)})}}(this),this.whenAvailable(o)):void 0},n.prototype.publishRead=function(t){return t="http://moviepilot.com"+t,this._postToGraph("/me/news.reads",{article:t})},n.prototype.publishPoll=function(t){return t.poll="http://moviepilot.com"+t.poll,this._postToGraph("/me/moviepilot-com:answer",t)},n.prototype.publishWantToWatch=function(t,e){var i,n;return i={},t="http://moviepilot.com"+t,n="movie"===e?"movie":"tv_show",i[n]=t,this._postToGraph("/me/video.wants_to_watch",i)},n.prototype.fetchAccessToken=function(t,e){var n;return null==e&&(e=!1),n=function(r){return r.authResponse?"function"==typeof t.success?t.success(r.authResponse.accessToken):void 0:e?"function"==typeof t.error?t.error(r.status):void 0:(e=!0,i.window.FB.login(n,{scope:s.facebook.permissions}))},i.window.FB.getLoginStatus(n)},n}(r),e.exports=new n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{18:18,39:39,41:41,42:42,43:43,6:6,73:73,78:78}],34:[function(t,e,i){var n,r,o,s,a,l,u,c,h,p,d,f,g,m,v=function(t,e){return function(){return t.apply(e,arguments)}},y=function(t,e){function i(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},b={}.hasOwnProperty;r=t(21),f=t(41),p=t(36),d=t(39),g=t(43),c=t(50),a=t(32),u=t(73),l=t(6),m=t(42),s=t(26),o=t(25),h=t(51),n=function(e){function i(){return this.clearNotificationsUpdate=v(this.clearNotificationsUpdate,this),this.startNotificationsUpdate=v(this.startNotificationsUpdate,this),this.setNotificationsUpdate=v(this.setNotificationsUpdate,this),this.updateNotificationsSuccess=v(this.updateNotificationsSuccess,this),this.checkState=v(this.checkState,this),this.showOverlayAd=v(this.showOverlayAd,this),this.toggleEditMenu=v(this.toggleEditMenu,this),this.toggleUserMenu=v(this.toggleUserMenu,this),this.checkKeyPress=v(this.checkKeyPress,this),i.__super__.constructor.apply(this,arguments)}return y(i,e),i.prototype.logPrefix="[app.modules.header_module]:",i.prototype.el=".l-header",_.extend(i.prototype,s,o),i.prototype._notificationsTimeout=l.notifications_expires,i.prototype._nTid=null,i.prototype.elements={".l-h-avatar":"$userAvatar",".l-h-profile_link":"$profileLink",".l-h-edit_button":"$editButton",".l-h-em-edit":"$editLink",".l-h-create_mobile_post":"$mobileCreateLink",".l-h-edit_mobile_post":"$mobileEditLink",".l-h-em-tower":"$towerLink",".l-h-em-promote":"$promoteLink",".l-h-login":"$loginBtn"},i.prototype.events={"click .l-h-menu":"toggleMainMenu","click .l-h-profile":"toggleUserMenu","click .l-h-edit_button":"toggleEditMenu","click .l-h-search":"toggleSearch","click .l-h-um-settings":"openSettings","click .l-h-um-notifications":"openNotifications","click .l-h-em-promote":"openPromotion","click .l-h-login":"loginBtnClicked","click .l-h-create_mobile_post":"goToMobilePost"},i.prototype.initialize=function(){var e,n;return i.__super__.initialize.apply(this,arguments),this.initializeAppState(),this.getAdsTargeting=function(){return[]},c.isTakeoverActive()?this.initializeAd($(".takeover-ad"),"Takeover"):this.initializeAd($(".overlay_ad_ancor"),"MobileOverlay"),this.search=t(38),this.$win=$(window),this.$doc=$(document),e=0,this.$scrollEl=$(window),n=_.throttle(function(t){return function(i){var n;return t.$stickySidebars=$(".b-sticky_sidebar, .p-h-s-community_wrapper"),n=t.$scrollEl.scrollTop(),0>n||0>e?void 0:(n>e&&n>70?(t.$el.addClass("l-h-hidden"),t.$stickySidebars.each(function(){return $(this).addClass("nopadding")})):-20>n-e&&(t.$el.removeClass("l-h-hidden"),t.$stickySidebars.each(function(){return $(this).removeClass("nopadding")})),e=n)}}(this),100),g.isMobile()||this.$scrollEl.on("scroll",n),this.notifications=d.get("notifications"),this.notifications&&this.setNotifications(this.notifications),this.checkState(),m.on("user:loaded",this.checkState,this),m.on("user:login",this.checkState,this),m.on("user:logout",this.checkState,this),m.on("user:updated",this.checkState,this),m.on("header:updateEditButton",this.updateEditButton,this),m.on("header:openNotifications",this.openNotifications,this),m.on("header:openSettings",this.openSettings,this),m.on("header:toggleMenu",this.toggleMenu,this),l.gads.mobile.MobileOverlay.enabled&&this.$win.on("showOverlayAd",this.showOverlayAd),$(".l-main_navigation_content_overlay").on("touchstart click",this.closeMenus),this.$doc.on("keypress",this.checkKeyPress)},i.prototype.checkKeyPress=function(t){var e,i;return i=!(this.search.isActive()||g.isElementEditable(t.target)||63!==(e=t.which)&&47!==e),27===t.which?this.closeMenus():i?(t.preventDefault(),this.toggleSearch()):void 0},i.prototype.toggleMenu=function(t){return $("html").toggleClass("main-navigation-is-open",t),$("html").is(".main-navigation-is-open")?($(".l-main_navigation").scrollTop(0),$(".l-header").one("click",this.closeMenus)):void 0},i.prototype.toggleMainMenu=function(t){return $("html").is(".main-navigation-is-open")?this.closeMenus(t):(this.closeMenus(t),$("html").addClass("main-navigation-is-open"),$(".l-main_navigation").scrollTop(0),$(".l-header").one("click",this.closeMenus),t.stopPropagation())},i.prototype.toggleUserMenu=function(t){return g.isPhone()?void(window.location=c.getProfileUrl(this.model.toJSON())):($("html").is(".user-menu-is-open")?this.closeMenus(t):(this.closeMenus(t),
$("html").addClass("user-menu-is-open"),$(".l-header").one("click",this.closeMenus),$(window).one("scroll",this.closeMenus),t.stopPropagation()),t.preventDefault())},i.prototype.toggleEditMenu=function(t){return $("html").is(".edit-menu-is-open")?this.closeMenus(t):(this.closeMenus(t),$("html").addClass("edit-menu-is-open"),$(".l-header").one("click",this.closeMenus),t.stopPropagation()),t.preventDefault()},i.prototype.closeMenus=function(t){return $("html").removeClass("main-navigation-is-open"),$("html").removeClass("user-menu-is-open"),$("html").removeClass("edit-menu-is-open"),$(window).trigger("scroll")},i.prototype.toggleSearch=function(t){return this.search.activate(),this.closeMenus(t)},i.prototype.updateEditButton=function(t){var e,i,n,r,o,s;return null==t&&(t={}),r=t.canTower,i=t.canEdit,n=t.canPromote,e=t.appRoute,s=t.model,o=t.hide,(r||i||n)&&!o?(this.$editButton.removeClass("is-hidden"),i?(this.$editLink.attr("href",s.editLink()),("function"==typeof s.isEditableViaMobile?s.isEditableViaMobile():void 0)&&u.get("device").type.match("mobile")&&(this.$mobileEditLink.attr("href",s.editLink()),this.$mobileEditLink.css({display:"inline-block"}),this.$mobileCreateLink.addClass("is-hidden"))):this.$editLink.attr("href","").parent().addClass("is-hidden"),r?this.$towerLink.attr("href",s.towerLink()):this.$towerLink.attr("href","").parent().addClass("is-hidden"),n?this.$promoteLink.parent().removeClass("is-hidden"):this.$promoteLink.parent().addClass("is-hidden")):this.$editButton.addClass("is-hidden")},i.prototype.loginBtnClicked=function(t){return t.preventDefault(),t.stopPropagation(),f.loginRedirect({action:"header-login"})},i.prototype.showOverlayAd=function(e,i){var n,r,o;return n=$(t(68)(i)),r=n.find(".b-oa-image"),o=function(t){var e,i,n;return null==t&&(t={}),n=.95,i=parseInt(t.width*n),e=parseInt(t.height*n)-50,r.css({"max-width":i,"max-height":e})},p.on("resize",o),p.on("hide",function(t){return function(){return p.off("resize",o)}}(this)),p.show(n,{containerClassName:"b-overlay_ad-wrapper"}),$(".l-o-close").remove(),$(".b-o-header").on("click",function(){return p.hide()})},i.prototype.checkState=function(){this.model.available()&&(this.setAuthenticated(),this.startNotificationsUpdate())},i.prototype.setAuthenticated=function(){var t;return t=this.model.toJSON(),this.$userAvatar.attr("src",h.profileImageUrl(t,{width:34,height:34})).attr("data-logged_in_id",t.id),this.$profileLink.attr("href",c.getProfileUrl(t))},i.prototype.setNotifications=function(t){return m.trigger("header:setNotifications",t),t?(this.$el.addClass("user-has-notifications"),$(".notification-count").attr("data-notifications",t)):(this.$el.removeClass("user-has-notifications"),$(".notification-count").attr("data-notifications",null))},i.prototype.updateNotificationsSuccess=function(t){return t.count&&!this.notifications&&this.setNotifications(t.count),this.notifications&&!t.count&&this.setNotifications(),this.setNotificationsUpdate()},i.prototype.setNotificationsUpdate=function(){return null!=this._nTid&&window.clearTimeout(this._nTid),this._nTid=window.setTimeout(this.startNotificationsUpdate,this._notificationsTimeout)},i.prototype.startNotificationsUpdate=function(){return this.disposed?void 0:this.xhrs.notifications=$.ajax({url:c.api("notifications_count",this.model.get("id")),success:this.updateNotificationsSuccess,error:this.setNotificationsUpdate})},i.prototype.clearNotificationsUpdate=function(){return null!=this.xhrs.notifications&&4!==this.xhrs.notifications.readyState&&this.xhrs.notifications.abort(),null!=this._nTid?window.clearTimeout(this._nTid):void 0},i.prototype.clearNotifications=function(t){return this.notifications=0,d.set("notifications",this.notifications),this.setNotifications(this.notifications),t?this.xhrs.markseen=$.ajax({url:c.api("notifications_markseen",this.model.get("id")),type:"post"}):void 0},i.prototype.openSettings=function(){var e,i;return e=t(49),this.settingsView=this.subview("settings",new e({autoSave:!1})),window.location.pathname.match("settings")?i="/":(i=window.location.pathname,m.trigger("navigate","/settings",{trigger:!1})),this.settingsView.listenTo(p,"hide",function(t){return function(){return t.settingsView.dispose(),m.trigger("navigate",i,{trigger:!1})}}(this)),p.show(this.settingsView.$el)},i.prototype.openNotifications=function(){var e;if(f.available()){if(this.notificationsView&&!this.notificationsView.disposed)return;return e=t(47),this.notificationsView=this.subview("notifications",new e),this.notificationsView.show(),this.clearNotifications(!0)}return window.location.pathname.match(/notifications/)?a.trackedRedirect("/"):void 0},i.prototype.openPromotion=function(){return m.trigger("item:promote")},i.prototype.goToMobilePost=function(t){var e;return t.preventDefault(),t.stopPropagation(),e="/post/mobile/posts/new?referral_code=mp:header:mobile-post-button",f.available()?m.trigger("track:navigate",{to:"author-app",via:"mobile-post-button",redirect:e}):f.loginRedirect({action:"mobile-post-button",redirect:e})},i.prototype.dispose=function(){var t,e,i,n;if(!this.disposed){m.off("user:loaded",this.checkState,this),m.off("user:login",this.checkState,this),m.off("user:logout",this.checkState,this),null!=(e=this.search)&&e.dispose(),delete this.search,l.gads.mobile.MobileOverlay.enabled&&this.$win.off("showOverlayAd"),delete this.$win,this.clearNotificationsUpdate(),i=this.xhrs;for(t in i)n=i[t],4!==n.readyState&&"function"==typeof n.abort&&n.abort();return delete this.xhrs,this.stopListening(),this.undelegateEvents()}},i}(r),e.exports=new n({model:f})},{21:21,25:25,26:26,32:32,36:36,38:38,39:39,41:41,42:42,43:43,47:47,49:49,50:50,51:51,6:6,68:68,73:73}],35:[function(t,e,i){var n,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(21),s=t(26),r=t(49),a=t(42),n=function(t){function e(){return this.setNotifications=l(this.setNotifications,this),this.openSidebarSettings=l(this.openSidebarSettings,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.logPrefix="[app.modules.main_navigation_module]:",e.prototype.el=".l-main_navigation",e.prototype.events={"click .l-mn-u-settings":"toggleSettings","click .l-mn-notifications":"openNotifications","mouseover .l-mn-item":"showPosts"},e.prototype.elements={".l-mn-u-name":"$userName",".l-mn-notifications":"$notificationsEl"},_.extend(e.prototype,s),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.initializeAppState(),this.setTouchClassOnHTML(),this.preventScrolling(),a.on("header:setNotifications",this.setNotifications),a.on("sidebar:openSettings",this.openSidebarSettings)},e.prototype.setTouchClassOnHTML=function(){var t;return t=function(){return $("html").addClass("is-touch-device"),$(window).off("touchstart",t)},$(window).on("touchstart",t)},e.prototype.openSidebarSettings=function(){return a.trigger("header:toggleMenu",!0),this.toggleSettings(!0),a.trigger("navigate","/",{trigger:!1})},e.prototype.setNotifications=function(t){return t?this.$notificationsEl.attr("data-notifications",t).addClass("has-notifications"):this.$notificationsEl.attr("data-notifications","").removeClass("has-notifications")},e.prototype.appStateChanged=function(t){return t.available()?(this.$userName.text(t.get("name")),this.$userName.attr("href","/"+t.get("user_name"))):void 0},e.prototype.toggleSettings=function(t){var e;return!this.settingsView||this.settingsView.disposed?(this.settingsView=new r({container:this.$(".l-mn-settings_wrapper"),containerMethod:"prepend"}),$("html").addClass("settings-view-is-open")):($("html").removeClass("settings-view-is-open"),null!=(e=this.settingsView)?e.dispose():void 0)},e.prototype.openNotifications=function(t){return a.trigger("header:openNotifications"),t.preventDefault(),t.stopPropagation()},e.prototype.preventScrolling=function(){return this.$el.on("touchstart",function(t){return function(e){var i;return i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],t.lastTouchDownPosition={x:i.screenX,y:i.screenY},!0}}(this)),this.$el.on("touchend",function(t){return function(e){var i,n,r,o;return n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],i={x:n.screenX,y:n.screenY},r=Math.abs(i.x-t.lastTouchDownPosition.x),o=Math.abs(i.y-t.lastTouchDownPosition.y),3>r&&3>o}}(this)),this.$el.on("touchmove",function(t){return function(e){var i,n,r,o,s,a,l,u,c,h;return u=t.$el.scrollTop(),c=0,i=t.$el[0].scrollHeight-t.$el.height(),h=e.originalEvent.touches[0],r=c>=u,n=u>=i,l=h.screenY>t.lastTouchDownPosition.y,a=h.screenY<t.lastTouchDownPosition.y,o=r&&l,s=n&&a,o||s?(e.preventDefault(),!1):!0}}(this))},e.prototype.showPosts=function(t){return $(t.currentTarget).hasClass("active")?void 0:($(".l-mn-item").removeClass("active"),$(t.currentTarget).addClass("active"))},e}(o),e.exports=new n},{21:21,26:26,42:42,49:49}],36:[function(t,e,i){var n,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(78),r=t(21),s=t(73),n=function(t){function e(){return this.handleKeypress=a(this.handleKeypress,this),this._preventScroll=a(this._preventScroll,this),this._resize=a(this._resize,this),e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.logPrefix="[app.modules.overlay_module]:",e.prototype.el=".l-overlay",e.prototype.itemClass="l-o-part",e.prototype.animationTime=200,e.prototype.elements={".l-o-content":"$content"},e.prototype.events={"click .l-o-close":"hide",click:"handleMisClick"},e.prototype.initialize=function(t){return this.options=t,this.isActive=!1,this.$current=null,this.$win=$(window),this.$doc=$(document),this.$html=$("html"),e.__super__.initialize.apply(this,arguments),this._throttled=o.throttle(this._resize,100),this.$win.on("resize",this._throttled),this.$doc.on("keydown",this.handleKeypress)},e.prototype.lockScroll=function(){return this.scrolled=this.$win.scrollTop(),this.$html.addClass("noscroll")},e.prototype.restoreScroll=function(){return this.$html.removeClass("noscroll"),this.$win.off("scroll",this._preventScroll),this.$doc.off("touchmove",this._preventTouch)},e.prototype._resize=function(){var t,e;return e=this.$win.width(),t=this.$win.height(),this.$current&&this.$current.css("max-height",t),this.trigger("resize",{width:e,height:t})},e.prototype._preventScroll=function(){return this.$win.scrollTop(this.scrolled)},e.prototype._preventTouch=function(t){return t.preventDefault()},e.prototype.handleKeypress=function(t){return 27===t.keyCode?this.hide():void 0},e.prototype.handleMisClick=function(t){return $(t.target).is(this.$content)?this.hide():void 0},e.prototype.show=function(t,e){var i;return null==e&&(e={}),this.isActive?!1:(i="object"==typeof t?t:$(t),i.addClass(this.itemClass),this.lockScroll(),this.$current=i,this.$content.html(i),i.removeClass("is-hidden").addClass("active"),this._resize(),this.trigger("showing"),this.log("showing overlay",this.$current),this.$el.addClass(e.containerClassName),setTimeout(function(t){return function(){return t.$el.addClass("active"),t.isActive=!0,t.trigger("show")}}(this),this.animationTime),i)},e.prototype.active=function(){return this.isActive},e.prototype.hide=function(){return this.isActive?(this.log("hiding overlay",this.$current),this.trigger("hiding"),this.$el.attr("class","l-overlay"),this.$current=null,this.$content.html(""),this.restoreScroll(),this.isActive=!1,this.trigger("hide"),null):!1},e.prototype.dispose=function(){var t,e,i;if(!this.disposed){this.hide(),this.$win.off("resize",this._throttled),delete this._throttled,this.$doc.off("keydown",this.handleKeypress),e=this.xhrs;for(t in e)i=e[t],4!==i.readyState&&"function"==typeof i.abort&&i.abort();return delete this.xhrs,this.stopListening(),this.undelegateEvents()}},e}(r),e.exports=new n},{21:21,73:73,78:78}],37:[function(t,e,i){var n,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};n=t("backbone"),o=t(6),r=function(){function t(){this.createXHR=s(this.createXHR,this),this._xhrConstructor=s(this._xhrConstructor,this),this._ready=!1,this.log("initialized")}return t.prototype.trace=o.debug,t.prototype.log=n.Log.log,t.prototype.logPrefix="[app.modules.proxy_module]:",t.prototype.start=function(t){return this.options=null!=t?t:{},$.support.cors=!0,document.domain="moviepilot.com",this.el=document.createElement("iframe"),this.el.style.display="none",this.el.onload=this.createXHR,this.el.onerror=this.options.error,this.el.setAttribute("src","//"+o.mp_api_bridge),document.body.appendChild(this.el)},t.prototype._xhrConstructor=function(){return new this.context.XMLHttpRequest},t.prototype.createXHR=function(){var t;return this.context=this.el.contentWindow,this.xhr=this._xhrConstructor,this._ready=!0,"function"==typeof(t=this.options).success?t.success():void 0},t}(),e.exports=new r},{6:6,backbone:"backbone"}],38:[function(t,e,i){var n,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(78),r=t(21),s=t(50),a=t(42),n=function(e){function i(){return this.render=l(this.render,this),this.trackSearch=l(this.trackSearch,this),this.clearResults=l(this.clearResults,this),this.checkKeyPress=l(this.checkKeyPress,this),i.__super__.constructor.apply(this,arguments)}return u(i,e),i.prototype.logPrefix="[app.modules.search_submodule]:",i.prototype.template=t(70),i.prototype.el=".m-search",i.prototype._throttleTimeout=300,i.prototype._trackingTimeout=1e3,i.prototype._itemsLimit=18,i.prototype.initialize=function(){return this.active=!1,this.lastQuery=null,this.searching=!1,this.hasResults=!1,this.tid=null,this.$html=$("html"),this.$doc=$(document),i.__super__.initialize.apply(this,arguments),this.$doc.on("keyup",this.checkKeyPress),this.startSearch=o.debounce(this.startSearch,this._throttleTimeout),this.trackSearch=o.debounce(this.trackSearch,this._trackingTimeout)},i.prototype.events={"click .m-s-close":"deactivate","click li":"deactivate","keyup .m-s-input":"startSearch","change .m-s-input":"startSearch"},i.prototype.elements={".m-s-input":"$search",".m-s-results":"$results"},i.prototype.setTheme=function(t){return this.theme=t,this.$el.attr("data-theme",this.theme)},i.prototype.checkKeyPress=function(t){return 27===t.keyCode?this.deactivate():void 0},i.prototype.activate=function(){return this.active||(this.$html.addClass("backgroundify"),this.$el.addClass("active"),this.$search.focus(),this.active=!0),this},i.prototype.isActive=function(){return!!this.active},i.prototype.deactivate=function(){return this.active&&(this.clear(),this.$html.removeClass("backgroundify"),this.$el.removeClass("active"),this.active=!1),this},i.prototype.clear=function(){return this.clearSearch(),this.clearResults(),this},i.prototype.clearSearch=function(){return this.$search.val(""),this.searching?this.searching=!1:void 0},i.prototype.clearResults=function(){return this.lastQuery=null,this.hasResults&&(setTimeout(function(t){return function(){return t.$results.html("")}}(this)),this.hasResults=!1),this},i.prototype.trackSearch=function(){return this.lastQuery?(a.trigger("track:pageview","/?q="+this.lastQuery.replace(/\s/,"+")),this.log("tracked '"+this.lastQuery+"'")):void 0},i.prototype.startSearch=function(t){var e;return 13===t.keyCode?this.$search.blur():(e=$.trim(this.$search.val()))?(this.searching=!0,e!==this.lastQuery?(null!=this.xhrs.search&&4!==this.xhrs.search.readyState&&this.xhrs.search.abort(),this.xhrs.search=$.ajax({url:s.api("search",e)+"&per_page="+this._itemsLimit,success:this.render,error:this.clearResults}),this.lastQuery=e):void 0):this.clear()},i.prototype.render=function(t){return t&&t.total?(this.$results.html(this.template({results:t.search})),this.hasResults=!0,this.trackSearch()):this.clearResults()},i.prototype.dispose=function(){var t,e,i;if(!this.disposed){this.clear(),this.deactivate(),this.stopListening(),this.undelegateEvents(),this.$doc.off("keyup",this.checkKeyPress),e=this.xhrs;for(t in e)i=e[t],4!==i.readyState&&"function"==typeof i.abort&&i.abort();return delete this.xhrs}},i}(r),e.exports=new n},{21:21,42:42,50:50,70:70,78:78}],39:[function(t,e,i){var n,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("backbone"),r=t(16),s=t(6),a=t(43),l=t(42),t(7),o=function(t){function e(){return this._loaded=u(this._loaded,this),e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.logPrefix="[app.modules.session_module]:",e.prototype.localStorage=new n.LocalStorage("app:session"),e.prototype.defaults={id:"static",timestamp:0},e.prototype.reset=function(){var t;return t=function(t){return function(){return t.clear({silent:!0}),t.set(t.defaults,{silent:!0})}}(this),this.destroy({complete:t})},e.prototype.initialize=function(){return this.loaded=!1,this.fetch({complete:this._loaded}),this.on("change",this.updated,this),l.once("route:after",this.checkReturnUrl,this),this.log("initialized")},e.prototype.getReturnUrl=function(){var t;return t=this.get("login:redirect")||"/join","/welcome"===t&&(t="/join"),t},e.prototype.checkReturnUrl=function(){return this.get("login:redirect")===window.location.href?this.unset("login:redirect"):void 0},e.prototype._loaded=function(){return this.loaded=!0,l.trigger("session:loaded"),this.storeQSParamsInSession(),this.updateTracking()},e.prototype.storeQSParamsInSession=function(){var t;return(t=a.qs("referral_code"))?(this.set({referral_code:t}),this.save()):void 0},e.prototype.updateTracking=function(){var t,e,i;return t=Date.now(),(e=a.qs("utm_source"))?(i={utm_campaign:a.qs("utm_campaign"),utm_source:e,timestamp:t},this.set({tracking:i}),this.save()):(i=this.get("tracking"))&&t-i.timestamp>s.qs_sources_tracking_expires?(this.unset("tracking"),this.save()):void 0},e.prototype.updated=function(){return this.set({timestamp:Date.now()},{silent:!0}),this.save()},e}(r),e.exports=new o},{16:16,42:42,43:43,6:6,7:7,backbone:"backbone"}],40:[function(t,e,i){(function(i){var n,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;s=t(78),n=t("backbone"),r=t(18),l=t(43),a=t(6),o=function(t){function e(){this._injectPusher=u(this._injectPusher,this),this._handleConnectionError=u(this._handleConnectionError,this),this._checkIfLoaded=u(this._checkIfLoaded,this),this.pusher=null,this.listeners={},e.__super__.constructor.apply(this,arguments),a.libraries.pusher&&(l.getScript({url:"//js.pusher.com/2.2/pusher.min.js",success:this._checkIfLoaded}),this.whenAvailable(this._injectPusher))}return c(e,t),e.prototype.logPrefix="[app.modules.socket_module]:",e.prototype._loadCheckTimeout=100,e.prototype.available=function(){return!!i.window.Pusher},e.prototype._checkIfLoaded=function(){return this.available()?this.dequeue():setTimeout(this._checkIfLoaded,this._loadCheckTimeout)},e.prototype._handleConnectionError=function(t){var e;return null==t&&(t={}),4004===(null!=(e=t.data)?e.code:void 0)?this.log("connections limit reached"):this.log("error",t)},e.prototype.subscribe=function(t,e,i){return this.whenAvailable(function(n){return function(){var r;return(r=n.pusher.channel(t))||(r=n.pusher.subscribe(t),n.listeners[t]=0),r.bind(e,i),n.listeners[t]++}}(this))},e.prototype.unsubscribe=function(t,e,i){return this.whenAvailable(function(n){return function(){var r;return(r=n.pusher.channel(t))&&(r.unbind(e,i),n.listeners[t]--,!n.listeners[t])?(n.pusher.unsubscribe(t),delete n.listeners[t]):void 0}}(this))},e.prototype._injectPusher=function(){return this.pusher=new i.window.Pusher(a.pusher_key,{encrypted:!0}),this.pusher.connection.bind("error",this._handleConnectionError),this.trigger("ready")},e.prototype.dispose=function(){return this.disposed?void 0:(this.pusher.disconnect(),this.disposed=!0)},e}(r),e.exports=new o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{18:18,43:43,6:6,78:78,backbone:"backbone"}],41:[function(t,e,i){(function(i){var n,r,o,s,a,l,u,c,h,p,d=function(t,e){return function(){return t.apply(e,arguments)}},f=function(t,e){function i(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},g={}.hasOwnProperty;s=t(78),n=t("backbone"),h=t(43),u=t(50),l=t(73),r=t(16),c=t(39),a=t(6),p=t(42),t(7),o=function(e){function r(){return this._expired=d(this._expired,this),this._recover=d(this._recover,this),this._recoverFailed=d(this._recoverFailed,this),this._recoverSuccess=d(this._recoverSuccess,this),this.logout=d(this.logout,this),this.login=d(this.login,this),this._loaded=d(this._loaded,this),this.load=d(this.load,this),this.loginRedirect=d(this.loginRedirect,this),this.whenAvailable=d(this.whenAvailable,this),r.__super__.constructor.apply(this,arguments)}return f(r,e),r.prototype.logPrefix="[app.modules.user_module]:",r.prototype.localStorage=new n.LocalStorage("app:user"),r.prototype.loginUrl="/welcome/login",r.prototype.defaults={id:0,timestamp:0,pitch:"",twitter_handle:"",location:""},r.prototype.validate=function(t,e){var i;return t||(t=this.toJSON()),i=[],t.user_name&&!/^([a-zA-Z\d\-_]{3,15})$/.test(t.user_name)&&i.push({fieldName:"user_name",msg:l.get("lang").user_name_invalid}),t.description&&t.description.length>140&&i.push({fieldName:"description",msg:l.get("lang").user_description_invalid}),t.location&&t.location.length>140&&i.push({fieldName:"location",msg:l.get("lang").user_location_invalid}),i.length?i:null},r.prototype.can=function(t){return s(this.get("flags")).include(t)},r.prototype.saveToServer=function(t){var e,i,n,r,o,a,l;for(null==t&&(t={}),e={url:u.api("user_profile",this.get("id")),contentType:"application/json; charset=UTF-8",type:"PUT"},n={user:{}},l=["user_name","email","description","location","preferences","cover_image_url","avatar_image_url","pitch","profile_card_mode","profile_background_color"],r=0,a=l.length;a>r;r++)o=l[r],n.user[o]=this.get(o);return t.makeUserCreator&&(n.enable_creator_role="1",n.user.referral_code=this.getReferralCode()),delete n.user.preferences.profile_background_color,delete n.user.preferences.profile_card_mode,e.data=JSON.stringify(n),i=t.success,t.success=function(t){return function(e){return t.set(e),t.save(),"function"==typeof i&&i(e),p.trigger("user:updated")}}(this),$.ajax(s.extend(e,t))},r.prototype.available=function(){return!!this.get("id")},r.prototype.is=function(t){return this.id===t||this.get("user_name")===t},r.prototype.whenAvailable=function(t){var e;return this.available()?t():(e=function(i){return function(){return t(),p.off("user:login",e,i)}}(this),p.on("user:login",e,this))},r.prototype.reset=function(){var t;return t=function(t){return function(){return t.clear({silent:!0}),t.set(t.defaults,{silent:!0}),t.save()}}(this),this.destroy({complete:t})},r.prototype.allowsFB=function(){var t;return"facebook"===this.get("provider")&&(null!=(t=this.get("preferences"))?t.facebook_edges:void 0)},r.prototype.loginRedirect=function(t){return null==t&&(t={}),c.set("login:redirect",t.redirect||window.location.href),t.action&&c.set("login:action",t.action),window.location=this.loginUrl},r.prototype.getReferralCode=function(){var t,e,i;return(e=c.get("referral_code"))?e:(i=null!=(t=c.get("tracking"))?t.utm_campaign:void 0)?"utm_campaign:"+i:void 0},r.prototype.initialize=function(){return this.isLameBrowser=h.isIE9(),this.facebook=t(33),c.loaded?this.load():p.once("session:loaded",this.load,this),this.log("initialized")},r.prototype.load=function(){var t;return this.unset("is_new",{silent:!0}),(t=c.get("user_id"))?(this.set({id:t}),this.fetch({complete:this._loaded})):void 0},r.prototype._loaded=function(){return p.trigger("user:loaded"),this.update({error:this._recover})},r.prototype.login=function(t,e){var i,n,r,o;r=function(t){return function(i){return t.log("user logged in"),p.trigger("user:login"),"function"==typeof e?e(null,t):void 0}}(this),i=function(t){return function(){return t.log("login failed, resetting current state"),t.reset(),c.unset("user_id"),"function"==typeof e?e("Login failed",t):void 0}}(this);for(n in t)o=t[n],this.set(n,o);return this.update({success:r,error:i})},r.prototype.logout=function(t){var e;return this.log("user logged out"),this.reset(),c.reset(),document.cookie="_mp_com_api_session_2=;domain=.moviepilot.com;expires="+new Date(0).toUTCString()+";",e={url:u.api("session_insecure"),type:"DELETE",dataType:"json",success:function(e){return function(){return p.trigger("user:logout"),"function"==typeof t?t():void 0}}(this)},this.isLameBrowser&&(e.type="POST",e.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override","DELETE")},e.contentType="application/json; charset=UTF-8",e.data=JSON.stringify({_method:"DELETE"})),$.ajax(e)},r.prototype._recoverSuccess=function(){return this.log("session recovered"),i.ga("send","event","dev","session","recovered"),p.trigger("user:recovered")},r.prototype._recoverFailed=function(){return this.log("failed to recover with old credentials"),"facebook"===this.get("provider")&&this.facebook.available()?this._recoverFacebook():this._expired()},r.prototype._recoverFacebook=function(){var t;return this.log("attempting to get new fb access_token"),t=function(t){return function(e){return t.log("attempting to recover session with new fb access_token"),t.set({access_token:e}),t.update({success:t._recoverSuccess,error:t._expired})}}(this),this.facebook.fetchAccessToken({success:t,error:this._expired},!0)},r.prototype._recover=function(){var t;return(t=this.get("provider"))&&this.get("access_token")?(this.log("attempting to recover user session"),this.set("timestamp",0),"facebook"===t&&this.facebook.reset(),this.update({success:this._recoverSuccess,error:this._recoverFailed})):this._expired()},r.prototype._expired=function(){return this.log("session expired"),this.logout()},r.prototype.update=function(t){var e,i,n,r,o,s,l;return null==t&&(t={}),o=this.get("provider"),i=this.get("access_token"),n=this.get("access_token_secret"),o&&i?(l=this.get("timestamp"),r=!l||Date.now()-l>a.mp_session_expires,s=function(e){return function(i){var n;return(n=e.get("id"))&&i.user.id!==n?(e.log("rejecting session update due to user ids mismatch"),"function"==typeof t.error?t.error("Session corrupt"):void 0):(r&&(c.set({user_id:i.user.id}),e.set({timestamp:Date.now()})),e.save(i.user,{validate:!1}),201===i.status&&e.set({is_new:!0}),"function"==typeof t.success&&t.success(i.user),p.trigger("user:updated"))}}(this),e={url:u.api("session"),success:s,error:t.error},r&&(e.type="POST",e.data={provider:o,access_token:i,access_token_secret:n}),this.isLameBrowser&&(e.dataType="jsonp",r&&(e.type="GET",e.url+="/create")),$.ajax(e)):("function"==typeof t.error&&t.error("Credentials missing"),!1)},r}(r),e.exports=new o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{16:16,33:33,39:39,42:42,43:43,50:50,6:6,7:7,73:73,78:78,backbone:"backbone"}],42:[function(t,e,i){var n,r;r=t(78),n=t("backbone"),e.exports=r.extend({},n.Events)},{78:78,backbone:"backbone"}],43:[function(t,e,i){var n,r,o,s;o=t(50),n=$(window),r=t(73),s={qs:function(t){var e,i,n;return t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=window.location.search||"?"+window.location.href.split("?")[1],i=e.exec(n),null!=i?decodeURIComponent(i[1].replace(/\+/g," ")):null},updateTimestampsToLocalTime:function(t){return $(t).find(".la_time").each(function(t,e){var i,n,r;return i=$(this),r=i.attr("datetime"),n=i.data("dateFormat"),i.replaceWith(o.dateTimeFormat(r,{format:n}))})},clearQS:function(){return window.history.replaceState?history.replaceState({},document.title,window.location.pathname):window.location.search=""},getScript:function(t){return null==t&&(t={}),t.dataType||(t.dataType="script"),$.ajax(t)},getIEVersion:function(){var t,e,i;return e=-1,"Microsoft Internet Explorer"===navigator.appName&&(i=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=t.exec(i)&&(e=parseFloat(RegExp.$1))),e},isIE9:function(){var t;return t=s.getIEVersion(),t>0&&9>=t},isIE:function(){return s.getIEVersion()>0},isChromeOnIOS:function(){return!!navigator.userAgent.match(/CriOS/)},maxDeviceWidth:function(t){return window.matchMedia&&window.matchMedia("(max-width: "+t+"px)").matches},minDeviceWidth:function(t){return window.matchMedia&&window.matchMedia("screen and (min-width: "+t+"px)").matches},isPhone:function(){var t;return t="utils.isPhone() is deprecated, please use either media queries in the styles directly or the cache-layer detection instead.",console.warn(t),this.maxDeviceWidth(480)},isMobile:function(){return!(s.isTablet()||s.isDesktop())},isTablet:function(){return s.minDeviceWidth(768)},isDesktop:function(){return s.minDeviceWidth(1024)},scrollTop:function(t,e){return null==e&&(e={}),e.center&&(t-=n.height()/2),$("html, body").animate({scrollTop:t||0},300)},requestAnimationFrameWrapper:function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)})(t)},isElementInViewport:function(t){var e;return e=t.getBoundingClientRect(),e.top>=0&&e.left>=0&&e.bottom<=n.height()&&e.right<=n.width()},isElementPartiallyInViewport:function(t){var e,i,r,o,s,a,l;return e=t.getBoundingClientRect(),a=n.height(),l=n.width(),(0<=(i=e.top)&&a>=i||0<=(r=e.bottom)&&a>=r)&&(0<=(o=e.left)&&l>=o||0<=(s=e.right)&&l>=s)},isOldAndroid:function(){var t,e;return t=navigator.userAgent.match(/Android/),e=function(){var t,e,i,n,r,o;return i="modernizr",n="#modernizr { width: 50vw; }",r=['<style id="s',i,'">',n,"</style>"].join(""),e=document.createElement("div"),e.id=i,document.body.innerHTML+=r,document.body.appendChild(e),o=parseInt(window.innerWidth/2,10),t=parseInt((window.getComputedStyle?getComputedStyle(e,null):e.currentStyle).width,10),e.parentNode.removeChild(e),document.querySelector("#s"+i).remove(),t===o},!(!t||e())},isElementEditable:function(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}},e.exports=s},{50:50,73:73}],44:[function(t,e,i){var n,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;r=t(15),s=t(41),o=t(32),e.exports=n=function(e){function i(){return this.deactivateSidebar=a(this.deactivateSidebar,this),i.__super__.constructor.apply(this,arguments)}return l(i,e),i.prototype.logPrefix="[app.views.community_collection_view]:",i.prototype.template=t(63),i.prototype.itemTemplate=t(64),i.prototype.className="b-community",i.prototype._scrollDebounce=20,i.prototype.autoRender=!0,i.prototype.autoRenderItems=!0,i.prototype.autoPollItems=!0,i.prototype.context="community-feed",i.prototype.perPage=10,i.prototype.endless=!0,i.prototype._animationDuration=400,i.prototype._sidebarDelay=1e3,i.prototype.inject=["community"],i.prototype.elements={".b-c-list":"$list","div.b-c-list":"$parent",".b-c-wrap":"$scrollable",".b-c-menu":"$menu",".b-c-scrollbar":"$scrollbar"},i.prototype.initialize=function(t){
return this.options=t,this.tid=null,this.collection=this.options.community,this.scrollbarActive=!1,this.scrollbarTimeout=null,i.__super__.initialize.apply(this,arguments),this.startSockets()},i.prototype.initializeFeed=function(){return this.startStream(),i.__super__.initializeFeed.apply(this,arguments),this.getScrollbarSize()},i.prototype.checkRenderState=function(){return this.isFullyRendered||this.length!==this.rendered?void 0:(this.$el.addClass("rendered"),this.isFullyRendered=!0,this.log("rendered all items"))},i.prototype.getScrollbarSize=function(){return this.scrollbarHeight=this.$scrollbar.height(),this.scrollableHeight=this.$scrollable.height()},i.prototype.checkListPosition=function(){return i.__super__.checkListPosition.apply(this,arguments),this.activateScrollbar(),this.updateScrollbarPosition()},i.prototype.activateScrollbar=function(){return this.scrolled&&!this.scrollbarActive&&(this.$scrollbar.addClass("active"),this.scrollbarActive=!0),null!=this.scrollbarTimeout&&clearTimeout(this.scrollbarTimeout),this.scrollbarTimeout=setTimeout(this.deactivateSidebar,this._sidebarDelay)},i.prototype.updateScrollbarPosition=function(){var t,e;return t=(this.scrollableHeight-this.scrollbarHeight)/(this.$list.height()-this.scrollableHeight),e=Math.floor(this.scrolled*t),this.$scrollbar.css({top:e})},i.prototype.deactivateSidebar=function(){return this.scrollbarActive?(this.$scrollbar.removeClass("active"),this.scrollbarActive=!1):void 0},i.prototype.setMode=function(t){return this.currentMode!==t?(this.stopStream(),this.$menu.find("li.active").removeClass("active"),this.$menu.find('li[data-type="'+t+'"]').addClass("active"),this.collection=this[t],this.$scrollable.scrollTop(0),this.reset(),this.initializeFeed(),this.currentMode=t):void 0},i.prototype.getTemplateData=function(){return{}},i.prototype.startSockets=function(){return this.community.socketStart(),this.log("started sockets")},i.prototype.startStream=function(){return this.listenTo(this.collection,"streamed",this.addItem)},i.prototype.stopStream=function(){return this.stopListening(this.collection,"streamed",this.addItem)},i.prototype.addItem=function(t){var e,i,n,r;return t.set("_streamed",!0),r=$(this.renderItem(t)),e=function(t){return function(){var e,i,n;return(i=t.$scrollable.scrollTop())?(n=i+r.height(),t.$scrollable.scrollTop(n)):(e=t.$list.children(),e.length=t.perPage,t.rendered=e.length,t.$list.html(e),t.getParentHeight())}}(this),i=function(t){return function(){return t.$el.removeClass("adding"),t.log("item streamed")}}(this),n=function(n){return function(){return null!=n.tid&&clearTimeout(n.tid),n.$list.find(".streamed").removeClass("streamed"),n.$list.prepend(r),n.rendered++,t.unset("_streamed"),e(),n.tid=setTimeout(i,n._animationDuration/2)}}(this),null!=this.tid&&clearTimeout(this.tid),this.$el.addClass("adding"),this.tid=setTimeout(n,this._animationDuration/2)},i.prototype.dispose=function(){return this.disposed?void 0:(this.stopStream(),null!=this.tid&&clearTimeout(this.tid),this.community.socketStop(),i.__super__.dispose.apply(this,arguments))},i}(r)},{15:15,32:32,41:41,63:63,64:64}],45:[function(t,e,i){var n,r,o,s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(21),r=t(46),e.exports=n=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.logPrefix="[app.views.error_404_not_found_view]:",i.prototype.template=t(71),i.prototype.className="p-error",i.prototype.container="#main",i.prototype.prerenderSignature="error",i.prototype.elements={".p-e-stream":"$latest"},i}(o)},{21:21,46:46,71:71}],46:[function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=t(21),e.exports=n=function(e){function i(){return this.showError=o(this.showError,this),i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.logPrefix="[app.views.loading_view]:",i.prototype.template=t(65),i.prototype.className="b-loading",i.prototype.container="#main",i.prototype.autoRender=!0,i.prototype.showError=function(){return this.$el.addClass("error")},i}(r)},{21:21,65:65}],47:[function(t,e,i){var n,r,o,s,a,l,u,c,h=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function i(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=t(28),n=t(15),u=t(41),c=t(42),l=t(36),s=t(78),a=t(32),o=function(e){function i(){return this._resize=h(this._resize,this),i.__super__.constructor.apply(this,arguments)}return p(i,e),i.prototype.logPrefix="[app.modules.notificaitons_modal]:",i.prototype.autoAttach=!1,i.prototype.context="notifications",i.prototype.template=t(72),i.prototype.itemTemplate=t(66),i.prototype.elements={".p-n-list":"$list",".p-n-body":"$notificationsBody"},i.prototype.events={"click .p-n-show_more":"showMore","click .p-n-title":"close","click .p-n-item":"_proxyAnchorNavigate"},i.prototype.initialize=function(){return this.collection=new r,this.$win=$(window),this._throttled=s.throttle(this._resize,100),this.$win.on("resize",this._throttled),i.__super__.initialize.apply(this,arguments),this.listenTo(l,"hide",this.dispose)},i.prototype._resize=function(){return this.$notificationsBody.css("max-height",this.$win.height())},i.prototype.show=function(t){var e,i;return null==t&&(t={}),e=window.location.pathname,"/notifications"!==e&&(this.returnUrl=e,c.trigger("navigate","/notifications",{trigger:!1})),this.render(),u.available()?(i=this.collection.fetch(),i.done(function(t){return function(){return l.show(t.$el,{containerClassName:"p-notifications"}),$("html").addClass("backgroundify"),t._resize()}}(this))):void 0},i.prototype.close=function(){return l.hide()},i.prototype.dispose=function(){var t;if(!this.disposed)return this.returnUrl?c.trigger("navigate",this.returnUrl,{trigger:!1}):a.trackedRedirect("/"),this.$win.off("resize",this._throttled),delete this._throttled,$("html").removeClass("backgroundify"),t=this.collection,i.__super__.dispose.apply(this,arguments),t.dispose()},i}(n),e.exports=o},{15:15,28:28,32:32,36:36,41:41,42:42,66:66,72:72,78:78}],48:[function(t,e,i){var n,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=t(21),o=t(73),s=t(54),a=t(42),e.exports=n=function(t){function e(){return this.toggleBanner=l(this.toggleBanner,this),e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.logPrefix="[app.views.promoted_banner_view]:",e.prototype.elements={".b-pb-dots_list":"$dotList"},e.prototype.events={"click .b-pb-close,.b-pb-open":"toggleBanner"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),o.get("device").type.match("tablet")||this.initSlider(),"closed"===sessionStorage.getItem("promotedBanner")?$(".b-promoted_banner_wrapper").addClass("is-hidden"):void 0},e.prototype.initSlider=function(){var t,e,i,n,r,o,a,l,u;return t=this.$(".b-pb-dots_list"),u=this.$(".is-slider .b-trending_article").width(),i=this.$(".b-pb-items_list").width()/u,l=this.$(".is-slider .b-trending_article").length,e=0,r=parseInt(l/i+l%i),n=function(t){return e=(t+r)%r,s.animate(-e*u),o()},a=function(t){return function(){return s.reset(),t.initSlider()}}(this),o=function(i){return function(){return t.find("li").remove(),1!==r?_.each(_.range(r),function(i){var r;return r=$('<li class="b-pb-dot">'),i===e&&r.addClass("is-active"),r.click(function(){return n(i)}),t.append(r)}):void 0}}(this),this.refreshSlider||(this.refreshSlider=_.debounce(_.bind(a,this),300)),$(window).resize(this.refreshSlider),this.disablePromotedBanner=function(){return $(window).off("resize",this.refreshSlider),null!=s?s.destroy():void 0},s=this.$(".b-pb-items_list").iSwipe({onChange:function(t){return e=t%r,o()}}),o()},e.prototype.toggleBanner=function(t){var e,i;return i=!!t.currentTarget.className.match(/b-pb-close/),i?(sessionStorage.setItem("promotedBanner","closed"),a.trigger("track:engagement",{action:"close-banner",label:"top-sories"})):sessionStorage.setItem("promotedBanner",null),e=$(".b-promoted_banner_wrapper"),e.toggleClass("is-hidden",i),setTimeout(function(t){return function(){return t.trigger("changeState")}}(this),300)},e.prototype.dispose=function(){return this.disposed?void 0:("function"==typeof this.disablePromotedBanner&&this.disablePromotedBanner(),e.__super__.dispose.apply(this,arguments))},e}(r)},{21:21,42:42,54:54,73:73}],49:[function(t,e,i){var n,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;r=t(21),a=t(36),o=t(78),l=t(41),s=t(73),e.exports=n=function(e){function i(){return this.showError=u(this.showError,this),this.saveUser=u(this.saveUser,this),i.__super__.constructor.apply(this,arguments)}return c(i,e),i.prototype.logPrefix="[app.views.settings_view]:",i.prototype.template=t(67),i.prototype.className="b-settings",i.prototype.tagName="ul",i.prototype.autoRender=!0,i.prototype.autoSave=!0,i.prototype.userChanges={},i.prototype.fields=[{name:"profile_public",label:"Public Profile"},{name:"email_notifications",label:"Receive notification emails"},{name:"facebook_edges",label:"Post Actions to Facebook"},{name:"newsletter",label:"Receive Newsletters"}],i.prototype.elements={".b-s-save_msg":"$savedMsg"},i.prototype.events={"click .b-s-save_btn":"saveBtnClicked","click .b-s-cancel_btn":"cancelBtnClicked","click .b-s-row.has-checkbox":"checkboxChanged","keyup input":"inputChanged"},i.prototype.initialize=function(t){return this.autoSave=null!=t.autoSave?!!t.autoSave:this.autoSave,i.__super__.initialize.apply(this,arguments),this.listenTo(l,"change",this.saveUser),this.refreshElements()},i.prototype.saveBtnClicked=function(t){return o.isEmpty(this.userChanges)?a.hide():(l.set(this.userChanges),this.userChanges={})},i.prototype.cancelBtnClicked=function(t){return a.hide()},i.prototype.saveUser=function(){var t;return this.clearErrorMessages(),t=l.validate(),t?this.showError(t):this.__saveToServer()},i.prototype.__showSaveMsg=function(){return this.$savedMsg.toggleClass("show"),this.msgTimeout&&clearTimeout(this.msgTimeout),this.msgTimeout=setTimeout(function(t){return function(){return t.$savedMsg.removeClass("show"),t.autoSave?void 0:a.hide()}}(this),2e3)},i.prototype.__saveToServer=o.debounce(function(){var t;return t=l.saveToServer(),t.done(o.bind(this.__showSaveMsg,this)()),t.error(function(t){return function(e){var i,n;return(null!=(i=e.responseJSON)&&null!=(n=i.error)?n.user_name:void 0)?t.showError([{fieldName:"user_name",msg:s.get("lang").user_name_unavailable}]):void 0}}(this))},1e3),i.prototype.clearErrorMessages=function(){return this.$(".is-invalid .b-s-row_msg").text(""),this.$(".is-invalid").removeClass("is-invalid")},i.prototype.showError=function(t){return o(t).each(function(t){return function(e){var i,n,r;return n=e.fieldName,r=e.msg,i=t.$("."+n+"-row"),i.addClass("is-invalid"),i.find(".b-s-row_msg").text(r)}}(this))},i.prototype.inputChanged=function(t){var e,i;return i=t.currentTarget.value,e=t.currentTarget.id,this.autoSave?l.set(e,i):this.userChanges[e]=i},i.prototype.checkboxChanged=function(t){var e,i,n,r,s;return i=$(t.currentTarget),e=i.find(".b-s-checkbox"),r=!e.hasClass("is-marked"),e.toggleClass("is-marked",r),n=i.data("name"),s=l.get("preferences"),s[n]=r,this.autoSave?l.set(s):o(s).each(function(t){return function(e,i){return t.userChanges[i]=e}}(this))},i.prototype.getTemplateData=function(){var t,e;return e=l.toJSON(),t=o(this.fields).each(function(t){return t.value=e.preferences[t.name]}),{fields:t,user:e,saveButtons:!this.autoSave}},i}(r)},{21:21,36:36,41:41,67:67,73:73,78:78}],50:[function(t,e,i){(function(i){var n,r,o,s,a,l,u=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(6),s=t(73),r=t(78),n={bold:["[1m","[22m"],italic:["[3m","[23m"],blue:["[34m","[39m"],cyan:["[36m","[39m"],green:["[32m","[39m"],magenta:["[35m","[39m"],red:["[31m","[39m"],yellow:["[33m","[39m"]},l=function(t,e){return""+n[e][0]+t+n[e][1]},a={},a.months=["January","February","March","April","May","June","July","August","September","October","November","December"],a.monthsShort=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],a.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a.log=function(t,e){var n,r,s;if(e&&!i.browser&&"development"===o.env)for(e=e.split(" "),n=0,r=e.length;r>n;n++)s=e[n],t=l(t,s);return console.log("["+(new Date).toUTCString()+"] "+(this.logPrefix||"[app]:")+" "+t)},a.numberOrdinalSuffix=function(t){var e;return e=t%10,1===e&&11!==t?t+"st":2===e&&12!==t?t+"nd":3===e&&13!==t?t+"rd":t+"th"},a.getPrototypeChain=function(t){var e,i,n,r,o;for(e=[t.constructor.prototype];t=null!=(i=null!=(n=t.constructor)&&null!=(r=n.superclass)?r.prototype:void 0)?i:null!=(o=t.constructor)?o.__super__:void 0;)e.push(t);return e.reverse()},a.getAllPropertyVersions=function(t,e){var i,n,r,o,s,l;for(s=[],o=a.getPrototypeChain(t),i=0,n=o.length;n>i;i++)r=o[i],l=r[e],l&&u.call(s,l)<0&&s.push(l);return s},a.choosePlural=function(t,e){return 1===t?t+" "+e[0]:t>=0?t+" "+e[1]:e[1]},a.hasCover=function(t){var e;return null==t&&(t={}),e=("function"==typeof t.toJSON?t.toJSON():void 0)||t,!e.cover_image_url&&r.isEmpty(e.cover_video)&&r.isEmpty(e.group_list)?!1:!0},a.includePretitle=function(t){return o.promote_magazine?(t=parseInt(t,10)||0,3301907===t||3301847===t||3301886===t||3302112===t||3301899===t||3301838===t):!1},a.isVerifiedUser=function(t){return o.promote_magazine?(t=parseInt(t,10)||0,3317676===t||3315760===t||3317862===t||3317873===t):!1},a.getStoryCoverImageUrl=function(t){return null==t&&(t={}),t.cover_image_url||t.og_image_url},a.getPaginationConfig=function(t,e){var i;return null==e&&(e={}),i={page:1,per_page:(null!=t?t.type.match("mobile"):void 0)?4:24},r.extend(i,e)},a.getPrefetched=function(t){var e,i;return!(e=s.get("prefetched")[t.type+"s"][t.name])||t.signature&&e.signature!==t.signature&&(null!=(i=e.resource)?i.id:void 0)!==t.signature?null:e},a.setPrefetched=function(t,e){return t.locals.env.prefetched[e.type+"s"][e.name]=r.pick(e,"resource","signature","pagination")},a.api=function(t,e){var i;return i="undefined"==typeof window?o.endpoints_override[t]||o.local_endpoints_base_url+o.endpoints[t]:o.endpoints_override[t]||o.endpoints_base_url+o.endpoints[t],a.makeUrl(i,e)},a.makeUrl=function(t,e){var i,n,r;if(r=t.match(/[:|*][^\d]\w+/g),!r||"string"!=typeof e&&"number"!=typeof e){if(e&&r)for(i=0,n=r.length;n>i;)t=t.replace(r[i],e[r[i].slice(1)]||""),i++}else t=t.replace(r[0],e);return t},a.shorten=function(t,e,i){var n,r;if(t=t||"",n=(e-3)/2|0,r=t,t.length>e)switch(i){case"left":r="..."+t.slice(3-e);break;case"center":r=t.slice(0,n)+"..."+t.slice(-n);break;default:r=t.slice(0,e-3)+"..."}return r},a.capFirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a.stripTags=function(t){return"string"==typeof t?t.replace(/(<([^>]+)>)/g,"").replace(/\[\[poll\:\d+]]/g,""):""},a.sanitizeString=function(t){return t.replace(/\r\n/g,"\n").replace(/<\/script>/g,"<\\/script>").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},a.dateToOGDateTime=function(t){return t instanceof Date||(t=new Date(t)),t.toISOString().split(".")[0]+"Z"},a.dateToYMD=function(t,e){return null==e&&(e="-"),t?(t instanceof Date||(t=new Date(t)),t.getFullYear()+e+("0"+(t.getMonth()+1)).slice(-2)+e+("0"+t.getDate()).slice(-2)):null},a.dateFormat=function(t){var e,i,n,r,o,s,l;return t?(s=t.match(/([\d]{4})-([\d]{2})-([\d]{2})-?(\w*)/),n=s[0],l=s[1],r=s[2],e=s[3],o=s[4],"9999"===l?"TBA":("99"===e&&"99"===r?(i=o?o+" "+l:l,t=l):"99"===e?(i=a.months[r-1]+" "+l,t=l+"-"+r):(i=a.months[r-1]+" "+a.numberOrdinalSuffix(parseInt(e))+", "+l,t=l+"-"+r+"-"+e),"<time datetime='"+t+"' data-date-format='dateFormat'>"+i+"</time>")):""},a.dateTimeFormat=function(t,e){var n,r,o,s;return null==e&&(e={}),r=e.format||"normal",n=new Date(t),o=i.browser?n:a.dateToLATime(n),s=a.dateTimeToString(o,{format:r}),"<time class='la_time' datetime=\""+n.toISOString()+'" data-date-format="'+r+'">'+s+"</time>"},a.dateTimeToString=function(t,e){var i,n,r,o,s,l,u,c,h,p;return null==e&&(e={}),r=e.format,i=t?new Date(t):new Date,o=i.getHours(),s="am",o||(o=12),o>12&&(o%=12,s="pm"),l=("0"+i.getMinutes()).slice(-2),h=o+":"+l+s,c=a.months[i.getMonth()]+" "+a.numberOrdinalSuffix(i.getDate())+", "+i.getFullYear(),"short"===r?c:"supershort"===r?(n=a.numberOrdinalSuffix(i.getDate()),u=a.monthsShort[i.getMonth()],p=i.getFullYear()===(new Date).getFullYear()?"":i.getFullYear(),u+" "+n+" "+p):c+" at "+h},a.dateToLATime=function(t){var e,i,n,r,o;return i=6e4,r=-420*i,e=new Date(t),o=e.getTime()+e.getTimezoneOffset()*i,n=new Date(o+r)},a.dateGetSecondsDiff=function(t,e){return Math.abs((+t-+e)/1e3)},a.dateFormatSince=function(t,e){var i,n,r,o,s;if(null==e&&(e={}),t){if(o=Date.now(),t instanceof Date||(s="string"==typeof t?Date.parse(t):t,t=new Date(s)),r='<time datetime="'+t.toISOString()+'" data-date-format="dateFormatSince">',i=Math.floor(a.dateGetSecondsDiff(+o,s)))switch(!1){case!(60>i):r+="seconds ago";break;case!(3600>i):r+=Math.floor(i/60)+"m ago";break;case!(86400>i):r+=Math.floor(i/3600)+"h ago";break;default:return n=e.format||"short",a.dateTimeFormat(s,{format:n})}else r+="now";return r+="</time>"}},a.isSameDay=function(t,e){return a.dateToYMD(t)===a.dateToYMD(e)},a.getProfileUrl=function(t){return null==t&&(t={}),t.user_name?"/"+t.user_name:t.id?"/users/"+t.id:null},a.getProfileHandle=function(t,e){return null==e&&(e=null),t?null!=e&&o.magazine_story_authors[""+e]?o.magazine_story_authors[""+e]:t.name||t.user_name||"user"+t.id:void 0},a.numberFormat=function(t,e){var i;return null==e&&(e=!1),i=t.toString().split("."),i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e&&"10"===i[0]?"10":i.join(".")},a.viewsFormat=function(t,e){var i,n;return null==e&&(e={}),e.hideZero&&0===t?"":1e3>t?t:t>=1e3&&1e6>t?Math.floor(t/1e3)+"k":(i=Math.floor(t/1e6),n=Math.floor(t/1e5)%10,n&&!Math.floor(i/10)?[i,n].join(".")+"M":i+"M")},a.supportBlendMode=function(){return"undefined"==typeof window.getComputedStyle(document.body).backgroundBlendMode?!1:!0},a.getUrlPrefix=function(t){var e,i,n,r;for(n=o.tag_types,e=0,i=n.length;i>e;e++)if(r=n[e],r.type===t)return r.url;switch(t){case"series":return"tv";case"channel":return"tags";case"review":return"reviews";case"post":return"posts";case"user":return"users";case"group_list":return"lists";case"group_list_item":return"lists";case"quiz":return"quizzes"}},a.isTagLike=function(t){return u.call(r.pluck(o.tag_types,"type"),t)>=0||"series"===t||"channel"===t},a.getUrl=function(t){var e,i,n,r,o;return(o=null!=t&&"function"==typeof t.getUrl?t.getUrl():void 0)?o:(r=a.getUrlPrefix(t.type||t.legacy_type),null!=r?(n=t.slug||t.permalink,i={3301780:"/magazine/StarsToWatch/DonaldGlover",3301793:"/magazine/StarsToWatch/JaiCourtney",3301802:"/magazine/StarsToWatch/MichaelBJordan",3312177:"/magazine/StarsToWatch/BrittRobertson",3301816:"/magazine/StarsToWatch/DylanOBrien",3301823:"/magazine/StarsToWatch/SophieTurner",3301828:"/magazine/StarsToWatch/ScottEastwood",3301833:"/magazine/StarsToWatch/ZoeKravitz",3301836:"/magazine/StarsToWatch/JaimieAlexander",3318098:"/magazine/StarsToWatch/MelissaBenoist"},e=parseInt(t.id,10),i[e]?i[e]:"users"===r?a.getProfileUrl(t):a.isTagLike(t.type)?"/"+r+"/"+n:"tag"===r?"/tags/"+n:"/"+r+"/"+t.id):void 0)},a.getPostDate=function(t){var e;return null!=t.toJSON&&(t=t.toJSON()),e=t.first_published_at||t.last_published_at||t.published_at||t.created_at,e?a.dateToYMD(e,"/"):""},a.getUserVerifiedRole=function(t){switch(t){case"contributor":return"creator";default:return t}},a.commentParser=function(t){var e,i,n,r,o,s;if(null==t&&(t={}),!(s=t.content))return null;for(n=[{regex:/<iframe.+?src="\/\/www\.youtube\.com\/embed\/([a-zA-Z0-9_-]{11})"[^>]+?><\/iframe>/,replacement:"https://www.youtube.com/watch?v=$1"},{regex:/\[yt:([a-zA-Z0-9\-_]+)\]/g,replacement:"https://www.youtube.com/watch?v=$1"},{regex:/(https?:\/\/[^\s]+[\.]+[^\s]+)/g,replacement:function(t,e){return'<a href="'+e+'">'+e+"</a> "}},{regex:/<a(\s[^>]*)+>/g,replacement:function(t,e){return~e.indexOf("http://moviepilot.com/")?t:'<a rel="nofollow" target="_blank"'+e+">"}},{regex:/\@\[([^\]]+)\]\(id\:(\d+)\)/g,replacement:'<a href="http://moviepilot.com/users/$2" class="b-c-mention">@$1</a>'}],r=[],e=0,i=n.length;i>e;e++)o=n[e],r.push(s=s.replace(o.regex,o.replacement));return r},a.getArticleTemplate=function(t){var e,i;return i=t.get("template"),(null!=(e=t.get("cover_video"))?e.embed:void 0)&&(i="video"),i||"default"},a.getArticleTitleSize=function(t,e){var i,n;return null==t&&(t=""),e.type.match("mobile")?32:e.type.match("tablet")?37:(n=t.length||1,i=parseInt(140-19*Math.log(n)))},a.jwplayerPlaceholder=function(t){var e;return e="youtube"===t.provider?"data-videokey='http://www.youtube.com/watch?v="+t.videoKey+"'":"data-videokey='"+t.videoKey+"'","<div id='jwplayer-"+t.videoKey+"' class='b-jwplayer is-loading' "+e+"></div>"},a.youtubePlaceholder=function(t){return"<div class='b-embed_video'><iframe src='http://www.youtube.com/embed/"+t.videoKey+"' frameborder='0' allowfullscreen></iframe></div>"},a.contentParser=function(t){var e,i,n,o,s,l,u,c;if(u=t.device.type,u.match("pc")&&(c=640),u.match("tablet")&&(c=720),u.match("mobile")&&(c=320),t.imageWidth=c,t.imageResizer.defaults.width=c,t.do_not_scale=!0,!(l=t.modelJSON.html_body))return null;for(o=function(e){var i;return t.modelJSON.polls&&(i=t.modelJSON.polls.filter(function(t){return String(t.id)===String(e)})[0])?0===i.answers.length||r.isEmpty(i.question)?"":(i.author=t.modelJSON.author,i.imageResizer=t.imageResizer,i.device_type=t.device.type,i.imageWidth=t.imageWidth,i.helpers=a,t.partials.pollTemplate(i)):""},n=[{regex:/\@\[([^\]]+)\]\(id\:(\d+)\)/g,replacement:'<a href="http://moviepilot.com/users/$2" class="b-c-mention">@$1</a>'},{regex:/<img(.*?)src="([^"]+)"([^>]*)>/gi,replacement:function(e,i,n,r){var o,s,a,l;return(s=r.match(/alt="([^"]+?)"/))&&(o=s[1]),(l=r.match(/title="([^"]+?)"/))&&(a=l[1]),t.partials.imageTemplate({url:n,alt:o,title:a,size_constraints:{width:t.imageWidth,scale:t.device.scale,do_not_scale:t.do_not_scale},imageResizer:t.imageResizer,device_type:t.device.type})}},{regex:/(?:<p>)?\[\[poll\]\](?:<\/p>)?/g,replacement:function(){var e;return(e=t.modelJSON.questionnaire_id)?o(e):""}},{regex:/(?:<p>)?\[\[poll:\d+\]\](?:<\/p>)?/g,replacement:function(t){var e;return(e=t.match(/\d+/)[0])?o(e):""}},{regex:/\[\[jwplayer:(\S{8})\]\]/g,replacement:function(t){var e,i;return(i=null!=(e=t.match(/\[\[jwplayer:(\S{8})\]\]/))?e[1]:void 0)?a.jwplayerPlaceholder({videoKey:i}):""}},{regex:/\[\[yt:([a-zA-Z0-9\-_]+)\]\]/g,replacement:function(t,e){return a.youtubePlaceholder({videoKey:e})}},{regex:/\[yt:([a-zA-Z0-9\-_]+)\]/g,replacement:function(t,e){return a.youtubePlaceholder({videoKey:e})}},{regex:/<a(\s[^>]*)+>/g,replacement:function(t,e){return~e.indexOf("http://moviepilot.com/")?t:'<a rel="nofollow" target="_blank"'+e+">"}}],e=0,i=n.length;i>e;e++)s=n[e],l=l.replace(s.regex,s.replacement);return l},a.contentParserForExpandables=function(t){var e,i,n,r,o,s,a,l,u,c,h;if(null==t.modelJSON.html_body)return"";if(t.prerender)o=t.modelJSON.html_body;else{s=t.modelJSON.html_body.replace(/<img[^>]*>/g,""),e=$(s),i=0,o="",c=e.length>=9?8:e.length-1,u=e.splice(0,c);for(a in u)n=u[a],null!=(null!=n?n.outerHTML:void 0)&&(o+=n.outerHTML)}return o=o.replace(/\@\[([^\]]+)\]\(id\:(\d+)\)/g,""),o=o.replace(/<video(.*?)\/video>?/g,""),o=o.replace(/\[\[jwplayer:(\S{8})\]\]/g,""),o=o.replace(/<iframe(.*?)\/iframe>?/g,""),o=o.replace(/\[\[yt:([a-zA-Z0-9\-_]+)\]\]/g,""),o=o.replace(/\[yt:([a-zA-Z0-9\-_]+)\]/g,""),o=o.replace(/\(Source(.*?)\)>?/g,""),o=o.replace(/(?:<p>)?\[\[poll\]\](?:<\/p>)?/g,""),o=o.replace(/(?:<p>)?\[\[poll:\d+\]\](?:<\/p>)?/g,""),r=o.indexOf("</figure>"),-1!==r?(l=o.substring(0,r+9),h=o.substring(r+9)):(l="",h=o),h=h.replace(/<figure(.*?)\/figure>?/g,""),h=h.replace(/<img\s[^>]*?src\s*=\s*['\"]([^'\"]*?)['\"][^>]*?>/g,""),o=l+h},a.isTypeOf=function(t,e){var i,n;return n=e.split("/"),i="cr"===n[0]?n[1]:n[0],r.contains(t,i)},a.isTakeoverActive=function(){var t,e;return e=o.gads.desktop.Takeover,e.enabled&&s.get("device").type.match("pc")?null!=e.country_code&&""!==e.country_code?(t=s.get("country"),new RegExp(t,"i").test(e.country_code)):!0:void 0},a.getMagazineStorySubtitle=function(t){return o.magazine_story_subtitles[""+t]},e.exports=a}).call(this,t(9))},{6:6,73:73,78:78,9:9}],51:[function(t,e,i){var n,r,o,s;r=t(6),n=t(78),s=t(12),e.exports=o=function(){function t(){}var e;return e=/res.cloudinary.com|images-cdn.moviepilot.com/,t.defaults={scale:1},t.isAnimated=function(t){return/\.gif/i.test(t)},t.makeWebM=function(t){return t.replace(/\.gif$/i,".webm")},t.makeMp4=function(t){return t.replace(/\.gif$/i,".mp4")},t.unanimate=function(t){return t.replace(/\.gif$/i,".jpg")},t.profileImageUrl=function(e,i){var n,o;return n=r["static"]+"/images/default_avatar.png",null==e?n:(o=e.avatar_image_url||e.provider_image_url||e.image_url,null==o?n:t.imageUrl(o,i))},t.imageUrl=function(e,i){var r,o,a,l,u,c;if(!e)return"";if("object"==typeof i){if(i.pc&&t.defaults.type.match(/pc/))return t.imageUrl(e,i.pc);if(i.mobile&&t.defaults.type.match(/mobile/))return t.imageUrl(e,i.mobile);if(i.tablet&&t.defaults.type.match(/tablet/))return t.imageUrl(e,i.tablet)}else c=i,i={width:c};return r=n.extend({},t.defaults,i||{}),/graph.facebook.com\/\d+\/picture/.test(e)&&(r.width||r.height)?(a={},r.width&&(a.width=Math.round(r.width*r.scale)),r.height&&(a.height=Math.round(r.height*r.scale)),e+"?"+s.stringify(a)):/googleusercontent.com/.test(e)&&(u=r.width||r.height)?e.replace(/sz=\d+$/,"sz="+u):/twimg.com/.test(e)?e.replace(/_normal.jpeg$/,".jpeg"):t._isCloudinaryUrl(e)?(r.allowPNG||(e=e.replace(/\.png$/i,".jpg")),r.isAnimated===!1&&(e=e.replace(/\.gif$/i,".jpg")),a=t.abstractDimensionsFromCloudinaryUrl(e),a.height&&a.width?(o=t._calculateNewSize(e,a,r),(l=r.scale)&&(o.width=Math.round(l*o.width),o.height=Math.round(l*o.height)),e=e.replace(/h_\d+/,"h_"+o.height),e=e.replace(/w_\d+/,"w_"+o.width),r.do_not_scale&&(e=e.replace(/c_fill/,"c_limit")),e):e):e},t.abstractDimensionsFromCloudinaryUrl=function(t){var e,i,n;return i={},(e=t.match(/h_(\d+)/))&&(i.height=parseInt(e[1],0)),(n=t.match(/w_(\d+)/))&&(i.width=parseInt(n[1],0)),i},t._paramsFromQuery=function(t){var e,i,n,r,o,s,a,l;for(a={},t=t.replace("&amp;","&"),o=t.split("&"),e=0,n=o.length;n>e;e++)r=o[e],s=r.split("="),i=s[0],l=s[1],a[i]=l;return a},t._queryStringFromParams=function(t,e){var i,r,o;return i=n.clone(t),(o=e.scale)&&(i.width=Math.round(o*i.width),i.height=Math.round(o*i.height)),r=s.stringify(i),r.length>0?"?"+r:""},t._splitUrlInPathAndQuery=function(t){var e,i,n;return(e=t.match(/^((?:https?:\/)?\/?[^:\/\s]+(?:\/\w+)*\/[\w\-\.]+[^#?\s]+)(.*)$/))?(i=e[1],n=e[2].replace(/^\?/,""),{path:i,query:n}):{}},t._calculateNewSize=function(t,e,i){var n,r,o,s;return i.height||i.width?(s=i.width,r=i.height,o={width:s,height:r},n=+e.width/+e.height,o.height||(o.height=Math.round(o.width/n)),o.width||(o.width=Math.round(n*o.height)),this.isAnimated(t)&&(o.height>+e.height&&(o.width/=o.height/+e.height,o.height/=o.height/+e.height),o.width>+e.width&&(o.height/=o.width/+e.width,o.width/=o.width/+e.width)),o):e},t._isCloudinaryUrl=function(t){return t?!!t.match(e):!1},t}()},{12:12,6:6,78:78}],52:[function(t,e,i){var n=t(78),r=t("backbone"),o={trace:!0,logPrefix:"[app]:",log:function(){var t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[];if(this.trace)return this.logPrefix&&t.unshift(this.logPrefix),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,t),this}};n.extend(r.Collection.prototype,o),n.extend(r.Model.prototype,o),n.extend(r.View.prototype,o),n.extend(r.Router.prototype,o),e.exports=r.Log=o},{78:78,backbone:"backbone"}],53:[function(t,e,i){!function(n){"function"==typeof define&&define.amd?define(["backbone","underscore"],n):"object"==typeof i?e.exports=n(t("backbone"),t(78)):n(window.Backbone,window._)}(function(t,e){var i=t.Router.prototype.route,n=function(){};e.extend(t.Router.prototype,{before:n,after:n,route:function(t,r,o){o||(o=this[r]);var s=e.bind(function(){var i,r=[t,e.toArray(arguments)];if(i=e.isFunction(this.before)?this.before:"undefined"!=typeof this.before[t]?this.before[t]:n,i.apply(this,r)!==!1){o&&o.apply(this,arguments);var s;s=e.isFunction(this.after)?this.after:"undefined"!=typeof this.after[t]?this.after[t]:n,s.apply(this,r)}},this);return i.call(this,t,r,s)}})})},{78:78,backbone:"backbone"}],54:[function(t,e,i){var n,r=function(t,e){return function(){return t.apply(e,arguments)}};n=function(){function t(t,e){this.el=t,this._touchend=r(this._touchend,this),this._touchmove=r(this._touchmove,this),this._touchstart=r(this._touchstart,this),this._clearAnimation=r(this._clearAnimation,this),this._delayedReset=r(this._delayedReset,this),this.reset=r(this.reset,this),this.options=$.extend({duration:600,overlap:220,startSlide:0,stopPropagation:!1,onChange:this._noop,onStart:this._noop,onMove:this._noop,speed:0},e),this._3d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix&&!$.os.android,this.transform="webkitTransform"in this.el.style?"webkitTransform":"transform",this._isIE=$.browser.ie,this.transition="webkitTransitionDuration"in this.el.style?"webkitTransitionDuration":"transitionDuration",this.$el=$(this.el),this.$sliderEl=this.$el.children(".is-slider"),this.$sliderEl.length||(this.$sliderEl=this.$el.children(":first-child")),this.$slidesEl=this.$sliderEl.children(),this.$win=$(window),this.touch={},this.capturing=!1,this.animated=!1,this.currentSlide=this.options.startSlide,this.length=this.$slidesEl.length,$.os.ios?this.$win.on("orientationchange load",this.reset):this.$win.on("orientationchange load",this._delayedReset),this.$sliderEl.on("webkitTransitionEnd transitionend",this._clearAnimation),this.$el.on("touchstart",this._touchstart),this.$el.on("touchmove",this._touchmove),this.$el.on("touchend",this._touchend),this.$el.on("touchcancel",this._touchend),this._isIE&&this.$el.addClass("notransitions"),setTimeout(this.reset,0)}return t.prototype._startSwipeThreshold=$.os.ios?10:5,t.prototype._startScrollThreshold=$.os.ios?30:10,t.prototype._endSwipeThreshold=20,t.prototype._endScrollThreshold=60,t.prototype._resetDelayAfterOrientationChange=300,t.prototype._noop=function(){},t.prototype.getItemsWidth=function(){var t,e,i,n,r;for(t=0,r=this.$slidesEl,e=0,n=r.length;n>e;e++)i=r[e],t+=$(i).width();return this.itemsWidth=t},t.prototype.reset=function(){return this.width=this.$el.width(),this.options.variableWidth&&(this.length=Math.ceil(this.getItemsWidth()/this.width)),this.move(-(this.currentSlide*this.width))},t.prototype._delayedReset=function(){return setTimeout(this.reset,this._resetDelayAfterOrientationChange)},t.prototype.move=function(t){return this._isIE?this.$sliderEl[0].style.left=t+"px":this.$sliderEl[0].style[this.transform]=this._3d?"translate3d("+t+"px, 0, 0)":"translateX("+t+"px)",this.position=t,this.options.onMove(t,this)},t.prototype.animate=function(t,e){return null==e&&(e=this.options.duration),this.$sliderEl[0].style[this.transition]=e+"ms",this.animated=!0,this.move(t)},t.prototype._clearAnimation=function(){return this.$sliderEl[0].style[this.transition]="0ms",this.animated=!1},t.prototype.moveTo=function(t,e){
var i;return null==e&&(e={}),i=Math.max(0,Math.min(t,this.length-1)),t===this.currentSlide||i===this.currentSlide?!1:(this.currentSlide=i,this.move(this.options.variableWidth?-Math.min(this.currentSlide*this.width,this.itemsWidth-this.width):-(this.currentSlide*this.width)),e.silent||this.options.onChange(this.current,this),this.current)},t.prototype.animateTo=function(t,e){var i;return null==e&&(e={}),i=Math.max(0,Math.min(t,this.length-1)),t===this.currentSlide||i===this.current?!1:(this.currentSlide=i,this.animate(this.options.variableWidth?-Math.min(this.currentSlide*this.width,this.itemsWidth-this.width):-(this.currentSlide*this.width)),e.silent||this.options.onChange(this.currentSlide,this),this.currentSlide)},t.prototype._touchstart=function(t){var e;if(!(t.originalEvent.touches.length>1))return this.options.stopPropagation&&t.stopPropagation(),e=t.originalEvent.touches?t.originalEvent.touches[0]:t.originalEvent,this.touch.x=e.pageX,this.touch.y=e.pageY,this.touch.ts=Date.now(),this.touch.origin=this.position},t.prototype._touchmove=function(t){var e,i;if(!(t.originalEvent.touches.length>1))return this.options.stopPropagation&&t.stopPropagation(),this.capturing||(e=t.originalEvent.touches[0].pageX-this.touch.x,i=t.originalEvent.touches[0].pageY-this.touch.y,Math.abs(i)<this._startScrollThreshold&&Math.abs(e)>this._startSwipeThreshold&&(this.animated&&this._clearAnimation(),this.capturing=!0,this.options.onStart(this.touch,this))),this._capture(t)},t.prototype._capture=function(t){var e;if(this.capturing)return t.preventDefault(),this.touch.xOffset=this.touch.x-t.originalEvent.touches[0].pageX,e=t.originalEvent.touches[0].pageX,this.touch.lastTime&&(this.touch.speed=(e-this.touch.lastPageX)/(Date.now()-this.touch.lastTime)),this.touch.lastTime=Date.now(),this.touch.lastPageX=e,this.move(this._currentXOffset())},t.prototype._currentXOffset=function(){var t;return t=-(this.touch.xOffset-this.touch.origin),this.options.variableWidth?Math.max(Math.min(t,this.options.overlap),-(this.itemsWidth-this.width)-this.options.overlap):Math.max(Math.min(t,this.options.overlap),-(this.width*(this.length-1))-this.options.overlap)},t.prototype._touchend=function(t){var e,i,n,r,o,s,a;if(this.capturing)return this.options.stopPropagation&&t.stopPropagation(),s=this.currentSlide,a=Math.max(200/this.options.duration,Math.abs(this.touch.speed)),r=a>.5,o=Math.abs(this.touch.xOffset)>this.width/5,r?this.currentSlide+=this.touch.xOffset>0?1:-1:o&&(this.currentSlide+=Math.round(this.touch.xOffset/this.width)),this.currentSlide=Math.max(0,Math.min(this.currentSlide,this.length-1)),s!==this.currentSlide&&this.options.onChange(this.currentSlide,this),n=this.options.variableWidth?-Math.min(this.currentSlide*this.width,this.itemsWidth-this.width):-this.currentSlide*this.width,e=this._currentXOffset()-n,i=Math.abs(e)/a,this.animate(n,i),this.touch={},this.capturing=!1},t.prototype.destroy=function(){return $.os.ios?this.$win.off("orientationchange load",this.reset):this.$win.off("orientationchange load",this._delayedReset),this.$sliderEl.off("webkitTransitionEnd transitionend",this._clearAnimation),this.$el.off("touchstart",this._touchstart),this.$el.off("touchmove",this._touchmove),this.$el.off("touchend",this._touchend),this.$el.off("touchcancel",this._touchend)},t}(),$.iSwipe=n,$.fn.iSwipe=function(t){return this.length?new n(this[0],t):void 0}},{}],55:[function(t,e,i){!function(t){function e(t){var e=this.os={},i=this.browser={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=l&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),f=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),v=t.match(/Firefox\/([\d.]+)/),y=t.match(/MSIE ([\d.]+)/),_=n&&t.match(/Mobile\//)&&!m,b=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,y=t.match(/MSIE\s([\d.]+)/);(i.webkit=!!n)&&(i.version=n[1]),r&&(e.android=!0,e.version=r[2]),a&&!s&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null),l&&(e.webos=!0,e.version=l[2]),u&&(e.touchpad=!0),p&&(e.blackberry=!0,e.version=p[2]),d&&(e.bb10=!0,e.version=d[2]),f&&(e.rimtabletos=!0,e.version=f[2]),g&&(i.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),h&&(i.silk=!0,i.version=h[1]),!h&&e.android&&t.match(/Kindle Fire/)&&(i.silk=!0),m&&(i.chrome=!0,i.version=m[1]),v&&(i.firefox=!0,i.version=v[1]),y&&(i.ie=!0,i.version=y[1]),_&&(t.match(/Safari/)||e.ios)&&(i.safari=!0),b&&(i.webview=!0),y&&(i.ie=!0,i.version=y[1]),e.tablet=!!(o||g||r&&!t.match(/Mobile/)||v&&t.match(/Tablet/)||y&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(r||a||l||p||d||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||v&&t.match(/Mobile/)||y&&t.match(/Touch/)))}e.call(t,navigator.userAgent),t.__detect=e}(window.jQuery||window.$)},{}],56:[function(t,e,i){!function(t){t.fn.unveil=function(e,i){function n(){var e=u.filter(function(){var e=t(this);if(!e.is(":hidden")){var i=o.scrollTop(),n=i+o.height(),r=e.offset().top,a=r+e.height();return a>=i-s&&n+s>=r}});r=e.trigger("unveil"),u=u.not(r)}var r,o=t(window),s=e||0,a=window.devicePixelRatio>1,l=a?"data-src-retina":"data-src",u=this;return this.one("unveil",function(){var t=this.getAttribute(l);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),o.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery||window.Zepto)},{}],57:[function(t,e,i){!function(t){var i={};i.viewportmeta=t.querySelector&&t.querySelector('meta[name="viewport"]'),i.ua=navigator.userAgent,i.scaleFix=function(){i.viewportmeta&&/iPhone|iPad|iPod/.test(i.ua)&&!/Opera Mini/.test(i.ua)&&(i.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",t.addEventListener("gesturestart",i.gestureStart,!1))},i.gestureStart=function(){i.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},i.BODY_SCROLL_TOP=!1,i.getScrollTop=function(){var e=window,i=t;return e.pageYOffset||"CSS1Compat"===i.compatMode&&i.documentElement.scrollTop||i.body.scrollTop||0},i.hideUrlBar=function(){var t=window;location.hash||i.BODY_SCROLL_TOP===!1||t.scrollTo(0,1===i.BODY_SCROLL_TOP?0:1)},i.hideUrlBarOnLoad=function(){var t,e=window,n=e.document;!location.hash&&e.addEventListener&&(window.scrollTo(0,1),i.BODY_SCROLL_TOP=1,t=setInterval(function(){n.body&&(clearInterval(t),i.BODY_SCROLL_TOP=i.getScrollTop(),i.hideUrlBar())},15),e.addEventListener("load",function(){setTimeout(function(){i.getScrollTop()<20&&i.hideUrlBar()},0)}))},i.enableActive=function(){t.addEventListener("touchstart",function(){},!1)},i.preventScrolling=function(){t.addEventListener("touchmove",function(t){"range"!==t.target.type&&t.preventDefault()},!1)},i.preventZoom=function(e){e||(e=t.querySelectorAll("input, select, textarea"));for(var n="width=device-width,initial-scale=1,maximum-scale=",r=0,o=e.length,s=function(){i.viewportmeta.content=n+"1"},a=function(){i.viewportmeta.content=n+"10"};o>r;r++)e[r].onfocus=s,e[r].onblur=a},e.exports=i}(document)},{}],58:[function(t,e,i){e.exports='<!--/* OpenX IFrame tag */-->\n<iframe id="555dcbe8a6" name="555dcbe8a6" src="http://us-ads.openx.net/mw/1.0/afr?auid=537964490&cb=INSERT_RANDOM_NUMBER_HERE" frameBorder="0" frameSpacing="0" scrolling="no" width="300" height="250"><a href="http://us-ads.openx.net/mw/1.0/rc?cs=555dcbe8a6&cb=INSERT_RANDOM_NUMBER_HERE" ><img src="http://us-ads.openx.net/mw/1.0/ai?auid=537964490&cs=555dcbe8a6&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe>\n'},{}],59:[function(t,e,i){e.exports='<!--/* OpenX IFrame tag */-->\n<iframe id="454d1672cf" name="454d1672cf" src="http://us-ads.openx.net/mw/1.0/afr?auid=537964491&cb=INSERT_RANDOM_NUMBER_HERE" frameBorder="0" frameSpacing="0" scrolling="no" width="300" height="250"><a href="http://us-ads.openx.net/mw/1.0/rc?cs=454d1672cf&cb=INSERT_RANDOM_NUMBER_HERE" ><img src="http://us-ads.openx.net/mw/1.0/ai?auid=537964491&cs=454d1672cf&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe>\n'},{}],60:[function(t,e,i){e.exports='<div id="537411045_INSERT_SLOT_ID_HERE" style="width:300px;height:250px;margin:0;padding:0">\n  <noscript><iframe id="31bb2dd9f9" name="31bb2dd9f9" src="http://us-ads.openx.net/w/1.0/afr?auid=537411045&cb=INSERT_RANDOM_NUMBER_HERE" frameborder="0" scrolling="no" width="300" height="250"><a href="http://us-ads.openx.net/w/1.0/rc?cs=31bb2dd9f9&cb=INSERT_RANDOM_NUMBER_HERE" ><img src="http://us-ads.openx.net/w/1.0/ai?auid=537411045&cs=31bb2dd9f9&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe></noscript>\n</div>\n<script type="text/javascript">\n  var OX_ads = OX_ads || [];\n  OX_ads.push({\n     slot_id: "537411045_INSERT_SLOT_ID_HERE",\n     auid: "537411045"\n  });\n</script>\n\n<script type="text/javascript" src="http://us-ads.openx.net/w/1.0/jstag"></script>\n'},{}],61:[function(t,e,i){e.exports='<div id="537964489_INSERT_SLOT_ID_HERE" style="width:300px;height:600px;margin:0;padding:0">\n  <noscript><iframe id="97139b20e0" name="97139b20e0" src="http://us-ads.openx.net/w/1.0/afr?auid=537964489&cb=INSERT_RANDOM_NUMBER_HERE" frameborder="0" scrolling="no" width="300" height="600"><a href="http://us-ads.openx.net/w/1.0/rc?cs=97139b20e0&cb=INSERT_RANDOM_NUMBER_HERE" ><img src="http://us-ads.openx.net/w/1.0/ai?auid=537964489&cs=97139b20e0&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe></noscript>\n</div>\n<script type="text/javascript">\n  var OX_ads = OX_ads || [];\n  OX_ads.push({\n     slot_id: "537964489_INSERT_SLOT_ID_HERE",\n     auid: "537964489"\n  });\n</script>\n\n<script type="text/javascript" src="http://us-ads.openx.net/w/1.0/jstag"></script>\n'},{}],62:[function(t,e,i){e.exports='<div id="537964488_INSERT_SLOT_ID_HERE" style="width:728px;height:90px;margin:0;padding:0">\n  <noscript><iframe id="cc6bbfddb1" name="cc6bbfddb1" src="http://us-ads.openx.net/w/1.0/afr?auid=537964488&cb=INSERT_RANDOM_NUMBER_HERE" frameborder="0" scrolling="no" width="728" height="90"><a href="http://us-ads.openx.net/w/1.0/rc?cs=cc6bbfddb1&cb=INSERT_RANDOM_NUMBER_HERE" ><img src="http://us-ads.openx.net/w/1.0/ai?auid=537964488&cs=cc6bbfddb1&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe></noscript>\n</div>\n<script type="text/javascript">\n  var OX_ads = OX_ads || [];\n  OX_ads.push({\n     slot_id: "537964488_INSERT_SLOT_ID_HERE",\n     auid: "537964488"\n});\n</script>\n\n<script type="text/javascript" src="http://us-ads.openx.net/w/1.0/jstag"></script>\n'},{}],63:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t){i.push(t?'<span class="b-c-scrollbar pushed"></span><ul class="b-c-menu"><li data-type="community" class="active">Community</li><li data-type="notifications">@'+n.escape(null==(e=n.helpers.getProfileHandle(t))?"":e)+"</li></ul>":'<span class="b-c-scrollbar"></span>'),i.push('<div class="b-c-wrap"><div class="b-c-list"></div></div><div class="b-c-status"><div class="b-c-loading">Loading...</div><div class="b-c-empty">There is nothing to show</div><div class="b-c-error">Couldn\'t connect...</div></div>')}.call(this,"user"in r?r.user:"undefined"!=typeof user?user:void 0),i.join("")}},{76:76}],64:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t){i.push('<div class="b-community_item"><a'+n.attr("href",n.helpers.getProfileUrl(t),!0,!1)+' data-track="navigate:user_profile:sidebar" class="b-ci-wrap"><span class="b-ci-image b-ci-link"><img'+n.attr("src",n.resize.profileImageUrl(t,{width:33,height:33,isAnimated:!1}),!0,!1)+n.attr("alt",t.name,!0,!1)+'/></span><div class="b-ci-content">'+n.escape(null==(e=t.name||t.user_name)?"":e)+"</div></a></div>")}.call(this,"agent"in r?r.agent:"undefined"!=typeof agent?agent:void 0),i.join("")}},{76:76}],65:[function(t,e,i){t(76);e.exports=function(t){var e=[];return e.push('<div class="b-l-process"><div class="m-spinner"><i class="icon-spin"></i></div></div><div class="b-l-faiure">There was a problem with this request, please try&#32;<a href="javascript:window.location.reload()">refreshing this page</a>.</div>'),e.join("")}},{76:76}],66:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r={},o=t||{};return function(t,o,s,a){{var l=n.helpers.getUrl(s.root||s);"subscription"===a?"followed":a.replace("new_","")+"ed"}r["mx-userpic"]=function(t,e){this&&this.block,this&&this.attributes||{};i.push("<div"+n.attr("data-user",e,!0,!1)+' class="mx-userpic"><img'+n.attr("src",t,!0,!1)+"/></div>")},i.push("<li"+n.attr("data-href",""===l?void 0:l,!0,!1)+' data-track="navigate:notification-target:notifications" class="p-n-item"><div class="p-n-i-wrapper"><div class="p-n-i-avatar">'),r["mx-userpic"](n.resize.profileImageUrl(t,{width:40,height:40,isAnimated:!1})),i.push('</div><div class="p-n-i-body"><span class="p-n-i-author_name">'+n.escape(null==(e=t.name)?"":e)+'</span><span class="p-n-i-info">left a message:</span><a'+n.attr("href",""===l?void 0:l,!0,!1)+' data-track="navigate:notification-target:notifications" class="p-n-i-content_text">'+n.escape(null==(e=s.plaintext_body)?"":e)+'</a><div class="p-n-i-timestamp">'+(null==(e=n.helpers.dateFormatSince(o))?"":e)),s.root&&i.push("&nbsp;in&nbsp;<span>"+n.escape(null==(e=s.root.title)?"":e)+"</span>"),i.push("</div></div></div></li>")}.call(this,"agent"in o?o.agent:"undefined"!=typeof agent?agent:void 0,"created_at"in o?o.created_at:"undefined"!=typeof created_at?created_at:void 0,"subject"in o?o.subject:"undefined"!=typeof subject?subject:void 0,"type"in o?o.type:"undefined"!=typeof type?type:void 0),i.join("")}},{76:76}],67:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t,r,o,s){i.push('<li class="b-s-title">Settings</li><li class="b-s-save_msg">Saved</li><li class="b-s-row"><div class="b-s-label">Name</div><div class="b-s-value">'+n.escape(null==(e=s.name)?"":e)+'</div></li><li class="b-s-row"><div class="b-s-label">Email</div><div class="b-s-value">'+n.escape(null==(e=s.email)?"":e)+'</div></li><li class="b-s-row user_name-row"><label for="user_name" class="b-s-label">User name</label><input id="user_name" placeholder="Choose username"'+n.attr("value",s.user_name,!0,!1)+' class="b-s-input"/><div class="b-s-row_msg"></div></li><li class="b-s-row location-row"><label for="location" class="b-s-label">Location</label><input id="location" placeholder="Where are you?"'+n.attr("value",s.location,!0,!1)+' class="b-s-input"/><div class="b-s-row_msg"></div></li><li class="b-s-row description-row"><label for="description" class="b-s-label">Bio</label><input id="description" placeholder="Who are you?"'+n.attr("value",s.description,!0,!1)+' class="b-s-input"/><div class="b-s-row_msg"></div></li>'),function(){var r=t;if("number"==typeof r.length)for(var o=0,s=r.length;s>o;o++){var a=r[o];i.push("<li"+n.attr("data-name",a.name,!0,!1)+' class="b-s-row has-checkbox"><div class="b-s-label">'+n.escape(null==(e=a.label)?"":e)+"</div><div"+n.cls(["b-s-checkbox",a.value?"is-marked":""],[null,!0])+'><i class="icon-check"></i><i class="icon-check-empty"></i></div>'),a.hint&&i.push('<div class="b-s-row_msg">'+n.escape(null==(e=a.hint)?"":e)+"</div>"),i.push("</li>")}else{var s=0;for(var o in r){s++;var a=r[o];i.push("<li"+n.attr("data-name",a.name,!0,!1)+' class="b-s-row has-checkbox"><div class="b-s-label">'+n.escape(null==(e=a.label)?"":e)+"</div><div"+n.cls(["b-s-checkbox",a.value?"is-marked":""],[null,!0])+'><i class="icon-check"></i><i class="icon-check-empty"></i></div>'),a.hint&&i.push('<div class="b-s-row_msg">'+n.escape(null==(e=a.hint)?"":e)+"</div>"),i.push("</li>")}}}.call(this),i.push('<li data-name="allow_edits" class="b-s-row has-checkbox"><div class="b-s-label"><span class="is-mobile">I wish for my posts to be optimized for promotion</span><span class="is-desktop">I wish for my posts to be optimized for search and promotion on MP social pages</span></div><div'+n.cls(["b-s-checkbox",s.preferences.allow_edits?"is-marked":""],[null,!0])+'><i class="icon-check"></i><i class="icon-check-empty"></i></div><div class="b-s-row_msg"><span class="is-mobile">Un-checking this box means we probably cant promote your posts on FB, Twitter, G+ or moviepilot.com</span><span class="is-desktop">Please note:  If you UNCHECK this box, we wont edit your post or images, but we probably wont be able to promote your posts on Facebook, Twitter, Google, or on Moviepilot.com. </span></div></li>'),r&&i.push('<li class="b-s-buttons"><button class="pure-button is-active is-white b-s-cancel_btn">Cancel</button><button class="pure-button is-green b-s-save_btn">Save</button></li>')}.call(this,"fields"in r?r.fields:"undefined"!=typeof fields?fields:void 0,"saveButtons"in r?r.saveButtons:"undefined"!=typeof saveButtons?saveButtons:void 0,"undefined"in r?r.undefined:void 0,"user"in r?r.user:"undefined"!=typeof user?user:void 0),i.join("")}},{76:76}],68:[function(t,e,i){var n=t(76);e.exports=function(t){var e=[],i=t||{};return function(t,i){e.push('<div class="b-overlay_ad is-hidden"><div class="b-o-header"><div class="b-o-h-logo"><svg viewBox="0 0 342 71" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="moviepilot" fill="#000000">\n        <path d="M0,70.504 L0.03,0.496 L12.402,0.496 L22.998,31.21 L34.305,0.511 L47.03,0.511 L47.03,70.496 L33.58,70.496 L33.58,39.143 L27.238,57.424 L19.337,57.424 L13.457,38.798 L13.457,70.496 L0,70.504 L0,70.504 Z M129,0.496 L143,0.496 L143,70.496 L129,70.496 L129,0.496 L129,0.496 Z M180,14.496 L180,0.496 L161,0.496 L147,0.496 L147,14.496 L147,27.496 L147,41.496 L147,56.496 L147,70.496 L161,70.496 L180,70.496 L180,56.496 L161,56.496 L161,41.496 L180,41.496 L180,27.496 L161,27.496 L161,14.496 L180,14.496 L180,14.496 Z M93.486,32.806 L101.482,70.496 L112.516,70.496 L126.999,0.496 L112.857,0.496 L107,36.721 L101.138,0.496 L87,0.496 L93.486,32.806 Z M220,0.496 L234,0.496 L234,70.496 L220,70.496 L220,0.496 L220,0.496 Z M264.323,56.496 L252,56.496 L252,0.496 L238,0.496 L238,56.496 L238,70.496 L252,70.496 L272,70.496 L264.323,56.496 L264.323,56.496 Z M342,0.496 L301,0.496 L308.553,14.496 L316,14.496 L316,70.496 L330,70.496 L330,14.496 L342,14.496 L342,0.496 L342,0.496 Z M218,22.114 C218,1.156 203.86,0.479 196,0.497 L196,0.496 L182,0.496 L182,70.496 L196,70.496 L196,45.484 C206.04,45.343 218,43.495 218,22.114 L218,22.114 Z M205.239,26.72 C205.239,32.886 200.083,32.429 196,32.392 L196,13.527 C203.29,12.726 205.239,15.124 205.239,17.863 L205.239,26.72 L205.239,26.72 Z M69,0.496 C59.525,0.496 51.76,7.753 51.052,16.967 L51,52.653 C51,62.507 59.059,70.496 69,70.496 C78.941,70.496 87,62.507 87,52.653 L87,16.967 C86.241,7.754 78.475,0.496 69,0.496 L69,0.496 Z M73.5,53.717 C73.5,56.177 71.485,58.172 69,58.172 C66.515,58.172 64.5,56.177 64.5,53.717 L64.513,16.932 C64.69,14.632 66.631,12.82 69,12.82 C71.369,12.82 73.31,14.632 73.5,16.932 L73.5,53.717 L73.5,53.717 Z M286.333,0.496 C276.858,0.496 269.093,7.753 268.385,16.967 L268.333,52.653 C268.333,62.507 276.392,70.496 286.333,70.496 C296.274,70.496 304.333,62.507 304.333,52.653 L304.333,16.967 C303.574,7.754 295.809,0.496 286.333,0.496 L286.333,0.496 Z M290.833,53.717 C290.833,56.177 288.818,58.172 286.333,58.172 C283.848,58.172 281.833,56.177 281.833,53.717 L281.846,16.932 C282.023,14.632 283.964,12.82 286.333,12.82 C288.702,12.82 290.643,14.632 290.833,16.932 L290.833,53.717 L290.833,53.717 Z" id="Shape"></path>\n    </g>\n</svg></div><div class="b-o-h-continue">Continue...</div></div><div class="b-o-body"><a'+n.attr("href",""+t,!0,!1)+' class="b-oa-link"><img'+n.attr("src",""+i,!0,!1)+' class="b-oa-image"/></a></div></div>')}.call(this,"href"in i?i.href:"undefined"!=typeof href?href:void 0,"imageUrl"in i?i.imageUrl:"undefined"!=typeof imageUrl?imageUrl:void 0),e.join("")}},{76:76}],69:[function(t,e,i){var n=t(76);e.exports=function(t){var e=[],i=t||{};return function(t,i,r){e.push("<div"+n.attr("id","div-gpt-ad-"+t,!0,!1)+n.attr("style","width:"+r+"px;",!0,!1)+n.cls(["m-gads","google-ad-"+i],[null,!0])+"></div>")}.call(this,"id"in i?i.id:"undefined"!=typeof id?id:void 0,"name"in i?i.name:"undefined"!=typeof name?name:void 0,"width"in i?i.width:"undefined"!=typeof width?width:void 0),e.join("")}},{76:76}],70:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t,r){var o="http://images-cdn.moviepilot.com/image/upload/v1427727666/http_imageserver.moviepilot.com_-08748d26-8ea2-401d-999f-728fe0ef6088_rj2i1f.jpg",s=null,a=null,l=null;(function(){var r=t;if("number"==typeof r.length)for(var u=0,c=r.length;c>u;u++){var h=r[u];"user"==h.type?(s=n.helpers.shorten(h.additional_data.description,90),a=h.additional_data.verified,l=n.resize.profileImageUrl({image_url:h.additional_data.icon},300)):(a=h.type,l=n.resize.imageUrl(h.additional_data.icon||o,300),("post"==h.type||"review"==h.type)&&(s="by "+h.additional_data.author.name),"movie"==h.type&&(s=n.helpers.dateFormat(h.additional_data.theatrical_release_date)),"series"==h.type&&(s=h.additional_data.timeslot||n.helpers.capFirst(h.additional_data.status||"")),"tag"==h.type&&(s="Tag",a="topic"),"channel"==h.type&&(s=n.helpers.choosePlural(h.additional_data.projects_count,["movie","movies"]),a="genre"),!s&&h.additional_data.movie_subscription_count&&(s="Following "+n.helpers.choosePlural(h.additional_data.movie_subscription_count,["movie","movies"]))),i.push("<li"+n.cls(["m-s-item","is-"+a],[null,!0])+"><a"+n.attr("href","/"+h.id,!0,!1)+' class="m-s-i-wrap"><span'+n.attr("style","background-image: url('"+l+"')",!0,!1)+' class="m-s-i-image"></span>'),"review"==a&&i.push("<div"+n.attr("data-rating",h.additional_data.reviewer_rating,!0,!1)+' class="m-s-i-rating_widget rating-widget"></div>'),i.push('<div class="m-s-i-type">'+n.escape(null==(e=a)?"":e)+'</div><div class="m-s-i-content"><strong class="m-s-i-title">'+n.escape(null==(e=h.name)?"":e)+"</strong>"),s&&i.push('<span class="m-s-i-details">'+(null==(e=s)?"":e)+"</span>"),i.push("</div></a></li>")}else{var c=0;for(var u in r){c++;var h=r[u];"user"==h.type?(s=n.helpers.shorten(h.additional_data.description,90),a=h.additional_data.verified,l=n.resize.profileImageUrl({image_url:h.additional_data.icon},300)):(a=h.type,l=n.resize.imageUrl(h.additional_data.icon||o,300),("post"==h.type||"review"==h.type)&&(s="by "+h.additional_data.author.name),"movie"==h.type&&(s=n.helpers.dateFormat(h.additional_data.theatrical_release_date)),"series"==h.type&&(s=h.additional_data.timeslot||n.helpers.capFirst(h.additional_data.status||"")),"tag"==h.type&&(s="Tag",a="topic"),"channel"==h.type&&(s=n.helpers.choosePlural(h.additional_data.projects_count,["movie","movies"]),a="genre"),!s&&h.additional_data.movie_subscription_count&&(s="Following "+n.helpers.choosePlural(h.additional_data.movie_subscription_count,["movie","movies"]))),i.push("<li"+n.cls(["m-s-item","is-"+a],[null,!0])+"><a"+n.attr("href","/"+h.id,!0,!1)+' class="m-s-i-wrap"><span'+n.attr("style","background-image: url('"+l+"')",!0,!1)+' class="m-s-i-image"></span>'),"review"==a&&i.push("<div"+n.attr("data-rating",h.additional_data.reviewer_rating,!0,!1)+' class="m-s-i-rating_widget rating-widget"></div>'),i.push('<div class="m-s-i-type">'+n.escape(null==(e=a)?"":e)+'</div><div class="m-s-i-content"><strong class="m-s-i-title">'+n.escape(null==(e=h.name)?"":e)+"</strong>"),s&&i.push('<span class="m-s-i-details">'+(null==(e=s)?"":e)+"</span>"),i.push("</div></a></li>")}}}).call(this)}.call(this,"results"in r?r.results:"undefined"!=typeof results?results:void 0,"undefined"in r?r.undefined:void 0),i.join("")}},{76:76}],71:[function(t,e,i){t(76);e.exports=function(t){var e=[];return e.push('<div class="p-e-header-container"><div class="p-e-header"><h1>Whoa there!</h1><p>Nothing to see here, move along.<br/>Here\'s some other cool pages to check out:</p></div></div><div class="p-e-stream"></div>'),e.join("")}},{76:76}],72:[function(t,e,i){t(76);e.exports=function(t){var e=[];return e.push('<h1 class="p-n-title">Notifications<i class="icon-cancel-1 p-n-t-close"></i></h1><div class="p-n-body"><ul class="p-n-list"></ul><div class="p-n-show_more">Show more<i class="icon-down-open"></i></div></div>'),e.join("")}},{76:76}],73:[function(t,e,i){(function(i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};r=t(78),n=function(){function t(){this.create=o(this.create,this)}var e;return t.prototype.attributes=(null!=(e=i.app)?e.env:void 0)||{},t.prototype.create=function(t,e,i){return this.attributes=e.locals.env={},i()},t.prototype.set=function(t,e){var i,n;if("string"==typeof t)this.attributes[t]=e;else for(i in t)n=t[i],this.attributes[i]=n;return this},t.prototype.unset=function(t){return delete this.attributes[t],this},t.prototype.get=function(t){return this.attributes[t]},t.prototype.has=function(t){return!!this.attributes[t]},t.prototype.clear=function(){var t;for(t in this.attributes)this.unset(t);return this},t.prototype.toJSON=function(){return r.clone(this.attributes)},t}(),e.exports=new n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{78:78}],74:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t,r){var o="stream-story",s=n.helpers.hasCover(r);i.push("<div"+n.cls(["b-stream_item","pure-g","is-"+r.type+" "+(s?"":"has-no_cover")],[null,null,!0])+">"),s&&(i.push('<div class="b-si-img_wrapper pure-u-1 pure-u-md-1-2"><img'+n.attr("src",n.resize.imageUrl(r.cover_image_url,{width:320,height:200,isAnimated:!1}),!0,!1)+"/>"),"review"==r.type&&i.push('<div class="b-si-rating">'+n.escape(null==(e=n.helpers.numberFormat(r.reviewer_rating,!0))?"":e)+'</div><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 157.1 162.3" enable-background="new 0 0 157.1 162.3"><path fill="#fff" d="M78.6 140l3.6 7.3 8.1 1.2-5.9 5.7 1.4 8.1-7.3-3.8-7.3 3.8 1.4-8.1-5.9-5.7 8.1-1.2 3.8-7.3zm0-140C35.2 0 0 35.2 0 78.6c0 29.7 16.6 55.7 41 69l5.3-9.6C25.3 126.5 11 104.1 11 78.6 11 41.3 41.3 11 78.6 11c37.2 0 67.6 30.3 67.6 67.6 0 26.8-15.7 50-38.4 60.9l4.6 10c26.5-12.6 44.8-39.7 44.8-70.9C157.1 35.2 121.9 0 78.6 0z"/></svg>\n</div>'),i.push("</div>")),i.push("<div"+n.cls(["b-si-data_wrapper","pure-u-1",""+(s?"pure-u-md-1-2":"")],[null,null,!0])+"><img"+n.attr("src",n.resize.profileImageUrl(r.author,{width:35,height:35,isAnimated:!1}),!0,!1)+' class="b-si-avatar"/><div class="b-si-data"><h4 class="b-si-title"><a'+n.attr("href",n.helpers.getUrl(r),!0,!1)+n.attr("data-track","navigate:post:"+o,!0,!1)+">"+n.escape(null==(e=r.title)?"":e)+"</a></h4><a"+n.attr("href",n.helpers.getProfileUrl(r.author),!0,!1)+n.attr("data-track","navigate:user_profile:"+o,!0,!1)+' class="b-si-author_name">'+n.escape(null==(e=r.author.name||r.author.user_name)?"":e)+"&nbsp;</a></div>");var a=r.why_this_is_here||{};r.in_reply_to?i.push(n.helpers.isSameDay(r.first_published_at,t.now())?'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(r.in_reply_to)+'">this post</a> '+n.helpers.dateFormatSince(r.first_published_at))?"":e)+"</div>":'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(r.in_reply_to)+'">this post</a> on '+n.helpers.dateTimeToString(r.first_published_at))?"":e)+"</div>"):"post"===a.action?i.push("<!-- user you follow wrote a post--><!-- if thats the case, we don't add any UI but want to--><!-- prevent the catch all error UI, so dont delete this if-clause-->"):"promotion"===a.action?i.push('<!-- tag you follow got new promoted post--><div class="b-si-reason"><div><svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M500 191.313L327.53 165 250 0l-77.53 165L0 191.313l124.766 127.75L95.234 500 250 414.53 404.766 500l-29.532-180.938L500 191.313"/></g></g></svg></div><a'+n.attr("href",n.helpers.getUrl(a.actor),!0,!1)+n.attr("data-track","navigate:tagPage:"+o,!0,!1)+">"+n.escape(null==(e=a.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(a.action_date,{format:"supershort"}))?"":e)+"</div>"):"recommendation"===a.action?i.push(a.actor.name?'<!-- user you follow recommended post he likes--><div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a'+n.attr("href",n.helpers.getProfileUrl(a.actor),!0,!1)+n.attr("data-track","navigate:userProfile:"+o,!0,!1)+">"+n.escape(null==(e=a.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(a.action_date,{format:"supershort"}))?"":e)+"</div>":'<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+o,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(a.action_date,{format:"supershort"}))?"":e)+"</div>"):"homepage_promotion"===a.action?i.push('<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+o,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(a.action_date,{format:"supershort"}))?"":e)+"</div>"):a.action&&i.push('<div class="b-si-reason">Unknown reason type:'+n.escape(null==(e=a.action)?"":e)+"</div>"),i.push("</div></div>")}.call(this,"Date"in r?r.Date:"undefined"!=typeof Date?Date:void 0,"item"in r?r.item:"undefined"!=typeof item?item:void 0),i.join("")}},{76:76}],75:[function(t,e,i){var n=t(76);e.exports=function(t){var e,i=[],r=t||{};return function(t,r,o,s,a){if(n.config.promote_magazine)i.push('<div class="b-promote_magazine pure-g"><div class="b-pm-wrapper pure-u-1"><svg viewbox="0 0 1000 392" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="fear"><title>Fear</title><image id="background" xlink:href="http://images-cdn.moviepilot.com/image/upload/v1445353403/18_copy_1_jmiznd_qgnc17.jpg" viewbox="0 0 1000 392" width="1000" height="392"></image><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path id="text" d="M0,0 L1021,0 L1021,414 L0,414 L0,0 L0,0 Z M112.588867,133.203125 L112.588867,181.48877 L223.279785,181.48877 L223.279785,231.691895 L112.588867,231.691895 L112.588867,342.557129 L46,342.557129 L46,83 L231.995605,83 L231.995605,133.203125 L112.588867,133.203125 Z M243.804741,342.557129 L243.804741,83 L431.54351,83 L431.54351,133.203125 L310.393608,133.203125 L310.393608,178.002441 L422.82769,178.002441 L422.82769,228.205566 L310.393608,228.205566 L310.393608,292.354004 L431.54351,292.354004 L431.54351,342.557129 L243.804741,342.557129 Z M643.949155,342.557129 L625.994565,290.087891 L529.771909,290.087891 L511.817319,342.557129 L444.35687,342.557129 L540.230893,83 L617.278745,83 L713.152768,342.557129 L643.949155,342.557129 Z M609.783139,242.499512 L577.883237,149.414551 L545.983335,242.499512 L609.783139,242.499512 L609.783139,242.499512 Z M871.530679,162.488281 C871.530679,155.980436 870.194266,150.402367 867.521401,145.753906 C864.848536,141.105446 860.25825,137.444838 853.750405,134.771973 C849.218156,132.912588 843.930611,131.779543 837.887612,131.372803 C831.844613,130.966062 824.813922,130.762695 816.795327,130.762695 L792.565347,130.762695 L792.565347,200.663574 L813.134683,200.663574 C823.826142,200.663574 832.774295,200.14063 839.979409,199.094727 C847.184523,198.048823 853.227432,195.666522 858.108315,191.947754 C862.756776,188.345197 866.155912,184.365012 868.305825,180.00708 C870.455738,175.649148 871.530679,169.809607 871.530679,162.488281 L871.530679,162.488281 L871.530679,162.488281 Z M975.946206,342.557129 L894.191812,342.557129 L823.419351,247.380371 L792.565347,247.380371 L792.565347,342.557129 L725.97648,342.557129 L725.97648,83 L838.236245,83 C853.576166,83 866.765975,83.871573 877.806069,85.614746 C888.846164,87.357919 899.188834,91.134737 908.83439,96.945312 C918.596157,102.755888 926.35316,110.280471 932.10563,119.519287 C937.8581,128.758103 940.734292,140.350028 940.734292,154.29541 C940.734292,173.470311 936.289268,189.100526 927.399087,201.186523 C918.508906,213.272521 905.812988,223.324667 889.310952,231.343262 L975.946206,342.557129 L975.946206,342.557129 Z" fill="#EA4A44"></path></g></svg><div class="b-pm-subtitle">An in depth look at the world of horror in 2015.</div><a href="/magazine/Fear" data-track="navigate:magazine:magazine-banner" class="b-pm-open_button"><svg width="300px"><use xlink:href="#open_magazine"></use></svg></a></div></div>');
else if(o&&o.length){var l=n.helpers.isTakeoverActive();i.push("<div"+n.cls(["b-promoted_banner_wrapper",l?"is-hidden":""],[null,!0])+'><div class="b-promoted_banner">');var u="http://images-cdn.moviepilot.com/image/upload/v1427387508/-7859530d-9629-4ebb-8a36-92a15ca6a3a0_cumrxf.png";i.push("<img"+n.attr("src",u,!0,!1)+' class="b-pb-top_image"/><div class="b-pb-open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" enable-background="new 0 0 100 100"><g fill="#fff"><path d="M19.467 67.757l7.244-7.244c-4.066-2.457-7.76-5.553-10.908-9.212 4.77-5.545 10.793-9.806 17.475-12.487-1.026 2.288-1.61 4.818-1.61 7.488 0 2.713.604 5.28 1.66 7.595l5.85-5.85c-.93-.913-1.51-2.182-1.51-3.59 0-2.78 2.255-5.036 5.036-5.036 1.407 0 2.677.58 3.59 1.51l5.316-5.316 5.985-5.985 3-3.003C57.132 25.943 53.588 25.57 50 25.57c-17.592 0-34.27 8.522-44.614 22.797L3.26 51.3l2.126 2.935c3.892 5.37 8.683 9.927 14.08 13.522zM78.294 33.443l-7.33 7.33c4.99 2.625 9.497 6.183 13.234 10.528C75.674 61.214 63.148 67.033 50 67.033c-1.683 0-3.355-.098-5.01-.285l-8.558 8.558C40.828 76.43 45.38 77.032 50 77.032c17.592 0 34.27-8.522 44.614-22.798L96.74 51.3l-2.126-2.934c-4.422-6.1-10.007-11.14-16.32-14.923zM50 64.634c10.125 0 18.333-8.208 18.333-18.333 0-.912-.09-1.802-.218-2.68L47.32 64.418c.877.13 1.767.217 2.68.217zM43.916 63.58l23.362-23.363.816-.816 7.483-7.482L89.754 17.74c2.213-2.213 2.213-5.8 0-8.014-1.106-1.106-2.557-1.66-4.007-1.66s-2.9.553-4.007 1.66l-17.7 17.702-3.722 3.72-4.78 4.78-7.865 7.866-5.63 5.63-7.194 7.194-5.412 5.41-7.362 7.363-11.472 11.472c-2.213 2.213-2.213 5.8 0 8.014 1.106 1.106 2.557 1.66 4.007 1.66s2.902-.553 4.008-1.66L33.144 74.35l8.184-8.184 2.588-2.587z"/></g></svg></div><div class="b-pb-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" enable-background="new 0 0 100 100"><path d="M50 23.483c-17.592 0-34.27 8.522-44.614 22.798L3.26 49.216l2.126 2.934C15.73 66.423 32.408 74.945 50 74.945s34.27-8.522 44.614-22.798l2.126-2.934-2.126-2.934C84.27 32.006 67.592 23.483 50 23.483zM63.738 42.37c0 2.78-2.254 5.035-5.036 5.035s-5.036-2.255-5.036-5.036c0-2.782 2.255-5.037 5.036-5.037s5.036 2.255 5.036 5.036zM50 64.945c-13.148 0-25.674-5.82-34.198-15.73 4.77-5.547 10.793-9.81 17.476-12.49-1.026 2.288-1.61 4.818-1.61 7.49 0 10.124 8.207 18.332 18.332 18.332s18.333-8.208 18.333-18.333c0-2.67-.584-5.2-1.61-7.49 6.682 2.682 12.705 6.944 17.475 12.49-8.524 9.912-21.05 15.73-34.198 15.73z" fill="#fff"/></svg>\n</div>'),o.length=o.length>3?3:o.length,i.push("<div"+n.cls(["b-pb-items_list","has-"+o.length+"-items"],[null,!0])+'><ul class="b-pb-dots_list"></ul><div class="is-slider">'),function(){var t=o;if("number"==typeof t.length)for(var r=0,s=t.length;s>r;r++){var a=t[r],l=1===o.length?640:null,u="story"==n.config.codename?"app-route":"",c=c||a.context||"post-footer-cards";if(i.push("<a"+n.attr("href",n.helpers.getUrl(a),!0,!1)+n.attr("data-track","navigate:post:"+c,!0,!1)+n.cls(["b-trending_article","pure-u-1","pure-u-md-1-2","pure-u-lg-1-3",u],[null,null,null,null,!0])+'><div class="b-ta-wrapper"><div class="b-ta-bg_imgwrap">'),a.cover_image_url){var l=l||320;i.push("<div"+n.attr("style","background-image: url('"+n.resize.imageUrl(a.cover_image_url,{width:l,height:400})+"')",!0,!1)+' class="b-ta-bg_img"></div>')}i.push('</div><div class="b-ta-content"><h4 class="b-ta-title">'+n.escape(null==(e=n.helpers.shorten(a.title,80))?"":e)+'</h4><span class="b-ta-author">'+n.escape(null==(e=a.author.name)?"":e)+"</span></div></div></a>")}else{var s=0;for(var r in t){s++;var a=t[r],l=1===o.length?640:null,u="story"==n.config.codename?"app-route":"",c=c||a.context||"post-footer-cards";if(i.push("<a"+n.attr("href",n.helpers.getUrl(a),!0,!1)+n.attr("data-track","navigate:post:"+c,!0,!1)+n.cls(["b-trending_article","pure-u-1","pure-u-md-1-2","pure-u-lg-1-3",u],[null,null,null,null,!0])+'><div class="b-ta-wrapper"><div class="b-ta-bg_imgwrap">'),a.cover_image_url){var l=l||320;i.push("<div"+n.attr("style","background-image: url('"+n.resize.imageUrl(a.cover_image_url,{width:l,height:400})+"')",!0,!1)+' class="b-ta-bg_img"></div>')}i.push('</div><div class="b-ta-content"><h4 class="b-ta-title">'+n.escape(null==(e=n.helpers.shorten(a.title,80))?"":e)+'</h4><span class="b-ta-author">'+n.escape(null==(e=a.author.name)?"":e)+"</span></div></div></a>")}}}.call(this),i.push("</div></div></div></div>")}if(i.push('<div class="pure-g with-mp_layout"><div class="pure-u-1 pure-u-lg-2-3">'),n.isDesktop&&i.push('<div class="p-h-icons_bar"><div data-href="/post/articles/new" data-type="post" class="p-h-ib-icon is-post"><div><svg viewBox="0 0 399 400" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#2DCD71"><path d="M271.417 122.01v158h10v8h-28v-8h10v-158h-10v-8h28v8h-10zM271.97.67l126.786 271.893L126.864 399.35.078 127.455 271.97.67zm-72.887 267.34H175.18v-56.368h-44.784v56.368h-23.98V137.407h23.98v51.187h44.785v-51.187h23.903V268.01zm40.25 0h-23.59v-99.873h23.59v99.873zm-11.74-105.31c8.312 0 15.05-6.74 15.05-15.053 0-8.314-6.738-15.053-15.05-15.053-8.312 0-15.05 6.74-15.05 15.053s6.738 15.053 15.05 15.053z"/></g></g></svg></div>Quick Post</div><div data-href="/post/articles/new?template=long_form" data-type="longform" class="p-h-ib-icon is-longform"><div><svg viewBox="0 0 350 404" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M349.386 117.12v-16.14L174.806.016.23 100.98v201.932l174.58 100.966 174.578-100.966V217.45l-53.958 53.957-70.1 23.697c-3.14 1.06-4.822-.624-3.76-3.76l7.4-21.898H84.808v-15h149.23l5.07-15H84.81v-15H244.18l1.083-3.204 11.796-11.796H84.806v-15h180v7.252l84.58-84.58zm-264.58 17.326h180v15h-180v-15zm0-30h180v15h-180v-15zm0 60h180v15h-180v-15zm0 120h125v15h-125v-15z" id="a"/></defs><g fill="none" fill-rule="evenodd"><g><mask><use xlink:href="#a"/></mask><use fill="#F1C40E" xlink:href="#a"/></g></g></svg></div>Post</div><div data-href="/post/articles/new" data-type="video" class="p-h-ib-icon is-video"><div><svg viewBox="0 0 316 374" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9B59B6"><path d="M.844 373.55V.117l314.468 186.716L.844 373.55zm71.984-126.357V127l101.215 60.097-101.215 60.096z"/></g></g></svg></div>Video</div><div data-href="/post/reviews/start" data-type="review" class="p-h-ib-icon is-review"><div><svg viewBox="0 0 350 350" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#3398DC"><path d="M175 350c96.65 0 175-78.35 175-175S271.65 0 175 0 0 78.35 0 175s78.35 175 175 175zm0-40.483c74.286 0 134.507-60.22 134.507-134.507S249.287 40.503 175 40.503c-74.286 0-134.507 60.22-134.507 134.507 0 74.286 60.22 134.507 134.507 134.507zm0-15.3c65.836 0 119.206-53.372 119.206-119.207 0-65.836-53.37-119.206-119.206-119.206-65.836 0-119.206 53.37-119.206 119.206 0 65.835 53.37 119.206 119.206 119.206zm0-86.71l-38.203 20.085 7.296-42.54-30.907-30.127 42.712-6.206L175 110.014l19.102 38.704 42.712 6.205-30.907 30.127 7.296 42.54L175 207.507z"/></g></g></svg></div>Review</div><div data-href="/post/quizzes/new" data-type="quiz" class="p-h-ib-icon is-quiz"><div><svg viewBox="0 0 322 322" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#E74C3C"><path d="M320.407.393H.26v321.233h321.234V101.13l-159.39 159.39-50.91-50.913.353-.354-75.307-75.307 50.912-50.91 75.307 75.306L320.406.392z"/></g></g></svg></div>Quiz</div></div>'),i.push('<div data-prerendered="homepage" class="p-h-stream"><div class="b-h-s-list">'),function(){var r=s;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var l=r[o],u="stream-story",c=n.helpers.hasCover(l);i.push("<div"+n.cls(["b-stream_item","pure-g","is-"+l.type+" "+(c?"":"has-no_cover")],[null,null,!0])+">"),c&&(i.push('<div class="b-si-img_wrapper pure-u-1 pure-u-md-1-2"><img'+n.attr("src",n.resize.imageUrl(l.cover_image_url,{width:320,height:200,isAnimated:!1}),!0,!1)+"/>"),"review"==l.type&&i.push('<div class="b-si-rating">'+n.escape(null==(e=n.helpers.numberFormat(l.reviewer_rating,!0))?"":e)+'</div><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 157.1 162.3" enable-background="new 0 0 157.1 162.3"><path fill="#fff" d="M78.6 140l3.6 7.3 8.1 1.2-5.9 5.7 1.4 8.1-7.3-3.8-7.3 3.8 1.4-8.1-5.9-5.7 8.1-1.2 3.8-7.3zm0-140C35.2 0 0 35.2 0 78.6c0 29.7 16.6 55.7 41 69l5.3-9.6C25.3 126.5 11 104.1 11 78.6 11 41.3 41.3 11 78.6 11c37.2 0 67.6 30.3 67.6 67.6 0 26.8-15.7 50-38.4 60.9l4.6 10c26.5-12.6 44.8-39.7 44.8-70.9C157.1 35.2 121.9 0 78.6 0z"/></svg>\n</div>'),i.push("</div>")),i.push("<div"+n.cls(["b-si-data_wrapper","pure-u-1",""+(c?"pure-u-md-1-2":"")],[null,null,!0])+"><img"+n.attr("src",n.resize.profileImageUrl(l.author,{width:35,height:35,isAnimated:!1}),!0,!1)+' class="b-si-avatar"/><div class="b-si-data"><h4 class="b-si-title"><a'+n.attr("href",n.helpers.getUrl(l),!0,!1)+n.attr("data-track","navigate:post:"+u,!0,!1)+">"+n.escape(null==(e=l.title)?"":e)+"</a></h4><a"+n.attr("href",n.helpers.getProfileUrl(l.author),!0,!1)+n.attr("data-track","navigate:user_profile:"+u,!0,!1)+' class="b-si-author_name">'+n.escape(null==(e=l.author.name||l.author.user_name)?"":e)+"&nbsp;</a></div>");var h=l.why_this_is_here||{};l.in_reply_to?i.push(n.helpers.isSameDay(l.first_published_at,t.now())?'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(l.in_reply_to)+'">this post</a> '+n.helpers.dateFormatSince(l.first_published_at))?"":e)+"</div>":'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(l.in_reply_to)+'">this post</a> on '+n.helpers.dateTimeToString(l.first_published_at))?"":e)+"</div>"):"post"===h.action?i.push("<!-- user you follow wrote a post--><!-- if thats the case, we don't add any UI but want to--><!-- prevent the catch all error UI, so dont delete this if-clause-->"):"promotion"===h.action?i.push('<!-- tag you follow got new promoted post--><div class="b-si-reason"><div><svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M500 191.313L327.53 165 250 0l-77.53 165L0 191.313l124.766 127.75L95.234 500 250 414.53 404.766 500l-29.532-180.938L500 191.313"/></g></g></svg></div><a'+n.attr("href",n.helpers.getUrl(h.actor),!0,!1)+n.attr("data-track","navigate:tagPage:"+u,!0,!1)+">"+n.escape(null==(e=h.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):"recommendation"===h.action?i.push(h.actor.name?'<!-- user you follow recommended post he likes--><div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a'+n.attr("href",n.helpers.getProfileUrl(h.actor),!0,!1)+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">"+n.escape(null==(e=h.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>":'<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):"homepage_promotion"===h.action?i.push('<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):h.action&&i.push('<div class="b-si-reason">Unknown reason type:'+n.escape(null==(e=h.action)?"":e)+"</div>"),i.push("</div></div>")}else{var a=0;for(var o in r){a++;var l=r[o],u="stream-story",c=n.helpers.hasCover(l);i.push("<div"+n.cls(["b-stream_item","pure-g","is-"+l.type+" "+(c?"":"has-no_cover")],[null,null,!0])+">"),c&&(i.push('<div class="b-si-img_wrapper pure-u-1 pure-u-md-1-2"><img'+n.attr("src",n.resize.imageUrl(l.cover_image_url,{width:320,height:200,isAnimated:!1}),!0,!1)+"/>"),"review"==l.type&&i.push('<div class="b-si-rating">'+n.escape(null==(e=n.helpers.numberFormat(l.reviewer_rating,!0))?"":e)+'</div><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 157.1 162.3" enable-background="new 0 0 157.1 162.3"><path fill="#fff" d="M78.6 140l3.6 7.3 8.1 1.2-5.9 5.7 1.4 8.1-7.3-3.8-7.3 3.8 1.4-8.1-5.9-5.7 8.1-1.2 3.8-7.3zm0-140C35.2 0 0 35.2 0 78.6c0 29.7 16.6 55.7 41 69l5.3-9.6C25.3 126.5 11 104.1 11 78.6 11 41.3 41.3 11 78.6 11c37.2 0 67.6 30.3 67.6 67.6 0 26.8-15.7 50-38.4 60.9l4.6 10c26.5-12.6 44.8-39.7 44.8-70.9C157.1 35.2 121.9 0 78.6 0z"/></svg>\n</div>'),i.push("</div>")),i.push("<div"+n.cls(["b-si-data_wrapper","pure-u-1",""+(c?"pure-u-md-1-2":"")],[null,null,!0])+"><img"+n.attr("src",n.resize.profileImageUrl(l.author,{width:35,height:35,isAnimated:!1}),!0,!1)+' class="b-si-avatar"/><div class="b-si-data"><h4 class="b-si-title"><a'+n.attr("href",n.helpers.getUrl(l),!0,!1)+n.attr("data-track","navigate:post:"+u,!0,!1)+">"+n.escape(null==(e=l.title)?"":e)+"</a></h4><a"+n.attr("href",n.helpers.getProfileUrl(l.author),!0,!1)+n.attr("data-track","navigate:user_profile:"+u,!0,!1)+' class="b-si-author_name">'+n.escape(null==(e=l.author.name||l.author.user_name)?"":e)+"&nbsp;</a></div>");var h=l.why_this_is_here||{};l.in_reply_to?i.push(n.helpers.isSameDay(l.first_published_at,t.now())?'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(l.in_reply_to)+'">this post</a> '+n.helpers.dateFormatSince(l.first_published_at))?"":e)+"</div>":'<div class="b-si-reason"><svg class="icon icon-reply"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-reply"></use></svg>'+(null==(e='Posted in reply to <a href="'+n.helpers.getUrl(l.in_reply_to)+'">this post</a> on '+n.helpers.dateTimeToString(l.first_published_at))?"":e)+"</div>"):"post"===h.action?i.push("<!-- user you follow wrote a post--><!-- if thats the case, we don't add any UI but want to--><!-- prevent the catch all error UI, so dont delete this if-clause-->"):"promotion"===h.action?i.push('<!-- tag you follow got new promoted post--><div class="b-si-reason"><div><svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M500 191.313L327.53 165 250 0l-77.53 165L0 191.313l124.766 127.75L95.234 500 250 414.53 404.766 500l-29.532-180.938L500 191.313"/></g></g></svg></div><a'+n.attr("href",n.helpers.getUrl(h.actor),!0,!1)+n.attr("data-track","navigate:tagPage:"+u,!0,!1)+">"+n.escape(null==(e=h.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):"recommendation"===h.action?i.push(h.actor.name?'<!-- user you follow recommended post he likes--><div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a'+n.attr("href",n.helpers.getProfileUrl(h.actor),!0,!1)+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">"+n.escape(null==(e=h.actor.name)?"":e)+"</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>":'<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):"homepage_promotion"===h.action?i.push('<div class="b-si-reason"><div><svg viewBox="0 0 500 471" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#9b9b9b"><path d="M375 1c-52.078 0-94.03 28.81-125.484 66.24C218.953 28.53 177.078 1 125 1 51.656 1 0 64.128 0 132.98c0 36.93 15.11 63.52 31.656 88.515l194.266 233.15c21.797 20.474 25.922 20.474 47.72 0l194.702-233.15C487.814 196.5 500 169.91 500 132.98 500 64.13 448.344 1 375 1"/></g></g></svg></div><a href="/staff"'+n.attr("data-track","navigate:userProfile:"+u,!0,!1)+">Staff</a>"+(null==(e=" &middot; "+n.helpers.dateFormatSince(h.action_date,{format:"supershort"}))?"":e)+"</div>"):h.action&&i.push('<div class="b-si-reason">Unknown reason type:'+n.escape(null==(e=h.action)?"":e)+"</div>"),i.push("</div></div>")}}}.call(this),i.push("</div>"),r&&!r.last){var c="/?page="+r.page;i.push("<a"+n.attr("href",c,!0,!1)+' class="p-h-s-load_more pure-button">Show more posts</a>')}else i.push('<div class="p-h-s-load_more pure-button">Show more posts</div>');i.push('<div class="p-h-s-no_more_stories pure-button">No more stories</div><div class="p-h-s-is_loading pure-button">Loading...</div></div></div>'),n.isMobile||i.push('<div class="p-h-sidebar pure-u-1 pure-u-lg-1-3"><div class="tether-target-ancor"></div><div class="p-h-s-community_wrapper"><div class="m-gad m-gad-sidebar"></div></div></div>'),i.push("</div>")}.call(this,"Date"in r?r.Date:"undefined"!=typeof Date?Date:void 0,"pagination"in r?r.pagination:"undefined"!=typeof pagination?pagination:void 0,"promoted_collection"in r?r.promoted_collection:"undefined"!=typeof promoted_collection?promoted_collection:void 0,"stream_collection"in r?r.stream_collection:"undefined"!=typeof stream_collection?stream_collection:void 0,"undefined"in r?r.undefined:void 0),i.join("")}},{76:76}],76:[function(t,e,i){(function(n){!function(t){if("object"==typeof i&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof n?r=n:"undefined"!=typeof self&&(r=self),r.jade=t()}}(function(){return function e(i,n,r){function o(a,l){if(!n[a]){if(!i[a]){var u="function"==typeof t&&t;if(!l&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};i[a][0].call(h.exports,function(t){var e=i[a][1][t];return o(e?e:t)},h,h.exports,e,i,n,r)}return n[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){"use strict";function n(t){return null!=t&&""!==t}function r(t){return(Array.isArray(t)?t.map(r):t&&"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(n).join(" ")}i.merge=function o(t,e){if(1===arguments.length){for(var i=t[0],r=1;r<t.length;r++)i=o(i,t[r]);return i}var s=t["class"],a=e["class"];(s||a)&&(s=s||[],a=a||[],Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]),t["class"]=s.concat(a).filter(n));for(var l in e)"class"!=l&&(t[l]=e[l]);return t},i.joinClasses=r,i.cls=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(e&&e[o]?i.escape(r([t[o]])):r(t[o]));var s=r(n);return s.length?' class="'+s+'"':""},i.style=function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},i.attr=function(t,e,n,r){return"style"===t&&(e=i.style(e)),"boolean"==typeof e||null==e?e?" "+(r?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?(-1!==JSON.stringify(e).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),e&&"function"==typeof e.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'"):n?(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+i.escape(e)+'"'):(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e+'"')},i.attrs=function(t,e){var n=[],o=Object.keys(t);if(o.length)for(var s=0;s<o.length;++s){var a=o[s],l=t[a];"class"==a?(l=r(l))&&n.push(" "+a+'="'+l+'"'):n.push(i.attr(a,l,!1,e))}return n.join("")},i.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},i.rethrow=function s(e,i,n,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&i||r))throw e.message+=" on line "+n,e;try{r=r||t(8).readFileSync(i,"utf8")}catch(o){s(e,null,n)}var a=3,l=r.split("\n"),u=Math.max(n-a,0),c=Math.min(l.length,n+a),a=l.slice(u,c).map(function(t,e){var i=e+u+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw e.path=i,e.message=(i||"Jade")+":"+n+"\n"+a+"\n\n"+e.message,e}},{fs:2}],2:[function(t,e,i){},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{8:8}],77:[function(t,e,i){!function(n,r){"function"==typeof define&&define.amd?define(r):"object"==typeof i?e.exports=r(t,i,e):n.Tether=r()}(this,function(t,e,i){return function(){var t,e,i,n,r,o,s,a,l,u,c,h,p,d,f,g,m,v,y,_={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},w=[].slice;null==this.Tether&&(this.Tether={modules:[]}),h=function(t){var e,i,n,r,o;if(i=getComputedStyle(t).position,"fixed"===i)return t;for(n=void 0,e=t;e=e.parentNode;){try{r=getComputedStyle(e)}catch(s){}if(null==r)return e;if(/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&("absolute"!==i||"relative"===(o=r.position)||"absolute"===o||"fixed"===o))return e}return document.body},m=function(){var t;return t=0,function(){return t++}}(),y={},u=function(t){var e,n,o,s,a;if(o=t._tetherZeroElement,null==o&&(o=t.createElement("div"),o.setAttribute("data-tether-id",m()),r(o.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(o),t._tetherZeroElement=o),e=o.getAttribute("data-tether-id"),null==y[e]){y[e]={},a=o.getBoundingClientRect();for(n in a)s=a[n],y[e][n]=s;i(function(){return y[e]=void 0})}return y[e]},d=null,s=function(t){var e,i,n,r,o,s,a;t===document?(i=document,t=document.documentElement):i=t.ownerDocument,n=i.documentElement,e={},a=t.getBoundingClientRect();for(r in a)s=a[r],e[r]=s;return o=u(i),e.top-=o.top,e.left-=o.left,null==e.width&&(e.width=document.body.scrollWidth-e.left-e.right),null==e.height&&(e.height=document.body.scrollHeight-e.top-e.bottom),e.top=e.top-n.clientTop,e.left=e.left-n.clientLeft,e.right=i.body.clientWidth-e.width-e.left,e.bottom=i.body.clientHeight-e.height-e.top,e},l=function(t){return t.offsetParent||document.documentElement},c=function(){var t,e,i,n,o;return t=document.createElement("div"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),r(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),n=t.offsetWidth,e.style.overflow="scroll",o=t.offsetWidth,n===o&&(o=e.clientWidth),document.body.removeChild(e),i=n-o,{width:i,height:i}},r=function(t){var e,i,n,r,o,s,a;for(null==t&&(t={}),e=[],Array.prototype.push.apply(e,arguments),a=e.slice(1),o=0,s=a.length;s>o;o++)if(n=a[o])for(i in n)_.call(n,i)&&(r=n[i],t[i]=r);return t},f=function(t,e){var i,n,r,o,s,l;if(null!=t.classList){for(s=e.split(" "),l=[],r=0,o=s.length;o>r;r++)n=s[r],n.trim()&&l.push(t.classList.remove(n));return l}return i=a(t).replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," "),g(t,i)},e=function(t,e){var i,n,r,o,s;if(null!=t.classList){for(o=e.split(" "),s=[],n=0,r=o.length;r>n;n++)i=o[n],i.trim()&&s.push(t.classList.add(i));return s}return f(t,e),i=a(t)+(" "+e),g(t,i)},p=function(t,e){return null!=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(a(t))},a=function(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className},g=function(t,e){return t.setAttribute("class",e)},v=function(t,i,n){var r,o,s,a,l,u;for(o=0,a=n.length;a>o;o++)r=n[o],b.call(i,r)<0&&p(t,r)&&f(t,r);for(u=[],s=0,l=i.length;l>s;s++)r=i[s],u.push(p(t,r)?void 0:e(t,r));return u},n=[],i=function(t){return n.push(t)},o=function(){var t,e;for(e=[];t=n.pop();)e.push(t());return e},t=function(){function t(){}return t.prototype.on=function(t,e,i,n){var r;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(r=this.bindings)[t]&&(r[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})},t.prototype.once=function(t,e,i){return this.on(t,e,i,!0)},t.prototype.off=function(t,e){var i,n,r;if(null!=(null!=(n=this.bindings)?n[t]:void 0)){if(null==e)return delete this.bindings[t];for(i=0,r=[];i<this.bindings[t].length;)r.push(this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):i++);return r}},t.prototype.trigger=function(){var t,e,i,n,r,o,s,a,l;if(i=arguments[0],t=2<=arguments.length?w.call(arguments,1):[],null!=(s=this.bindings)?s[i]:void 0){for(r=0,l=[];r<this.bindings[i].length;)a=this.bindings[i][r],n=a.handler,e=a.ctx,o=a.once,n.apply(null!=e?e:this,t),l.push(o?this.bindings[i].splice(r,1):r++);return l}},t}(),this.Tether.Utils={getScrollParent:h,getBounds:s,getOffsetParent:l,extend:r,addClass:e,removeClass:f,hasClass:p,updateClasses:v,defer:i,flush:o,uniqueId:m,Evented:t,getScrollBarSize:c}}.call(this),function(){var t,e,i,n,r,o,s,a,l,u,c,h,p,d,f,g,m,v,y,_,b,w,k,x,S,C,T,$,E,L=[].slice,P=function(t,e){return function(){return t.apply(e,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");n=this.Tether,E=n.Utils,g=E.getScrollParent,m=E.getSize,d=E.getOuterSize,h=E.getBounds,p=E.getOffsetParent,u=E.extend,r=E.addClass,k=E.removeClass,C=E.updateClasses,l=E.defer,c=E.flush,f=E.getScrollBarSize,T=function(t,e,i){return null==i&&(i=1),t+i>=e&&e>=t-i},S=function(){var t,e,i,n,r;for(t=document.createElement("div"),r=["transform","webkitTransform","OTransform","MozTransform","msTransform"],i=0,n=r.length;n>i;i++)if(e=r[i],void 0!==t.style[e])return e}(),x=[],w=function(){var t,e,i;for(e=0,i=x.length;i>e;e++)t=x[e],t.position(!1);return c()},v=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},function(){var t,e,i,n,r,o,s,a,l;for(e=null,i=null,n=null,r=function(){if(null!=i&&i>16)return i=Math.min(i-16,250),void(n=setTimeout(r,250));if(!(null!=e&&v()-e<10))return null!=n&&(clearTimeout(n),n=null),e=v(),w(),i=v()-e},a=["resize","scroll","touchmove"],l=[],o=0,s=a.length;s>o;o++)t=a[o],l.push(window.addEventListener(t,r));return l}(),t={center:"center",left:"right",right:"left"},e={middle:"middle",top:"bottom",bottom:"top"},i={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},a=function(i,n){var r,o;return r=i.left,o=i.top,"auto"===r&&(r=t[n.left]),"auto"===o&&(o=e[n.top]),{left:r,top:o}},s=function(t){var e,n;return{left:null!=(e=i[t.left])?e:t.left,top:null!=(n=i[t.top])?n:t.top}},o=function(){var t,e,i,n,r,o,s;for(e=1<=arguments.length?L.call(arguments,0):[],i={top:0,left:0},r=0,o=e.length;o>r;r++)s=e[r],n=s.top,t=s.left,"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof t&&(t=parseFloat(t,10)),i.top+=n,i.left+=t;return i},y=function(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t},_=b=function(t){var e,i,n;return n=t.split(" "),i=n[0],e=n[1],{top:i,left:e}},$=function(){function t(t){this.position=P(this.position,this);var e,i,r,o,s;for(x.push(this),this.history=[],this.setOptions(t,!1),o=n.modules,i=0,r=o.length;r>i;i++)e=o[i],null!=(s=e.initialize)&&s.call(this);this.position()}return t.modules=[],t.prototype.getClass=function(t){var e,i;return(null!=(e=this.options.classes)?e[t]:void 0)?this.options.classes[t]:(null!=(i=this.options.classes)?i[t]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+t:t:""},t.prototype.setOptions=function(t,e){var i,n,o,s,a,l;for(this.options=t,null==e&&(e=!0),i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=u(i,this.options),a=this.options,this.element=a.element,this.target=a.target,this.targetModifier=a.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),l=["element","target"],o=0,s=l.length;s>o;o++){if(n=l[o],null==this[n])throw new Error("Tether Error: Both element and target must be defined");null!=this[n].jquery?this[n]=this[n][0]:"string"==typeof this[n]&&(this[n]=document.querySelector(this[n]))}if(r(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&r(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");return this.targetAttachment=_(this.options.targetAttachment),this.attachment=_(this.options.attachment),this.offset=b(this.options.offset),this.targetOffset=b(this.options.targetOffset),null!=this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:g(this.target),this.options.enabled!==!1?this.enable(e):void 0},t.prototype.getTargetBounds=function(){var t,e,i,n,r,o,s,a,l;if(null==this.targetModifier)return h(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(t=h(this.target),r={height:t.height,width:t.width,top:t.top,left:t.left},r.height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);case"scroll-handle":return l=this.target,l===document.body?(l=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=h(l),a=getComputedStyle(l),i=l.scrollWidth>l.clientWidth||"scroll"===[a.overflow,a.overflowX]||this.target!==document.body,o=0,i&&(o=15),n=t.height-parseFloat(a.borderTopWidth)-parseFloat(a.borderBottomWidth)-o,
r={width:15,height:.975*n*(n/l.scrollHeight),left:t.left+t.width-parseFloat(a.borderLeftWidth)-15},e=0,408>n&&this.target===document.body&&(e=-11e-5*Math.pow(n,2)-.00727*n+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24)),s=this.target.scrollTop/(l.scrollHeight-n),r.top=s*(n-r.height-e)+t.top+parseFloat(a.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}},t.prototype.clearCache=function(){return this._cache={}},t.prototype.cache=function(t,e){return null==this._cache&&(this._cache={}),null==this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},t.prototype.enable=function(t){return null==t&&(t=!0),this.options.addTargetClasses!==!1&&r(this.target,this.getClass("enabled")),r(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t?this.position():void 0},t.prototype.disable=function(){return k(this.target,this.getClass("enabled")),k(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},t.prototype.destroy=function(){var t,e,i,n,r;for(this.disable(),r=[],t=i=0,n=x.length;n>i;t=++i){if(e=x[t],e===this){x.splice(t,1);break}r.push(void 0)}return r},t.prototype.updateAttachClasses=function(t,e){var i,n,r,o,s,a,u,c,h,p=this;for(null==t&&(t=this.attachment),null==e&&(e=this.targetAttachment),o=["left","top","bottom","right","middle","center"],(null!=(h=this._addAttachClasses)?h.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),i=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],t.top&&i.push(""+this.getClass("element-attached")+"-"+t.top),t.left&&i.push(""+this.getClass("element-attached")+"-"+t.left),e.top&&i.push(""+this.getClass("target-attached")+"-"+e.top),e.left&&i.push(""+this.getClass("target-attached")+"-"+e.left),n=[],s=0,u=o.length;u>s;s++)r=o[s],n.push(""+this.getClass("element-attached")+"-"+r);for(a=0,c=o.length;c>a;a++)r=o[a],n.push(""+this.getClass("target-attached")+"-"+r);return l(function(){return null!=p._addAttachClasses?(C(p.element,p._addAttachClasses,n),p.options.addTargetClasses!==!1&&C(p.target,p._addAttachClasses,n),p._addAttachClasses=void 0):void 0})},t.prototype.position=function(t){var e,i,r,l,u,d,g,m,v,_,b,w,k,x,S,C,T,$,E,L,P,M,O,A,z,R,I,N,j,F,B,D,U,H,q,W=this;if(null==t&&(t=!0),this.enabled){for(this.clearCache(),L=a(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,L),e=this.cache("element-bounds",function(){return h(W.element)}),z=e.width,r=e.height,0===z&&0===r&&null!=this.lastSize?(F=this.lastSize,z=F.width,r=F.height):this.lastSize={width:z,height:r},O=M=this.cache("target-bounds",function(){return W.getTargetBounds()}),v=y(s(this.attachment),{width:z,height:r}),P=y(s(L),O),u=y(this.offset,{width:z,height:r}),d=y(this.targetOffset,O),v=o(v,u),P=o(P,d),l=M.left+P.left-v.left,A=M.top+P.top-v.top,B=n.modules,R=0,N=B.length;N>R;R++){if(g=B[R],S=g.position.call(this,{left:l,top:A,targetAttachment:L,targetPos:M,attachment:this.attachment,elementPos:e,offset:v,targetOffset:P,manualOffset:u,manualTargetOffset:d,scrollbarSize:$}),S===!1)return!1;null!=S&&"object"==typeof S&&(A=S.top,l=S.left)}if(m={page:{top:A,left:l},viewport:{top:A-pageYOffset,bottom:pageYOffset-A-r+innerHeight,left:l-pageXOffset,right:pageXOffset-l-z+innerWidth}},document.body.scrollWidth>window.innerWidth&&($=this.cache("scrollbar-size",f),m.viewport.bottom-=$.height),document.body.scrollHeight>window.innerHeight&&($=this.cache("scrollbar-size",f),m.viewport.right-=$.width),(""!==(D=document.body.style.position)&&"static"!==D||""!==(U=document.body.parentElement.style.position)&&"static"!==U)&&(m.page.bottom=document.body.scrollHeight-A-r,m.page.right=document.body.scrollWidth-l-z),(null!=(H=this.options.optimizations)?H.moveElement:void 0)!==!1&&null==this.targetModifier){for(b=this.cache("target-offsetparent",function(){return p(W.target)}),x=this.cache("target-offsetparent-bounds",function(){return h(b)}),k=getComputedStyle(b),i=getComputedStyle(this.element),w=x,_={},q=["Top","Left","Bottom","Right"],I=0,j=q.length;j>I;I++)E=q[I],_[E.toLowerCase()]=parseFloat(k["border"+E+"Width"]);x.right=document.body.scrollWidth-x.left-w.width+_.right,x.bottom=document.body.scrollHeight-x.top-w.height+_.bottom,m.page.top>=x.top+_.top&&m.page.bottom>=x.bottom&&m.page.left>=x.left+_.left&&m.page.right>=x.right&&(T=b.scrollTop,C=b.scrollLeft,m.offset={top:m.page.top-x.top+T-_.top,left:m.page.left-x.left+C-_.left})}return this.move(m),this.history.unshift(m),this.history.length>3&&this.history.pop(),t&&c(),!0}},t.prototype.move=function(t){var e,i,n,r,o,s,a,c,h,d,f,g,m,v,y,_,b,w=this;if(null!=this.element.parentNode){c={};for(d in t){c[d]={};for(r in t[d]){for(n=!1,_=this.history,v=0,y=_.length;y>v;v++)if(a=_[v],!T(null!=(b=a[d])?b[r]:void 0,t[d][r])){n=!0;break}n||(c[d][r]=!0)}}e={top:"",left:"",right:"",bottom:""},h=function(t,i){var n,r,o;return(null!=(o=w.options.optimizations)?o.gpu:void 0)===!1?(t.top?e.top=""+i.top+"px":e.bottom=""+i.bottom+"px",t.left?e.left=""+i.left+"px":e.right=""+i.right+"px"):(t.top?(e.top=0,r=i.top):(e.bottom=0,r=-i.bottom),t.left?(e.left=0,n=i.left):(e.right=0,n=-i.right),e[S]="translateX("+Math.round(n)+"px) translateY("+Math.round(r)+"px)","msTransform"!==S?e[S]+=" translateZ(0)":void 0)},o=!1,(c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(e.position="absolute",h(c.page,t.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(e.position="fixed",h(c.viewport,t.viewport)):null!=c.offset&&c.offset.top&&c.offset.left?(e.position="absolute",s=this.cache("target-offsetparent",function(){return p(w.target)}),p(this.element)!==s&&l(function(){return w.element.parentNode.removeChild(w.element),s.appendChild(w.element)}),h(c.offset,t.offset),o=!0):(e.position="absolute",h({top:!0,left:!0},t.page)),o||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},g=!1;for(r in e)f=e[r],i=this.element.style[r],""===i||""===f||"top"!==r&&"left"!==r&&"bottom"!==r&&"right"!==r||(i=parseFloat(i),f=parseFloat(f)),i!==f&&(g=!0,m[r]=e[r]);return g?l(function(){return u(w.element.style,m)}):void 0}},t}(),n.position=w,this.Tether=u($,n)}.call(this),function(){var t,e,i,n,r,o,s,a,l,u,c=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};u=this.Tether.Utils,s=u.getOuterSize,o=u.getBounds,a=u.getSize,n=u.extend,l=u.updateClasses,i=u.defer,e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},t=["left","top","right","bottom"],r=function(e,i){var n,r,s,a,l,u,c;if("scrollParent"===i?i=e.scrollParent:"window"===i&&(i=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),i===document&&(i=i.documentElement),null!=i.nodeType)for(r=a=o(i),l=getComputedStyle(i),i=[r.left,r.top,a.width+r.left,a.height+r.top],n=u=0,c=t.length;c>u;n=++u)s=t[n],s=s[0].toUpperCase()+s.substr(1),"Top"===s||"Left"===s?i[n]+=parseFloat(l["border"+s+"Width"]):i[n]-=parseFloat(l["border"+s+"Width"]);return i},this.Tether.modules.push({position:function(e){var s,a,u,h,p,d,f,g,m,v,y,_,b,w,k,x,S,C,T,$,E,L,P,M,O,A,z,R,I,N,j,F,B,D,U,H,q,W,J,V,K,X,Z,Y,G,Q,tt,et=this;if(A=e.top,y=e.left,E=e.targetAttachment,!this.options.constraints)return!0;for(C=function(e){var i,n,r,o;for(et.removeClass(e),o=[],n=0,r=t.length;r>n;n++)i=t[n],o.push(et.removeClass(""+e+"-"+i));return o},V=this.cache("element-bounds",function(){return o(et.element)}),v=V.height,z=V.width,0===z&&0===v&&null!=this.lastSize&&(K=this.lastSize,z=K.width,v=K.height),P=this.cache("target-bounds",function(){return et.getTargetBounds()}),L=P.height,M=P.width,$={},m={},a=[this.getClass("pinned"),this.getClass("out-of-bounds")],X=this.options.constraints,R=0,F=X.length;F>R;R++)g=X[R],g.outOfBoundsClass&&a.push(g.outOfBoundsClass),g.pinnedClass&&a.push(g.pinnedClass);for(I=0,B=a.length;B>I;I++)for(f=a[I],Z=["left","top","right","bottom"],N=0,D=Z.length;D>N;N++)T=Z[N],a.push(""+f+"-"+T);for(s=[],$=n({},E),m=n({},this.attachment),Y=this.options.constraints,j=0,U=Y.length;U>j;j++){if(g=Y[j],O=g.to,u=g.attachment,k=g.pin,null==u&&(u=""),c.call(u," ")>=0?(G=u.split(" "),d=G[0],p=G[1]):p=d=u,h=r(this,O),("target"===d||"both"===d)&&(A<h[1]&&"top"===$.top&&(A+=L,$.top="bottom"),A+v>h[3]&&"bottom"===$.top&&(A-=L,$.top="top")),"together"===d&&(A<h[1]&&"top"===$.top&&("bottom"===m.top?(A+=L,$.top="bottom",A+=v,m.top="top"):"top"===m.top&&(A+=L,$.top="bottom",A-=v,m.top="bottom")),A+v>h[3]&&"bottom"===$.top&&("top"===m.top?(A-=L,$.top="top",A-=v,m.top="bottom"):"bottom"===m.top&&(A-=L,$.top="top",A+=v,m.top="top")),"middle"===$.top&&(A+v>h[3]&&"top"===m.top?(A-=v,m.top="bottom"):A<h[1]&&"bottom"===m.top&&(A+=v,m.top="top"))),("target"===p||"both"===p)&&(y<h[0]&&"left"===$.left&&(y+=M,$.left="right"),y+z>h[2]&&"right"===$.left&&(y-=M,$.left="left")),"together"===p&&(y<h[0]&&"left"===$.left?"right"===m.left?(y+=M,$.left="right",y+=z,m.left="left"):"left"===m.left&&(y+=M,$.left="right",y-=z,m.left="right"):y+z>h[2]&&"right"===$.left?"left"===m.left?(y-=M,$.left="left",y-=z,m.left="right"):"right"===m.left&&(y-=M,$.left="left",y+=z,m.left="left"):"center"===$.left&&(y+z>h[2]&&"left"===m.left?(y-=z,m.left="right"):y<h[0]&&"right"===m.left&&(y+=z,m.left="left"))),("element"===d||"both"===d)&&(A<h[1]&&"bottom"===m.top&&(A+=v,m.top="top"),A+v>h[3]&&"top"===m.top&&(A-=v,m.top="bottom")),("element"===p||"both"===p)&&(y<h[0]&&"right"===m.left&&(y+=z,m.left="left"),y+z>h[2]&&"left"===m.left&&(y-=z,m.left="right")),"string"==typeof k?k=function(){var t,e,i,n;for(i=k.split(","),n=[],e=0,t=i.length;t>e;e++)w=i[e],n.push(w.trim());return n}():k===!0&&(k=["top","left","right","bottom"]),k||(k=[]),x=[],_=[],A<h[1]&&(c.call(k,"top")>=0?(A=h[1],x.push("top")):_.push("top")),A+v>h[3]&&(c.call(k,"bottom")>=0?(A=h[3]-v,x.push("bottom")):_.push("bottom")),y<h[0]&&(c.call(k,"left")>=0?(y=h[0],x.push("left")):_.push("left")),y+z>h[2]&&(c.call(k,"right")>=0?(y=h[2]-z,x.push("right")):_.push("right")),x.length)for(S=null!=(Q=this.options.pinnedClass)?Q:this.getClass("pinned"),s.push(S),W=0,H=x.length;H>W;W++)T=x[W],s.push(""+S+"-"+T);if(_.length)for(b=null!=(tt=this.options.outOfBoundsClass)?tt:this.getClass("out-of-bounds"),s.push(b),J=0,q=_.length;q>J;J++)T=_[J],s.push(""+b+"-"+T);(c.call(x,"left")>=0||c.call(x,"right")>=0)&&(m.left=$.left=!1),(c.call(x,"top")>=0||c.call(x,"bottom")>=0)&&(m.top=$.top=!1),($.top!==E.top||$.left!==E.left||m.top!==this.attachment.top||m.left!==this.attachment.left)&&this.updateAttachClasses(m,$)}return i(function(){return et.options.addTargetClasses!==!1&&l(et.target,s,a),l(et.element,s,a)}),{top:A,left:y}}})}.call(this),function(){var t,e,i,n;n=this.Tether.Utils,e=n.getBounds,i=n.updateClasses,t=n.defer,this.Tether.modules.push({position:function(n){var r,o,s,a,l,u,c,h,p,d,f,g,m,v,y,_,b,w,k,x,S,C,T,$,E,L=this;if(f=n.top,u=n.left,S=this.cache("element-bounds",function(){return e(L.element)}),l=S.height,g=S.width,d=this.getTargetBounds(),a=f+l,c=u+g,r=[],f<=d.bottom&&a>=d.top)for(C=["left","right"],m=0,b=C.length;b>m;m++)h=C[m],((T=d[h])===u||T===c)&&r.push(h);if(u<=d.right&&c>=d.left)for($=["top","bottom"],v=0,w=$.length;w>v;v++)h=$[v],((E=d[h])===f||E===a)&&r.push(h);for(s=[],o=[],p=["left","top","right","bottom"],s.push(this.getClass("abutted")),y=0,k=p.length;k>y;y++)h=p[y],s.push(""+this.getClass("abutted")+"-"+h);for(r.length&&o.push(this.getClass("abutted")),_=0,x=r.length;x>_;_++)h=r[_],o.push(""+this.getClass("abutted")+"-"+h);return t(function(){return L.options.addTargetClasses!==!1&&i(L.target,o,s),i(L.element,o,s)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(t){var e,i,n,r,o,s,a;return s=t.top,e=t.left,this.options.shift?(i=function(t){return"function"==typeof t?t.call(this,{top:s,left:e}):t},n=i(this.options.shift),"string"==typeof n?(n=n.split(" "),n[1]||(n[1]=n[0]),o=n[0],r=n[1],o=parseFloat(o,10),r=parseFloat(r,10)):(a=[n.top,n.left],o=a[0],r=a[1]),s+=o,e+=r,{top:s,left:e}):void 0}})}.call(this),this.Tether})},{}],78:[function(t,e,i){(function(){function t(t){function e(e,i,n,r,o,s){for(;o>=0&&s>o;o+=t){var a=r?r[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,r,o){n=w(n,o,4);var s=!E(i)&&b.keys(i),a=(s||i).length,l=t>0?0:a-1;return arguments.length<3&&(r=i[s?s[l]:l],l+=t),e(i,n,r,s,l,a)}}function n(t){return function(e,i,n){i=k(i,n);for(var r=$(e),o=t>0?0:r-1;o>=0&&r>o;o+=t)if(i(e[o],o,e))return o;return-1}}function r(t,e,i){return function(n,r,o){var s=0,a=$(n);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(p.call(n,s,a),b.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(n[o]===r)return o;return-1}}function o(t,e){var i=A.length,n=t.constructor,r=b.isFunction(n)&&n.prototype||u,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);i--;)o=A[i],o in t&&t[o]!==r[o]&&!b.contains(e,o)&&e.push(o)}var s=this,a=s._,l=Array.prototype,u=Object.prototype,c=Function.prototype,h=l.push,p=l.slice,d=u.toString,f=u.hasOwnProperty,g=Array.isArray,m=Object.keys,v=c.bind,y=Object.create,_=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof i?("undefined"!=typeof e&&e.exports&&(i=e.exports=b),i._=b):s._=b,b.VERSION="1.8.3";var w=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},k=function(t,e,i){return null==t?b.identity:b.isFunction(t)?w(t,e,i):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return k(t,e,1/0)};var x=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var o=arguments[r],s=t(o),a=s.length,l=0;a>l;l++){var u=s[l];e&&void 0!==i[u]||(i[u]=o[u])}return i}},S=function(t){if(!b.isObject(t))return{};if(y)return y(t);_.prototype=t;var e=new _;return _.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,$=C("length"),E=function(t){var e=$(t);return"number"==typeof e&&e>=0&&T>=e};b.each=b.forEach=function(t,e,i){e=w(e,i);var n,r;if(E(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var o=b.keys(t);for(n=0,r=o.length;r>n;n++)e(t[o[n]],o[n],t)}return t},b.map=b.collect=function(t,e,i){e=k(e,i);for(var n=!E(t)&&b.keys(t),r=(n||t).length,o=Array(r),s=0;r>s;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,i){var n;return n=E(t)?b.findIndex(t,e,i):b.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},b.filter=b.select=function(t,e,i){var n=[];return e=k(e,i),b.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},b.reject=function(t,e,i){return b.filter(t,b.negate(k(e)),i)},b.every=b.all=function(t,e,i){e=k(e,i);for(var n=!E(t)&&b.keys(t),r=(n||t).length,o=0;r>o;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0},b.some=b.any=function(t,e,i){e=k(e,i);for(var n=!E(t)&&b.keys(t),r=(n||t).length,o=0;r>o;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,i,n){return E(t)||(t=b.values(t)),("number"!=typeof i||n)&&(i=0),b.indexOf(t,e,i)>=0},b.invoke=function(t,e){var i=p.call(arguments,2),n=b.isFunction(e);return b.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,i){var n,r,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=E(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>o&&(o=n)}else e=k(e,i),b.each(t,function(t,i,n){r=e(t,i,n),(r>s||r===-(1/0)&&o===-(1/0))&&(o=t,s=r)});return o},b.min=function(t,e,i){var n,r,o=1/0,s=1/0;if(null==e&&null!=t){t=E(t)?t:b.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],o>n&&(o=n)}else e=k(e,i),b.each(t,function(t,i,n){r=e(t,i,n),(s>r||r===1/0&&o===1/0)&&(o=t,s=r)});return o},b.shuffle=function(t){for(var e,i=E(t)?t:b.values(t),n=i.length,r=Array(n),o=0;n>o;o++)e=b.random(0,o),e!==o&&(r[o]=r[e]),r[e]=i[o];return r},b.sample=function(t,e,i){return null==e||i?(E(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,i){return e=k(e,i),b.pluck(b.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var L=function(t){return function(e,i,n){var r={};return i=k(i,n),b.each(e,function(n,o){var s=i(n,o,e);t(r,n,s)}),r}};b.groupBy=L(function(t,e,i){b.has(t,i)?t[i].push(e):t[i]=[e]}),b.indexBy=L(function(t,e,i){t[i]=e}),b.countBy=L(function(t,e,i){b.has(t,i)?t[i]++:t[i]=1}),b.toArray=function(t){return t?b.isArray(t)?p.call(t):E(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:E(t)?t.length:b.keys(t).length},b.partition=function(t,e,i){e=k(e,i);var n=[],r=[];return b.each(t,function(t,i,o){(e(t,i,o)?n:r).push(t)}),[n,r]},b.first=b.head=b.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,i){return p.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},b.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,i){return p.call(t,null==e||i?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var P=function(t,e,i,n){for(var r=[],o=0,s=n||0,a=$(t);a>s;s++){var l=t[s];if(E(l)&&(b.isArray(l)||b.isArguments(l))){e||(l=P(l,e,i));var u=0,c=l.length;for(r.length+=c;c>u;)r[o++]=l[u++]}else i||(r[o++]=l)}return r};b.flatten=function(t,e){return P(t,e,!1)},b.without=function(t){return b.difference(t,p.call(arguments,1))},b.uniq=b.unique=function(t,e,i,n){b.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=k(i,n));for(var r=[],o=[],s=0,a=$(t);a>s;s++){var l=t[s],u=i?i(l,s,t):l;e?(s&&o===u||r.push(l),o=u):i?b.contains(o,u)||(o.push(u),r.push(l)):b.contains(r,l)||r.push(l)}return r},b.union=function(){return b.uniq(P(arguments,!0,!0))},b.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=$(t);r>n;n++){var o=t[n];if(!b.contains(e,o)){for(var s=1;i>s&&b.contains(arguments[s],o);s++);s===i&&e.push(o)}}return e},b.difference=function(t){var e=P(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,$).length||0,i=Array(e),n=0;e>n;n++)i[n]=b.pluck(t,n);return i},b.object=function(t,e){for(var i={},n=0,r=$(t);r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},b.findIndex=n(1),b.findLastIndex=n(-1),b.sortedIndex=function(t,e,i,n){i=k(i,n,1);for(var r=i(e),o=0,s=$(t);s>o;){var a=Math.floor((o+s)/2);i(t[a])<r?o=a+1:s=a}return o},b.indexOf=r(1,b.findIndex,b.sortedIndex),b.lastIndexOf=r(-1,b.findLastIndex),b.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;n>o;o++,t+=i)r[o]=t;return r};var M=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=S(t.prototype),s=t.apply(o,r);return b.isObject(s)?s:o};b.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,p.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var i=p.call(arguments,2),n=function(){return M(t,n,e,this,i.concat(p.call(arguments)))};return n},b.partial=function(t){var e=p.call(arguments,1),i=function(){for(var n=0,r=e.length,o=Array(r),s=0;r>s;s++)o[s]=e[s]===b?arguments[n++]:e[s];for(;n<arguments.length;)o.push(arguments[n++]);return M(t,i,this,this,o)};return i},b.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=b.bind(t[i],t);return t},b.memoize=function(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return b.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},b.delay=function(t,e){var i=p.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:b.now(),s=null,o=t.apply(n,r),s||(n=r=null)};return function(){var u=b.now();a||i.leading!==!1||(a=u);var c=e-(u-a);return n=this,r=arguments,0>=c||c>e?(s&&(clearTimeout(s),s=null),a=u,o=t.apply(n,r),s||(n=r=null)):s||i.trailing===!1||(s=setTimeout(l,c)),o}},b.debounce=function(t,e,i){var n,r,o,s,a,l=function(){var u=b.now()-s;e>u&&u>=0?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(o,r),n||(o=r=null)))};return function(){o=this,r=arguments,s=b.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(o,r),o=r=null),a}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},b.once=b.partial(b.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(m)return m(t);var e=[];for(var i in t)b.has(t,i)&&e.push(i);return O&&o(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var i in t)e.push(i);return O&&o(t,e),e},b.values=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},b.mapObject=function(t,e,i){e=k(e,i);for(var n,r=b.keys(t),o=r.length,s={},a=0;o>a;a++)n=r[a],s[n]=e(t[n],n,t);return s},b.pairs=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},b.invert=function(t){for(var e={},i=b.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},b.functions=b.methods=function(t){var e=[];for(var i in t)b.isFunction(t[i])&&e.push(i);return e.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(t,e,i){e=k(e,i);for(var n,r=b.keys(t),o=0,s=r.length;s>o;o++)if(n=r[o],e(t[n],n,t))return n},b.pick=function(t,e,i){var n,r,o={},s=t;if(null==s)return o;b.isFunction(e)?(r=b.allKeys(s),n=w(e,i)):(r=P(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var a=0,l=r.length;l>a;a++){var u=r[a],c=s[u];n(c,u,s)&&(o[u]=c)}return o},b.omit=function(t,e,i){if(b.isFunction(e))e=b.negate(e);else{var n=b.map(P(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(n,e)}}return b.pick(t,e,i)},b.defaults=x(b.allKeys,!0),b.create=function(t,e){var i=S(t);return e&&b.extendOwn(i,e),i},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var i=b.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;n>o;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var z=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var r=d.call(t);if(r!==d.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!z(t[l],e[l],i,n))return!1}else{var u,c=b.keys(t);if(l=c.length,b.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!b.has(e,u)||!z(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0};b.isEqual=function(t,e){return z(t,e)},b.isEmpty=function(t){return null==t?!0:E(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&f.call(t,e)},b.noConflict=function(){return s._=a,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=C,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,i){var n=Array(Math.max(0,t));e=w(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(R),N=function(t){var e=function(e){return t[e]},i="(?:"+b.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};b.escape=N(R),b.unescape=N(I),b.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),b.isFunction(n)?n.call(t):n};var j=0;b.uniqueId=function(t){var e=++j+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+B[t]};b.template=function(t,e,i){!e&&i&&(e=i),e=b.defaults({},e,b.templateSettings);var n=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(D,U),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(t){return s.call(this,t,b)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},b.chain=function(t){var e=b(t);return e._chain=!0,e};var H=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var i=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),H(this,i.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];b.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],H(this,i)}}),b.each(["concat","join","slice"],function(t){var e=l[t];b.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],backbone:[function(t,e,i){(function(i){_=i._=t(78);var n=t;(function(t,e,i,r,o){!function(t,i){if("function"==typeof r&&r.amd)r(["underscore","jquery","exports"],function(e,n,r){t.Backbone=i(t,r,e,n)});else if("undefined"!=typeof e){var o=n("underscore");i(t,e,o)}else t.Backbone=i(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var r=t.Backbone,o=[],s=(o.push,o.slice);o.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var r=this,o=i.once(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,s,a,l,c,h,p;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||n)for(h=0,p=s.length;p>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,n,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(t,e){a[e]=function(e,n,r){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=i.uniqueId("l"));return o[s]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var p=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,o,s,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;s=n.unset,l=n.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);

for(r in o)e=o[r],i.isEqual(h[r],e)||a.push(r),i.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete h[r]:h[r]=e;if(!l){a.length&&(this._pending=n);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,h[a[p]],n)}if(u)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(r[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},N(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,o,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(u&&u(l,t,n),void l.trigger("sync",l,t,n))},N(this,n),o=this.isNew()?"create":n.patch?"patch":"update","patch"===o&&(n.attrs=r),s=this.sync(o,this,n),r&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;N(this,t);var o=this.sync("delete",this,t);return t.wait||r(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||I();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];i.each(d,function(t){p.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,a,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,m))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,o,s,a;for(r=0,o=t.length;o>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,o,s,a,l,u,c,h=e.at,d=this.model,f=this.comparator&&null==h&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},b=e.add,w=e.merge,k=e.remove,x=!f&&b&&k?[]:!1;for(r=0,o=t.length;o>r;r++){if(l=t[r]||{},s=l instanceof p?a=l:l[d.prototype.idAttribute||"id"],u=this.get(s))k&&(_[u.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=u.parse(l,e)),u.set(l,e),f&&!c&&u.hasChanged(m)&&(c=!0)),t[r]=u;else if(b){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=u||a,!x||!a.isNew()&&_[a.id]||x.push(a),_[a.id]=!0}if(k){for(r=0,o=this.length;o>r;++r)_[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||x&&x.length)if(f&&(c=!0),this.length+=v.length,null!=h)for(r=0,o=v.length;o>r;r++)this.models.splice(h+r,0,v[r]);else{x&&(this.models.length=0);var S=x||v;for(r=0,o=S.length;o>r;r++)this.models.push(S[r])}if(c&&this.sort({silent:!0}),!e.silent){for(r=0,o=v.length;o>r;r++)(a=v[r]).trigger("add",a,this,e);(c||x&&x.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(b),o=r[1],s=r[2];n=i.bind(n,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,n):this.$el.on(o,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var o=x[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||I()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&k&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(i.extend(s,r));return n.trigger("request",n,l,r),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,$=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(S.prototype,a,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return e.history.route(t,function(i){var s=o._extractParameters(t,i);o.execute(r,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace(C,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace($,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,O=/msie [\w.]+/,A=/\/$/,z=/#.*$/;L.started=!1,i.extend(L.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(A,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");L.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,o=O.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(M,"/"),o&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(z,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new L;var R=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};p.extend=f.extend=S.extend=_.extend=L.extend=R;var I=function(){throw new Error('A "url" property or function must be specified')},N=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),o("undefined"!=typeof Backbone?Backbone:window.Backbone)}).call(i,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{78:78}]},{},[1]);